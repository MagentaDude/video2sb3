(function(){const it=document.createElement("link").relList;if(it&&it.supports&&it.supports("modulepreload"))return;for(const D of document.querySelectorAll('link[rel="modulepreload"]'))G(D);new MutationObserver(D=>{for(const y of D)if(y.type==="childList")for(const S of y.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&G(S)}).observe(document,{childList:!0,subtree:!0});function x(D){const y={};return D.integrity&&(y.integrity=D.integrity),D.referrerPolicy&&(y.referrerPolicy=D.referrerPolicy),D.crossOrigin==="use-credentials"?y.credentials="include":D.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function G(D){if(D.ep)return;D.ep=!0;const y=x(D);fetch(D.href,y)}})();var zr={};function tn(q){return new Int8Array(q)}function en(q){return new Int16Array(q)}function Ra(q){return new Int32Array(q)}function Ea(q){return new Float32Array(q)}function rn(q){return new Float64Array(q)}function Ma(q){if(q.length==1)return Ea(q[0]);var it=q[0];q=q.slice(1);for(var x=[],G=0;G<it;G++)x.push(Ma(q));return x}function Ta(q){if(q.length==1)return Ra(q[0]);var it=q[0];q=q.slice(1);for(var x=[],G=0;G<it;G++)x.push(Ta(q));return x}function Ia(q){if(q.length==1)return en(q[0]);var it=q[0];q=q.slice(1);for(var x=[],G=0;G<it;G++)x.push(Ia(q));return x}function Oa(q){if(q.length==1)return new Array(q[0]);var it=q[0];q=q.slice(1);for(var x=[],G=0;G<it;G++)x.push(Oa(q));return x}var Ca={};Ca.fill=function(q,it,x,G){if(arguments.length==2)for(var D=0;D<q.length;D++)q[D]=arguments[1];else for(var D=it;D<x;D++)q[D]=G};var Je={};Je.arraycopy=function(q,it,x,G,D){for(var y=it+D;it<y;)x[G++]=q[it++]};Je.out={};Je.out.println=function(q){console.log(q)};Je.out.printf=function(){console.log.apply(console,arguments)};var _r={};_r.SQRT2=1.4142135623730951;_r.FAST_LOG10=function(q){return Math.log10(q)};_r.FAST_LOG10_X=function(q,it){return Math.log10(q)*it};function Ae(q){this.ordinal=q}Ae.short_block_allowed=new Ae(0);Ae.short_block_coupled=new Ae(1);Ae.short_block_dispensed=new Ae(2);Ae.short_block_forced=new Ae(3);var Pa={};Pa.MAX_VALUE=34028235e31;function he(q){this.ordinal=q}he.vbr_off=new he(0);he.vbr_mt=new he(1);he.vbr_rh=new he(2);he.vbr_abr=new he(3);he.vbr_mtrh=new he(4);he.vbr_default=he.vbr_mtrh;var an=function(q){},Gt={System:Je,VbrMode:he,Float:Pa,ShortBlock:Ae,Util:_r,Arrays:Ca,new_array_n:Oa,new_byte:tn,new_double:rn,new_float:Ea,new_float_n:Ma,new_int:Ra,new_int_n:Ta,new_short_n:Ia,assert:an},yr,Kr;function nn(){if(Kr)return yr;Kr=1;var q=Gt,it=q.System,x=q.Util,G=q.Arrays,D=q.new_float,y=ae();function S(){var p=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*x.SQRT2*.5/2384e-9,.017876148*x.SQRT2*.5/2384e-9,.003134727*x.SQRT2*.5/2384e-9,.002457142*x.SQRT2*.5/2384e-9,971317e-9*x.SQRT2*.5/2384e-9,218868e-9*x.SQRT2*.5/2384e-9,101566e-9*x.SQRT2*.5/2384e-9,13828e-9*x.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],k=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],L=k[y.SHORT_TYPE],d=k[y.SHORT_TYPE],u=k[y.SHORT_TYPE],C=k[y.SHORT_TYPE],g=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function B(r,e,t){for(var a=10,l=e+238-14-286,o=-15;o<0;o++){var A,M,P;A=p[a+-10],M=r[l+-224]*A,P=r[e+224]*A,A=p[a+-9],M+=r[l+-160]*A,P+=r[e+160]*A,A=p[a+-8],M+=r[l+-96]*A,P+=r[e+96]*A,A=p[a+-7],M+=r[l+-32]*A,P+=r[e+32]*A,A=p[a+-6],M+=r[l+32]*A,P+=r[e+-32]*A,A=p[a+-5],M+=r[l+96]*A,P+=r[e+-96]*A,A=p[a+-4],M+=r[l+160]*A,P+=r[e+-160]*A,A=p[a+-3],M+=r[l+224]*A,P+=r[e+-224]*A,A=p[a+-2],M+=r[e+-256]*A,P-=r[l+256]*A,A=p[a+-1],M+=r[e+-192]*A,P-=r[l+192]*A,A=p[a+0],M+=r[e+-128]*A,P-=r[l+128]*A,A=p[a+1],M+=r[e+-64]*A,P-=r[l+64]*A,A=p[a+2],M+=r[e+0]*A,P-=r[l+0]*A,A=p[a+3],M+=r[e+64]*A,P-=r[l+-64]*A,A=p[a+4],M+=r[e+128]*A,P-=r[l+-128]*A,A=p[a+5],M+=r[e+192]*A,P-=r[l+-192]*A,M*=p[a+6],A=P-M,t[30+o*2]=P+M,t[31+o*2]=p[a+7]*A,a+=18,e--,l++}{var M,P,V,U;P=r[e+-16]*p[a+-10],M=r[e+-32]*p[a+-2],P+=(r[e+-48]-r[e+16])*p[a+-9],M+=r[e+-96]*p[a+-1],P+=(r[e+-80]+r[e+48])*p[a+-8],M+=r[e+-160]*p[a+0],P+=(r[e+-112]-r[e+80])*p[a+-7],M+=r[e+-224]*p[a+1],P+=(r[e+-144]+r[e+112])*p[a+-6],M-=r[e+32]*p[a+2],P+=(r[e+-176]-r[e+144])*p[a+-5],M-=r[e+96]*p[a+3],P+=(r[e+-208]+r[e+176])*p[a+-4],M-=r[e+160]*p[a+4],P+=(r[e+-240]-r[e+208])*p[a+-3],M-=r[e+224],V=M-P,U=M+P,P=t[14],M=t[15]-P,t[31]=U+P,t[30]=V+M,t[15]=V-M,t[14]=U-P}{var _;_=t[28]-t[0],t[0]+=t[28],t[28]=_*p[a+-36+7],_=t[29]-t[1],t[1]+=t[29],t[29]=_*p[a+-36+7],_=t[26]-t[2],t[2]+=t[26],t[26]=_*p[a+-72+7],_=t[27]-t[3],t[3]+=t[27],t[27]=_*p[a+-72+7],_=t[24]-t[4],t[4]+=t[24],t[24]=_*p[a+-108+7],_=t[25]-t[5],t[5]+=t[25],t[25]=_*p[a+-108+7],_=t[22]-t[6],t[6]+=t[22],t[22]=_*x.SQRT2,_=t[23]-t[7],t[7]+=t[23],t[23]=_*x.SQRT2-t[7],t[7]-=t[6],t[22]-=t[7],t[23]-=t[22],_=t[6],t[6]=t[31]-_,t[31]=t[31]+_,_=t[7],t[7]=t[30]-_,t[30]=t[30]+_,_=t[22],t[22]=t[15]-_,t[15]=t[15]+_,_=t[23],t[23]=t[14]-_,t[14]=t[14]+_,_=t[20]-t[8],t[8]+=t[20],t[20]=_*p[a+-180+7],_=t[21]-t[9],t[9]+=t[21],t[21]=_*p[a+-180+7],_=t[18]-t[10],t[10]+=t[18],t[18]=_*p[a+-216+7],_=t[19]-t[11],t[11]+=t[19],t[19]=_*p[a+-216+7],_=t[16]-t[12],t[12]+=t[16],t[16]=_*p[a+-252+7],_=t[17]-t[13],t[13]+=t[17],t[17]=_*p[a+-252+7],_=-t[20]+t[24],t[20]+=t[24],t[24]=_*p[a+-216+7],_=-t[21]+t[25],t[21]+=t[25],t[25]=_*p[a+-216+7],_=t[4]-t[8],t[4]+=t[8],t[8]=_*p[a+-216+7],_=t[5]-t[9],t[5]+=t[9],t[9]=_*p[a+-216+7],_=t[0]-t[12],t[0]+=t[12],t[12]=_*p[a+-72+7],_=t[1]-t[13],t[1]+=t[13],t[13]=_*p[a+-72+7],_=t[16]-t[28],t[16]+=t[28],t[28]=_*p[a+-72+7],_=-t[17]+t[29],t[17]+=t[29],t[29]=_*p[a+-72+7],_=x.SQRT2*(t[2]-t[10]),t[2]+=t[10],t[10]=_,_=x.SQRT2*(t[3]-t[11]),t[3]+=t[11],t[11]=_,_=x.SQRT2*(-t[18]+t[26]),t[18]+=t[26],t[26]=_-t[18],_=x.SQRT2*(-t[19]+t[27]),t[19]+=t[27],t[27]=_-t[19],_=t[2],t[19]-=t[3],t[3]-=_,t[2]=t[31]-_,t[31]+=_,_=t[3],t[11]-=t[19],t[18]-=_,t[3]=t[30]-_,t[30]+=_,_=t[18],t[27]-=t[11],t[19]-=_,t[18]=t[15]-_,t[15]+=_,_=t[19],t[10]-=_,t[19]=t[14]-_,t[14]+=_,_=t[10],t[11]-=_,t[10]=t[23]-_,t[23]+=_,_=t[11],t[26]-=_,t[11]=t[22]-_,t[22]+=_,_=t[26],t[27]-=_,t[26]=t[7]-_,t[7]+=_,_=t[27],t[27]=t[6]-_,t[6]+=_,_=x.SQRT2*(t[0]-t[4]),t[0]+=t[4],t[4]=_,_=x.SQRT2*(t[1]-t[5]),t[1]+=t[5],t[5]=_,_=x.SQRT2*(t[16]-t[20]),t[16]+=t[20],t[20]=_,_=x.SQRT2*(t[17]-t[21]),t[17]+=t[21],t[21]=_,_=-x.SQRT2*(t[8]-t[12]),t[8]+=t[12],t[12]=_-t[8],_=-x.SQRT2*(t[9]-t[13]),t[9]+=t[13],t[13]=_-t[9],_=-x.SQRT2*(t[25]-t[29]),t[25]+=t[29],t[29]=_-t[25],_=-x.SQRT2*(t[24]+t[28]),t[24]-=t[28],t[28]=_-t[24],_=t[24]-t[16],t[24]=_,_=t[20]-_,t[20]=_,_=t[28]-_,t[28]=_,_=t[25]-t[17],t[25]=_,_=t[21]-_,t[21]=_,_=t[29]-_,t[29]=_,_=t[17]-t[1],t[17]=_,_=t[9]-_,t[9]=_,_=t[25]-_,t[25]=_,_=t[5]-_,t[5]=_,_=t[21]-_,t[21]=_,_=t[13]-_,t[13]=_,_=t[29]-_,t[29]=_,_=t[1]-t[0],t[1]=_,_=t[16]-_,t[16]=_,_=t[17]-_,t[17]=_,_=t[8]-_,t[8]=_,_=t[9]-_,t[9]=_,_=t[24]-_,t[24]=_,_=t[25]-_,t[25]=_,_=t[4]-_,t[4]=_,_=t[5]-_,t[5]=_,_=t[20]-_,t[20]=_,_=t[21]-_,t[21]=_,_=t[12]-_,t[12]=_,_=t[13]-_,t[13]=_,_=t[28]-_,t[28]=_,_=t[29]-_,t[29]=_,_=t[0],t[0]+=t[31],t[31]-=_,_=t[1],t[1]+=t[30],t[30]-=_,_=t[16],t[16]+=t[15],t[15]-=_,_=t[17],t[17]+=t[14],t[14]-=_,_=t[8],t[8]+=t[23],t[23]-=_,_=t[9],t[9]+=t[22],t[22]-=_,_=t[24],t[24]+=t[7],t[7]-=_,_=t[25],t[25]+=t[6],t[6]-=_,_=t[4],t[4]+=t[27],t[27]-=_,_=t[5],t[5]+=t[26],t[26]-=_,_=t[20],t[20]+=t[11],t[11]-=_,_=t[21],t[21]+=t[10],t[10]-=_,_=t[12],t[12]+=t[19],t[19]-=_,_=t[13],t[13]+=t[18],t[18]-=_,_=t[28],t[28]+=t[3],t[3]-=_,_=t[29],t[29]+=t[2],t[2]-=_}}function w(r,e){for(var t=0;t<3;t++){var a,l,o,A,M,P;A=r[e+6]*k[y.SHORT_TYPE][0]-r[e+15],a=r[e+0]*k[y.SHORT_TYPE][2]-r[e+9],l=A+a,o=A-a,A=r[e+15]*k[y.SHORT_TYPE][0]+r[e+6],a=r[e+9]*k[y.SHORT_TYPE][2]+r[e+0],M=A+a,P=-A+a,a=(r[e+3]*k[y.SHORT_TYPE][1]-r[e+12])*2069978111953089e-26,A=(r[e+12]*k[y.SHORT_TYPE][1]+r[e+3])*2069978111953089e-26,r[e+0]=l*190752519173728e-25+a,r[e+15]=-M*190752519173728e-25+A,o=o*.8660254037844387*1907525191737281e-26,M=M*.5*1907525191737281e-26+A,r[e+3]=o-M,r[e+6]=o+M,l=l*.5*1907525191737281e-26-a,P=P*.8660254037844387*1907525191737281e-26,r[e+9]=l+P,r[e+12]=l-P,e++}}function b(r,e,t){var a,l;{var o,A,M,P,V,U,_,T;o=t[17]-t[9],M=t[15]-t[11],P=t[14]-t[12],V=t[0]+t[8],U=t[1]+t[7],_=t[2]+t[6],T=t[3]+t[5],r[e+17]=V+_-T-(U-t[4]),l=(V+_-T)*d[19]+(U-t[4]),a=(o-M-P)*d[18],r[e+5]=a+l,r[e+6]=a-l,A=(t[16]-t[10])*d[18],U=U*d[19]+t[4],a=o*d[12]+A+M*d[13]+P*d[14],l=-V*d[16]+U-_*d[17]+T*d[15],r[e+1]=a+l,r[e+2]=a-l,a=o*d[13]-A-M*d[14]+P*d[12],l=-V*d[17]+U-_*d[15]+T*d[16],r[e+9]=a+l,r[e+10]=a-l,a=o*d[14]-A+M*d[12]-P*d[13],l=V*d[15]-U+_*d[16]-T*d[17],r[e+13]=a+l,r[e+14]=a-l}{var n,R,K,N,Z,W,z,h;n=t[8]-t[0],K=t[6]-t[2],N=t[5]-t[3],Z=t[17]+t[9],W=t[16]+t[10],z=t[15]+t[11],h=t[14]+t[12],r[e+0]=Z+z+h+(W+t[13]),a=(Z+z+h)*d[19]-(W+t[13]),l=(n-K+N)*d[18],r[e+11]=a+l,r[e+12]=a-l,R=(t[7]-t[1])*d[18],W=t[13]-W*d[19],a=Z*d[15]-W+z*d[16]+h*d[17],l=n*d[14]+R+K*d[12]+N*d[13],r[e+3]=a+l,r[e+4]=a-l,a=-Z*d[17]+W-z*d[15]-h*d[16],l=n*d[13]+R-K*d[14]-N*d[12],r[e+7]=a+l,r[e+8]=a-l,a=-Z*d[16]+W-z*d[17]-h*d[15],l=n*d[12]-R+K*d[13]-N*d[14],r[e+15]=a+l,r[e+16]=a-l}}this.mdct_sub48=function(r,e,t){for(var a=e,l=286,o=0;o<r.channels_out;o++){for(var A=0;A<r.mode_gr;A++){for(var M,P=r.l3_side.tt[A][o],V=P.xr,U=0,_=r.sb_sample[o][1-A],T=0,n=0;n<18/2;n++)for(B(a,l,_[T]),B(a,l+32,_[T+1]),T+=2,l+=64,M=1;M<32;M+=2)_[T-1][M]*=-1;for(M=0;M<32;M++,U+=18){var R=P.block_type,K=r.sb_sample[o][A],N=r.sb_sample[o][1-A];if(P.mixed_block_flag!=0&&M<2&&(R=0),r.amp_filter[M]<1e-12)G.fill(V,U+0,U+18,0);else{if(r.amp_filter[M]<1)for(var n=0;n<18;n++)N[n][g[M]]*=r.amp_filter[M];if(R==y.SHORT_TYPE){for(var n=-12/4;n<0;n++){var Z=k[y.SHORT_TYPE][n+3];V[U+n*3+9]=K[9+n][g[M]]*Z-K[8-n][g[M]],V[U+n*3+18]=K[14-n][g[M]]*Z+K[15+n][g[M]],V[U+n*3+10]=K[15+n][g[M]]*Z-K[14-n][g[M]],V[U+n*3+19]=N[2-n][g[M]]*Z+N[3+n][g[M]],V[U+n*3+11]=N[3+n][g[M]]*Z-N[2-n][g[M]],V[U+n*3+20]=N[8-n][g[M]]*Z+N[9+n][g[M]]}w(V,U)}else{for(var W=D(18),n=-36/4;n<0;n++){var z,h;z=k[R][n+27]*N[n+9][g[M]]+k[R][n+36]*N[8-n][g[M]],h=k[R][n+9]*K[n+9][g[M]]-k[R][n+18]*K[8-n][g[M]],W[n+9]=z-h*L[3+n+9],W[n+18]=z*L[3+n+9]+h}b(V,U,W)}}if(R!=y.SHORT_TYPE&&M!=0)for(var n=7;n>=0;--n){var i,c;i=V[U+n]*u[20+n]+V[U+-1-n]*C[28+n],c=V[U+n]*C[28+n]-V[U+-1-n]*u[20+n],V[U+-1-n]=i,V[U+n]=c}}}if(a=t,l=286,r.mode_gr==1)for(var v=0;v<18;v++)it.arraycopy(r.sb_sample[o][1][v],0,r.sb_sample[o][0][v],0,32)}}}return yr=S,yr}var Sr,Jr;function Da(){if(Jr)return Sr;Jr=1;var q=ae(),it=Gt,x=it.System,G=it.new_float,D=it.new_float_n;function y(){this.l=G(q.SBMAX_l),this.s=D([q.SBMAX_s,3]);var S=this;this.assign=function(p){x.arraycopy(p.l,0,S.l,0,q.SBMAX_l);for(var k=0;k<q.SBMAX_s;k++)for(var L=0;L<3;L++)S.s[k][L]=p.s[k][L]}}return Sr=y,Sr}var kr,$r;function sn(){if($r)return kr;$r=1;var q=Da();function it(){this.thm=new q,this.en=new q}return kr=it,kr}function ve(q){var it=q;this.ordinal=function(){return it}}ve.STEREO=new ve(0);ve.JOINT_STEREO=new ve(1);ve.DUAL_CHANNEL=new ve(2);ve.MONO=new ve(3);ve.NOT_SET=new ve(4);var $e=ve,Ar,ta;function ae(){if(ta)return Ar;ta=1;var q=Gt,it=q.System,x=q.VbrMode,G=q.new_array_n,D=q.new_float,y=q.new_float_n,S=q.new_int,p=q.assert;k.ENCDELAY=576,k.POSTDELAY=1152,k.MDCTDELAY=48,k.FFTOFFSET=224+k.MDCTDELAY,k.DECDELAY=528,k.SBLIMIT=32,k.CBANDS=64,k.SBPSY_l=21,k.SBPSY_s=12,k.SBMAX_l=22,k.SBMAX_s=13,k.PSFB21=6,k.PSFB12=6,k.BLKSIZE=1024,k.HBLKSIZE=k.BLKSIZE/2+1,k.BLKSIZE_s=256,k.HBLKSIZE_s=k.BLKSIZE_s/2+1,k.NORM_TYPE=0,k.START_TYPE=1,k.SHORT_TYPE=2,k.STOP_TYPE=3,k.MPG_MD_LR_LR=0,k.MPG_MD_LR_I=1,k.MPG_MD_MS_LR=2,k.MPG_MD_MS_I=3,k.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function k(){var L=nn(),d=sn(),u=$e,C=k.FFTOFFSET,g=k.MPG_MD_MS_LR,B=null;this.psy=null;var w=null,b=null,r=null;this.setModules=function(o,A,M,P){B=o,this.psy=A,w=A,b=P,r=M};var e=new L;function t(o){var A,M;if(o.ATH.useAdjust==0){o.ATH.adjust=1;return}if(M=o.loudness_sq[0][0],A=o.loudness_sq[1][0],o.channels_out==2?(M+=o.loudness_sq[0][1],A+=o.loudness_sq[1][1]):(M+=M,A+=A),o.mode_gr==2&&(M=Math.max(M,A)),M*=.5,M*=o.ATH.aaSensitivityP,M>.03125)o.ATH.adjust>=1?o.ATH.adjust=1:o.ATH.adjust<o.ATH.adjustLimit&&(o.ATH.adjust=o.ATH.adjustLimit),o.ATH.adjustLimit=1;else{var P=31.98*M+625e-6;o.ATH.adjust>=P?(o.ATH.adjust*=P*.075+.925,o.ATH.adjust<P&&(o.ATH.adjust=P)):o.ATH.adjustLimit>=P?o.ATH.adjust=P:o.ATH.adjust<o.ATH.adjustLimit&&(o.ATH.adjust=o.ATH.adjustLimit),o.ATH.adjustLimit=P}}function a(o){var A,M;for(p(0<=o.bitrate_index&&o.bitrate_index<16),p(0<=o.mode_ext&&o.mode_ext<4),o.bitrate_stereoMode_Hist[o.bitrate_index][4]++,o.bitrate_stereoMode_Hist[15][4]++,o.channels_out==2&&(o.bitrate_stereoMode_Hist[o.bitrate_index][o.mode_ext]++,o.bitrate_stereoMode_Hist[15][o.mode_ext]++),A=0;A<o.mode_gr;++A)for(M=0;M<o.channels_out;++M){var P=o.l3_side.tt[A][M].block_type|0;o.l3_side.tt[A][M].mixed_block_flag!=0&&(P=4),o.bitrate_blockType_Hist[o.bitrate_index][P]++,o.bitrate_blockType_Hist[o.bitrate_index][5]++,o.bitrate_blockType_Hist[15][P]++,o.bitrate_blockType_Hist[15][5]++}}function l(o,A){var M=o.internal_flags,P,V;if(M.lame_encode_frame_init==0){var U,_,T=D(2014),n=D(2014);for(M.lame_encode_frame_init=1,U=0,_=0;U<286+576*(1+M.mode_gr);++U)U<576*M.mode_gr?(T[U]=0,M.channels_out==2&&(n[U]=0)):(T[U]=A[0][_],M.channels_out==2&&(n[U]=A[1][_]),++_);for(V=0;V<M.mode_gr;V++)for(P=0;P<M.channels_out;P++)M.l3_side.tt[V][P].block_type=k.SHORT_TYPE;e.mdct_sub48(M,T,n),p(576>=k.FFTOFFSET),p(M.mf_size>=k.BLKSIZE+o.framesize-k.FFTOFFSET),p(M.mf_size>=512+o.framesize-32)}}this.lame_encode_mp3_frame=function(o,A,M,P,V,U){var _,T=G([2,2]);T[0][0]=new d,T[0][1]=new d,T[1][0]=new d,T[1][1]=new d;var n=G([2,2]);n[0][0]=new d,n[0][1]=new d,n[1][0]=new d,n[1][1]=new d;var R,K=[null,null],N=o.internal_flags,Z=y([2,4]),W=[.5,.5],z=[[0,0],[0,0]],h=[[0,0],[0,0]],i,c,v;if(K[0]=A,K[1]=M,N.lame_encode_frame_init==0&&l(o,K),N.padding=0,(N.slot_lag-=N.frac_SpF)<0&&(N.slot_lag+=o.out_samplerate,N.padding=1),N.psymodel!=0){var E,et=[null,null],ft=0,X=S(2);for(v=0;v<N.mode_gr;v++){for(c=0;c<N.channels_out;c++)et[c]=K[c],ft=576+v*576-k.FFTOFFSET;if(o.VBR==x.vbr_mtrh||o.VBR==x.vbr_mt?E=w.L3psycho_anal_vbr(o,et,ft,v,T,n,z[v],h[v],Z[v],X):E=w.L3psycho_anal_ns(o,et,ft,v,T,n,z[v],h[v],Z[v],X),E!=0)return-4;for(o.mode==u.JOINT_STEREO&&(W[v]=Z[v][2]+Z[v][3],W[v]>0&&(W[v]=Z[v][3]/W[v])),c=0;c<N.channels_out;c++){var $=N.l3_side.tt[v][c];$.block_type=X[c],$.mixed_block_flag=0}}}else for(v=0;v<N.mode_gr;v++)for(c=0;c<N.channels_out;c++)N.l3_side.tt[v][c].block_type=k.NORM_TYPE,N.l3_side.tt[v][c].mixed_block_flag=0,h[v][c]=z[v][c]=700;if(t(N),e.mdct_sub48(N,K[0],K[1]),N.mode_ext=k.MPG_MD_LR_LR,o.force_ms)N.mode_ext=k.MPG_MD_MS_LR;else if(o.mode==u.JOINT_STEREO){var pt=0,wt=0;for(v=0;v<N.mode_gr;v++)for(c=0;c<N.channels_out;c++)pt+=h[v][c],wt+=z[v][c];if(pt<=1*wt){var Et=N.l3_side.tt[0],Mt=N.l3_side.tt[N.mode_gr-1];Et[0].block_type==Et[1].block_type&&Mt[0].block_type==Mt[1].block_type&&(N.mode_ext=k.MPG_MD_MS_LR)}}if(N.mode_ext==g?(R=n,i=h):(R=T,i=z),o.analysis&&N.pinfo!=null)for(v=0;v<N.mode_gr;v++)for(c=0;c<N.channels_out;c++)N.pinfo.ms_ratio[v]=N.ms_ratio[v],N.pinfo.ms_ener_ratio[v]=W[v],N.pinfo.blocktype[v][c]=N.l3_side.tt[v][c].block_type,N.pinfo.pe[v][c]=i[v][c],it.arraycopy(N.l3_side.tt[v][c].xr,0,N.pinfo.xr[v][c],0,576),N.mode_ext==g&&(N.pinfo.ers[v][c]=N.pinfo.ers[v][c+2],it.arraycopy(N.pinfo.energy[v][c+2],0,N.pinfo.energy[v][c],0,N.pinfo.energy[v][c].length));if(o.VBR==x.vbr_off||o.VBR==x.vbr_abr){var f,st;for(f=0;f<18;f++)N.nsPsy.pefirbuf[f]=N.nsPsy.pefirbuf[f+1];for(st=0,v=0;v<N.mode_gr;v++)for(c=0;c<N.channels_out;c++)st+=i[v][c];for(N.nsPsy.pefirbuf[18]=st,st=N.nsPsy.pefirbuf[9],f=0;f<9;f++)st+=(N.nsPsy.pefirbuf[f]+N.nsPsy.pefirbuf[18-f])*k.fircoef[f];for(st=670*5*N.mode_gr*N.channels_out/st,v=0;v<N.mode_gr;v++)for(c=0;c<N.channels_out;c++)i[v][c]*=st}if(N.iteration_loop.iteration_loop(o,i,W,R),B.format_bitstream(o),_=B.copy_buffer(N,P,V,U,1),o.bWriteVbrTag&&b.addVbrFrame(o),o.analysis&&N.pinfo!=null){for(c=0;c<N.channels_out;c++){var rt;for(rt=0;rt<C;rt++)N.pinfo.pcmdata[c][rt]=N.pinfo.pcmdata[c][rt+o.framesize];for(rt=C;rt<1600;rt++)N.pinfo.pcmdata[c][rt]=K[c][rt-C]}r.set_frame_pinfo(o,R)}return a(N),_}}return Ar=k,Ar}var La=Gt,ea=La.Util,ra=La.new_float,$t=ae();function on(){var q=ra($t.BLKSIZE),it=ra($t.BLKSIZE_s/2),x=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function G(y,S,p){var k=0,L,d,u;p<<=1;var C=S+p;L=4;do{var g,B,w,b,r,e,t;t=L>>1,b=L,r=L<<1,e=r+b,L=r<<1,d=S,u=d+t;do{var a,l,o,A;l=y[d+0]-y[d+b],a=y[d+0]+y[d+b],A=y[d+r]-y[d+e],o=y[d+r]+y[d+e],y[d+r]=a-o,y[d+0]=a+o,y[d+e]=l-A,y[d+b]=l+A,l=y[u+0]-y[u+b],a=y[u+0]+y[u+b],A=ea.SQRT2*y[u+e],o=ea.SQRT2*y[u+r],y[u+r]=a-o,y[u+0]=a+o,y[u+e]=l-A,y[u+b]=l+A,u+=L,d+=L}while(d<C);for(B=x[k+0],g=x[k+1],w=1;w<t;w++){var M,P;M=1-2*g*g,P=2*g*B,d=S+w,u=S+b-w;do{var V,U,_,a,l,T,o,n,A,R;U=P*y[d+b]-M*y[u+b],V=M*y[d+b]+P*y[u+b],l=y[d+0]-V,a=y[d+0]+V,T=y[u+0]-U,_=y[u+0]+U,U=P*y[d+e]-M*y[u+e],V=M*y[d+e]+P*y[u+e],A=y[d+r]-V,o=y[d+r]+V,R=y[u+r]-U,n=y[u+r]+U,U=g*o-B*R,V=B*o+g*R,y[d+r]=a-V,y[d+0]=a+V,y[u+e]=T-U,y[u+b]=T+U,U=B*n-g*A,V=g*n+B*A,y[u+r]=_-V,y[u+0]=_+V,y[d+e]=l-U,y[d+b]=l+U,u+=L,d+=L}while(d<C);M=B,B=M*x[k+0]-g*x[k+1],g=M*x[k+1]+g*x[k+0]}k+=2}while(L<p)}var D=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(y,S,p,k,L){for(var d=0;d<3;d++){var u=$t.BLKSIZE_s/2,C=65535&576/3*(d+1),g=$t.BLKSIZE_s/8-1;do{var B,w,b,r,e,t=D[g<<2]&255;B=it[t]*k[p][L+t+C],e=it[127-t]*k[p][L+t+C+128],w=B-e,B=B+e,b=it[t+64]*k[p][L+t+C+64],e=it[63-t]*k[p][L+t+C+192],r=b-e,b=b+e,u-=4,S[d][u+0]=B+b,S[d][u+2]=B-b,S[d][u+1]=w+r,S[d][u+3]=w-r,B=it[t+1]*k[p][L+t+C+1],e=it[126-t]*k[p][L+t+C+129],w=B-e,B=B+e,b=it[t+65]*k[p][L+t+C+65],e=it[62-t]*k[p][L+t+C+193],r=b-e,b=b+e,S[d][u+$t.BLKSIZE_s/2+0]=B+b,S[d][u+$t.BLKSIZE_s/2+2]=B-b,S[d][u+$t.BLKSIZE_s/2+1]=w+r,S[d][u+$t.BLKSIZE_s/2+3]=w-r}while(--g>=0);G(S[d],u,$t.BLKSIZE_s/2)}},this.fft_long=function(y,S,p,k,L){var d=$t.BLKSIZE/8-1,u=$t.BLKSIZE/2;do{var C,g,B,w,b,r=D[d]&255;C=q[r]*k[p][L+r],b=q[r+512]*k[p][L+r+512],g=C-b,C=C+b,B=q[r+256]*k[p][L+r+256],b=q[r+768]*k[p][L+r+768],w=B-b,B=B+b,u-=4,S[u+0]=C+B,S[u+2]=C-B,S[u+1]=g+w,S[u+3]=g-w,C=q[r+1]*k[p][L+r+1],b=q[r+513]*k[p][L+r+513],g=C-b,C=C+b,B=q[r+257]*k[p][L+r+257],b=q[r+769]*k[p][L+r+769],w=B-b,B=B+b,S[u+$t.BLKSIZE/2+0]=C+B,S[u+$t.BLKSIZE/2+2]=C-B,S[u+$t.BLKSIZE/2+1]=g+w,S[u+$t.BLKSIZE/2+3]=g-w}while(--d>=0);G(S,u,$t.BLKSIZE/2)},this.init_fft=function(y){for(var S=0;S<$t.BLKSIZE;S++)q[S]=.42-.5*Math.cos(2*Math.PI*(S+.5)/$t.BLKSIZE)+.08*Math.cos(4*Math.PI*(S+.5)/$t.BLKSIZE);for(var S=0;S<$t.BLKSIZE_s/2;S++)it[S]=.5*(1-Math.cos(2*Math.PI*(S+.5)/$t.BLKSIZE_s))}}var ln=on,xe=Gt,De=xe.VbrMode,aa=xe.Float,Le=xe.ShortBlock,ie=xe.Util,_n=xe.Arrays,te=xe.new_float,ce=xe.new_float_n,Me=xe.new_int,zt=xe.assert,fn=ln,bt=ae();function un(){var q=$e,it=new fn,x=2.302585092994046,G=2,D=16,y=2,S=16,p=.34,k=1/(14752*14752)/(bt.BLKSIZE/2),L=.01,d=.8,u=.6,C=.3,g=3.5,B=21,w=.2302585093;function b(I,O){for(var Y=0,Q=0;Q<bt.BLKSIZE/2;++Q)Y+=I[Q]*O.ATH.eql_w[Q];return Y*=k,Y}function r(I,O,Y,Q,tt,F,nt,lt,at,dt,_t){var ht=I.internal_flags;if(at<2)it.fft_long(ht,Q[tt],at,dt,_t),it.fft_short(ht,F[nt],at,dt,_t);else if(at==2){for(var Rt=bt.BLKSIZE-1;Rt>=0;--Rt){var Dt=Q[tt+0][Rt],yt=Q[tt+1][Rt];Q[tt+0][Rt]=(Dt+yt)*ie.SQRT2*.5,Q[tt+1][Rt]=(Dt-yt)*ie.SQRT2*.5}for(var Pt=2;Pt>=0;--Pt)for(var Rt=bt.BLKSIZE_s-1;Rt>=0;--Rt){var Dt=F[nt+0][Pt][Rt],yt=F[nt+1][Pt][Rt];F[nt+0][Pt][Rt]=(Dt+yt)*ie.SQRT2*.5,F[nt+1][Pt][Rt]=(Dt-yt)*ie.SQRT2*.5}}O[0]=Q[tt+0][0],O[0]*=O[0];for(var Rt=bt.BLKSIZE/2-1;Rt>=0;--Rt){var ct=Q[tt+0][bt.BLKSIZE/2-Rt],Ot=Q[tt+0][bt.BLKSIZE/2+Rt];O[bt.BLKSIZE/2-Rt]=(ct*ct+Ot*Ot)*.5}for(var Pt=2;Pt>=0;--Pt){Y[Pt][0]=F[nt+0][Pt][0],Y[Pt][0]*=Y[Pt][0];for(var Rt=bt.BLKSIZE_s/2-1;Rt>=0;--Rt){var ct=F[nt+0][Pt][bt.BLKSIZE_s/2-Rt],Ot=F[nt+0][Pt][bt.BLKSIZE_s/2+Rt];Y[Pt][bt.BLKSIZE_s/2-Rt]=(ct*ct+Ot*Ot)*.5}}{for(var Ft=0,Rt=11;Rt<bt.HBLKSIZE;Rt++)Ft+=O[Rt];ht.tot_ener[at]=Ft}if(I.analysis){for(var Rt=0;Rt<bt.HBLKSIZE;Rt++)ht.pinfo.energy[lt][at][Rt]=ht.pinfo.energy_save[at][Rt],ht.pinfo.energy_save[at][Rt]=O[Rt];ht.pinfo.pe[lt][at]=ht.pe[at]}I.athaa_loudapprox==2&&at<2&&(ht.loudness_sq[lt][at]=ht.loudness_sq_save[at],ht.loudness_sq_save[at]=b(O,ht))}var e=8,t=23,a=15,l,o,A,M=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function P(){l=Math.pow(10,(e+1)/16),o=Math.pow(10,(t+1)/16),A=Math.pow(10,a/10)}var V=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],U=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],_=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function T(I,O,Y,Q,tt,F){var nt;if(O>I)if(O<I*o)nt=O/I;else return I+O;else{if(I>=O*o)return I+O;nt=I/O}if(I+=O,Q+3<=6){if(nt>=l)return I;var lt=0|ie.FAST_LOG10_X(nt,16);return I*U[lt]}var lt=0|ie.FAST_LOG10_X(nt,16);if(O=tt.ATH.cb_l[Y]*tt.ATH.adjust,I<A*O){if(I>O){var at,dt;return at=1,lt<=13&&(at=_[lt]),dt=ie.FAST_LOG10_X(I/O,10/15),I*((V[lt]-at)*dt+at)}return lt>13?I:I*_[lt]}return I*V[lt]}var n=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function R(I,O,Y){var Q;if(I<0&&(I=0),O<0&&(O=0),I<=0)return O;if(O<=0)return I;if(O>I?Q=O/I:Q=I/O,-2<=Y&&Y<=2){if(Q>=l)return I+O;var tt=0|ie.FAST_LOG10_X(Q,16);return(I+O)*n[tt]}return Q<o?I+O:(I<O&&(I=O),I)}function K(I,O){var Y=I.internal_flags;if(Y.channels_out>1){for(var Q=0;Q<bt.SBMAX_l;Q++){var tt=Y.thm[0].l[Q],F=Y.thm[1].l[Q];Y.thm[0].l[Q]+=F*O,Y.thm[1].l[Q]+=tt*O}for(var Q=0;Q<bt.SBMAX_s;Q++)for(var nt=0;nt<3;nt++){var tt=Y.thm[0].s[Q][nt],F=Y.thm[1].s[Q][nt];Y.thm[0].s[Q][nt]+=F*O,Y.thm[1].s[Q][nt]+=tt*O}}}function N(I){for(var O=0;O<bt.SBMAX_l;O++)if(!(I.thm[0].l[O]>1.58*I.thm[1].l[O]||I.thm[1].l[O]>1.58*I.thm[0].l[O])){var Y=I.mld_l[O]*I.en[3].l[O],Q=Math.max(I.thm[2].l[O],Math.min(I.thm[3].l[O],Y));Y=I.mld_l[O]*I.en[2].l[O];var tt=Math.max(I.thm[3].l[O],Math.min(I.thm[2].l[O],Y));I.thm[2].l[O]=Q,I.thm[3].l[O]=tt}for(var O=0;O<bt.SBMAX_s;O++)for(var F=0;F<3;F++)if(!(I.thm[0].s[O][F]>1.58*I.thm[1].s[O][F]||I.thm[1].s[O][F]>1.58*I.thm[0].s[O][F])){var Y=I.mld_s[O]*I.en[3].s[O][F],Q=Math.max(I.thm[2].s[O][F],Math.min(I.thm[3].s[O][F],Y));Y=I.mld_s[O]*I.en[2].s[O][F];var tt=Math.max(I.thm[3].s[O][F],Math.min(I.thm[2].s[O][F],Y));I.thm[2].s[O][F]=Q,I.thm[3].s[O][F]=tt}}function Z(I,O,Y){var Q=O,tt=Math.pow(10,Y);O*=2,Q*=2;for(var F=0;F<bt.SBMAX_l;F++){var nt,lt,at,dt;if(dt=I.ATH.cb_l[I.bm_l[F]]*tt,nt=Math.min(Math.max(I.thm[0].l[F],dt),Math.max(I.thm[1].l[F],dt)),lt=Math.max(I.thm[2].l[F],dt),at=Math.max(I.thm[3].l[F],dt),nt*O<lt+at){var _t=nt*Q/(lt+at);lt*=_t,at*=_t}I.thm[2].l[F]=Math.min(lt,I.thm[2].l[F]),I.thm[3].l[F]=Math.min(at,I.thm[3].l[F])}tt*=bt.BLKSIZE_s/bt.BLKSIZE;for(var F=0;F<bt.SBMAX_s;F++)for(var ht=0;ht<3;ht++){var nt,lt,at,dt;if(dt=I.ATH.cb_s[I.bm_s[F]]*tt,nt=Math.min(Math.max(I.thm[0].s[F][ht],dt),Math.max(I.thm[1].s[F][ht],dt)),lt=Math.max(I.thm[2].s[F][ht],dt),at=Math.max(I.thm[3].s[F][ht],dt),nt*O<lt+at){var _t=nt*O/(lt+at);lt*=_t,at*=_t}I.thm[2].s[F][ht]=Math.min(I.thm[2].s[F][ht],lt),I.thm[3].s[F][ht]=Math.min(I.thm[3].s[F][ht],at)}}function W(I,O,Y,Q,tt){var F,nt,lt=0,at=0;for(F=nt=0;F<bt.SBMAX_s;++nt,++F){for(var dt=I.bo_s[F],_t=I.npart_s,ht=dt<_t?dt:_t;nt<ht;)zt(O[nt]>=0),zt(Y[nt]>=0),lt+=O[nt],at+=Y[nt],nt++;if(I.en[Q].s[F][tt]=lt,I.thm[Q].s[F][tt]=at,nt>=_t){++F;break}zt(O[nt]>=0),zt(Y[nt]>=0);{var Rt=I.PSY.bo_s_weight[F],Dt=1-Rt;lt=Rt*O[nt],at=Rt*Y[nt],I.en[Q].s[F][tt]+=lt,I.thm[Q].s[F][tt]+=at,lt=Dt*O[nt],at=Dt*Y[nt]}}for(;F<bt.SBMAX_s;++F)I.en[Q].s[F][tt]=0,I.thm[Q].s[F][tt]=0}function z(I,O,Y,Q){var tt,F,nt=0,lt=0;for(tt=F=0;tt<bt.SBMAX_l;++F,++tt){for(var at=I.bo_l[tt],dt=I.npart_l,_t=at<dt?at:dt;F<_t;)zt(O[F]>=0),zt(Y[F]>=0),nt+=O[F],lt+=Y[F],F++;if(I.en[Q].l[tt]=nt,I.thm[Q].l[tt]=lt,F>=dt){++tt;break}zt(O[F]>=0),zt(Y[F]>=0);{var ht=I.PSY.bo_l_weight[tt],Rt=1-ht;nt=ht*O[F],lt=ht*Y[F],I.en[Q].l[tt]+=nt,I.thm[Q].l[tt]+=lt,nt=Rt*O[F],lt=Rt*Y[F]}}for(;tt<bt.SBMAX_l;++tt)I.en[Q].l[tt]=0,I.thm[Q].l[tt]=0}function h(I,O,Y,Q,tt,F){var nt=I.internal_flags,lt,at;for(at=lt=0;at<nt.npart_s;++at){for(var dt=0,_t=nt.numlines_s[at],ht=0;ht<_t;++ht,++lt){var Rt=O[F][lt];dt+=Rt}Y[at]=dt}for(zt(at==nt.npart_s),lt=at=0;at<nt.npart_s;at++){var Dt=nt.s3ind_s[at][0],yt=nt.s3_ss[lt++]*Y[Dt];for(++Dt;Dt<=nt.s3ind_s[at][1];)yt+=nt.s3_ss[lt]*Y[Dt],++lt,++Dt;{var Pt=y*nt.nb_s1[tt][at];Q[at]=Math.min(yt,Pt)}if(nt.blocktype_old[tt&1]==bt.SHORT_TYPE){var Pt=S*nt.nb_s2[tt][at],ct=Q[at];Q[at]=Math.min(Pt,ct)}nt.nb_s2[tt][at]=nt.nb_s1[tt][at],nt.nb_s1[tt][at]=yt,zt(Q[at]>=0)}for(;at<=bt.CBANDS;++at)Y[at]=0,Q[at]=0}function i(I,O,Y,Q){var tt=I.internal_flags;I.short_blocks==Le.short_block_coupled&&!(O[0]!=0&&O[1]!=0)&&(O[0]=O[1]=0);for(var F=0;F<tt.channels_out;F++)Q[F]=bt.NORM_TYPE,I.short_blocks==Le.short_block_dispensed&&(O[F]=1),I.short_blocks==Le.short_block_forced&&(O[F]=0),O[F]!=0?(zt(tt.blocktype_old[F]!=bt.START_TYPE),tt.blocktype_old[F]==bt.SHORT_TYPE&&(Q[F]=bt.STOP_TYPE)):(Q[F]=bt.SHORT_TYPE,tt.blocktype_old[F]==bt.NORM_TYPE&&(tt.blocktype_old[F]=bt.START_TYPE),tt.blocktype_old[F]==bt.STOP_TYPE&&(tt.blocktype_old[F]=bt.SHORT_TYPE)),Y[F]=tt.blocktype_old[F],tt.blocktype_old[F]=Q[F]}function c(I,O,Y){return Y>=1?I:Y<=0?O:O>0?Math.pow(I/O,Y)*O:0}var v=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function E(I,O){for(var Y=309.07,Q=0;Q<bt.SBMAX_s-1;Q++)for(var tt=0;tt<3;tt++){var F=I.thm.s[Q][tt];if(F>0){var nt=F*O,lt=I.en.s[Q][tt];lt>nt&&(lt>nt*1e10?Y+=v[Q]*(10*x):Y+=v[Q]*ie.FAST_LOG10(lt/nt))}}return Y}var et=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function ft(I,O){for(var Y=281.0575,Q=0;Q<bt.SBMAX_l-1;Q++){var tt=I.thm.l[Q];if(tt>0){var F=tt*O,nt=I.en.l[Q];nt>F&&(nt>F*1e10?Y+=et[Q]*(10*x):Y+=et[Q]*ie.FAST_LOG10(nt/F))}}return Y}function X(I,O,Y,Q,tt){var F,nt;for(F=nt=0;F<I.npart_l;++F){var lt=0,at=0,dt;for(dt=0;dt<I.numlines_l[F];++dt,++nt){var _t=O[nt];lt+=_t,at<_t&&(at=_t)}Y[F]=lt,Q[F]=at,tt[F]=lt*I.rnumlines_l[F],zt(I.rnumlines_l[F]>=0),zt(Y[F]>=0),zt(Q[F]>=0),zt(tt[F]>=0)}}function $(I,O,Y,Q){var tt=M.length-1,F=0,nt=Y[F]+Y[F+1];if(nt>0){var lt=O[F];lt<O[F+1]&&(lt=O[F+1]),zt(I.numlines_l[F]+I.numlines_l[F+1]-1>0),nt=20*(lt*2-nt)/(nt*(I.numlines_l[F]+I.numlines_l[F+1]-1));var at=0|nt;at>tt&&(at=tt),Q[F]=at}else Q[F]=0;for(F=1;F<I.npart_l-1;F++)if(nt=Y[F-1]+Y[F]+Y[F+1],nt>0){var lt=O[F-1];lt<O[F]&&(lt=O[F]),lt<O[F+1]&&(lt=O[F+1]),zt(I.numlines_l[F-1]+I.numlines_l[F]+I.numlines_l[F+1]-1>0),nt=20*(lt*3-nt)/(nt*(I.numlines_l[F-1]+I.numlines_l[F]+I.numlines_l[F+1]-1));var at=0|nt;at>tt&&(at=tt),Q[F]=at}else Q[F]=0;if(zt(F==I.npart_l-1),nt=Y[F-1]+Y[F],nt>0){var lt=O[F-1];lt<O[F]&&(lt=O[F]),zt(I.numlines_l[F-1]+I.numlines_l[F]-1>0),nt=20*(lt*2-nt)/(nt*(I.numlines_l[F-1]+I.numlines_l[F]-1));var at=0|nt;at>tt&&(at=tt),Q[F]=at}else Q[F]=0;zt(F==I.npart_l-1)}var pt=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(I,O,Y,Q,tt,F,nt,lt,at,dt){var _t=I.internal_flags,ht=ce([2,bt.BLKSIZE]),Rt=ce([2,3,bt.BLKSIZE_s]),Dt=te(bt.CBANDS+1),yt=te(bt.CBANDS+1),Pt=te(bt.CBANDS+2),ct=Me(2),Ot=Me(2),Ft,St,Ct,kt,Lt,Zt,Tt,Nt,Vt=ce([2,576]),Ut,_e=Me(bt.CBANDS+2),Jt=Me(bt.CBANDS+2);for(_n.fill(Jt,0),Ft=_t.channels_out,I.mode==q.JOINT_STEREO&&(Ft=4),I.VBR==De.vbr_off?Ut=_t.ResvMax==0?0:_t.ResvSize/_t.ResvMax*.5:I.VBR==De.vbr_rh||I.VBR==De.vbr_mtrh||I.VBR==De.vbr_mt?Ut=.6:Ut=1,St=0;St<_t.channels_out;St++){var qt=O[St],ne=Y+576-350-B+192;for(kt=0;kt<576;kt++){var fe,ue;for(fe=qt[ne+kt+10],ue=0,Lt=0;Lt<(B-1)/2-1;Lt+=2)fe+=pt[Lt]*(qt[ne+kt+Lt]+qt[ne+kt+B-Lt]),ue+=pt[Lt+1]*(qt[ne+kt+Lt+1]+qt[ne+kt+B-Lt-1]);Vt[St][kt]=fe+ue}tt[Q][St].en.assign(_t.en[St]),tt[Q][St].thm.assign(_t.thm[St]),Ft>2&&(F[Q][St].en.assign(_t.en[St+2]),F[Q][St].thm.assign(_t.thm[St+2]))}for(St=0;St<Ft;St++){var pe,me,re=te(12),we=[0,0,0,0],Pe=te(12),cr=1,Zr,Ur=te(bt.CBANDS),qr=te(bt.CBANDS),Wt=[0,0,0,0],Wr=te(bt.HBLKSIZE),Gr=ce([3,bt.HBLKSIZE_s]);for(zt(_t.npart_s<=bt.CBANDS),zt(_t.npart_l<=bt.CBANDS),kt=0;kt<3;kt++)re[kt]=_t.nsPsy.last_en_subshort[St][kt+6],zt(_t.nsPsy.last_en_subshort[St][kt+4]>0),Pe[kt]=re[kt]/_t.nsPsy.last_en_subshort[St][kt+4],we[0]+=re[kt];if(St==2)for(kt=0;kt<576;kt++){var dr,pr;dr=Vt[0][kt],pr=Vt[1][kt],Vt[0][kt]=dr+pr,Vt[1][kt]=dr-pr}{var Qr=Vt[St&1],He=0;for(kt=0;kt<9;kt++){for(var $a=He+64,ee=1;He<$a;He++)ee<Math.abs(Qr[He])&&(ee=Math.abs(Qr[He]));_t.nsPsy.last_en_subshort[St][kt]=re[kt+3]=ee,we[1+kt/3]+=ee,ee>re[kt+3-2]?(zt(re[kt+3-2]>0),ee=ee/re[kt+3-2]):re[kt+3-2]>ee*10?ee=re[kt+3-2]/(ee*10):ee=0,Pe[kt+3]=ee}}if(I.analysis){var mr=Pe[0];for(kt=1;kt<12;kt++)mr<Pe[kt]&&(mr=Pe[kt]);_t.pinfo.ers[Q][St]=_t.pinfo.ers_save[St],_t.pinfo.ers_save[St]=mr}for(Zr=St==3?_t.nsPsy.attackthre_s:_t.nsPsy.attackthre,kt=0;kt<12;kt++)Wt[kt/3]==0&&Pe[kt]>Zr&&(Wt[kt/3]=kt%3+1);for(kt=1;kt<4;kt++){var br;we[kt-1]>we[kt]?(zt(we[kt]>0),br=we[kt-1]/we[kt]):(zt(we[kt-1]>0),br=we[kt]/we[kt-1]),br<1.7&&(Wt[kt]=0,kt==1&&(Wt[0]=0))}for(Wt[0]!=0&&_t.nsPsy.lastAttacks[St]!=0&&(Wt[0]=0),(_t.nsPsy.lastAttacks[St]==3||Wt[0]+Wt[1]+Wt[2]+Wt[3]!=0)&&(cr=0,Wt[1]!=0&&Wt[0]!=0&&(Wt[1]=0),Wt[2]!=0&&Wt[1]!=0&&(Wt[2]=0),Wt[3]!=0&&Wt[2]!=0&&(Wt[3]=0)),St<2?Ot[St]=cr:cr==0&&(Ot[0]=Ot[1]=0),at[St]=_t.tot_ener[St],me=Rt,pe=ht,r(I,Wr,Gr,pe,St&1,me,St&1,Q,St,O,Y),X(_t,Wr,Dt,Ur,qr),$(_t,Ur,qr,_e),Nt=0;Nt<3;Nt++){var gr,se;for(h(I,Gr,yt,Pt,St,Nt),W(_t,yt,Pt,St,Nt),Tt=0;Tt<bt.SBMAX_s;Tt++){if(se=_t.thm[St].s[Tt][Nt],se*=d,Wt[Nt]>=2||Wt[Nt+1]==1){var Ye=Nt!=0?Nt-1:2,ee=c(_t.thm[St].s[Tt][Ye],se,u*Ut);se=Math.min(se,ee)}if(Wt[Nt]==1){var Ye=Nt!=0?Nt-1:2,ee=c(_t.thm[St].s[Tt][Ye],se,C*Ut);se=Math.min(se,ee)}else if(Nt!=0&&Wt[Nt-1]==3||Nt==0&&_t.nsPsy.lastAttacks[St]==3){var Ye=Nt!=2?Nt+1:0,ee=c(_t.thm[St].s[Tt][Ye],se,C*Ut);se=Math.min(se,ee)}gr=re[Nt*3+3]+re[Nt*3+4]+re[Nt*3+5],re[Nt*3+5]*6<gr&&(se*=.5,re[Nt*3+4]*6<gr&&(se*=.5)),_t.thm[St].s[Tt][Nt]=se}}for(_t.nsPsy.lastAttacks[St]=Wt[2],Zt=0,Ct=0;Ct<_t.npart_l;Ct++){for(var Re=_t.s3ind[Ct][0],vr=Dt[Re]*M[_e[Re]],Ee=_t.s3_ll[Zt++]*vr;++Re<=_t.s3ind[Ct][1];)vr=Dt[Re]*M[_e[Re]],Ee=T(Ee,_t.s3_ll[Zt++]*vr,Re,Re-Ct,_t);Ee*=.158489319246111,_t.blocktype_old[St&1]==bt.SHORT_TYPE?Pt[Ct]=Ee:Pt[Ct]=c(Math.min(Ee,Math.min(G*_t.nb_1[St][Ct],D*_t.nb_2[St][Ct])),Ee,Ut),_t.nb_2[St][Ct]=_t.nb_1[St][Ct],_t.nb_1[St][Ct]=Ee}for(;Ct<=bt.CBANDS;++Ct)Dt[Ct]=0,Pt[Ct]=0;z(_t,Dt,Pt,St)}if((I.mode==q.STEREO||I.mode==q.JOINT_STEREO)&&I.interChRatio>0&&K(I,I.interChRatio),I.mode==q.JOINT_STEREO){var wr;N(_t),wr=I.msfix,Math.abs(wr)>0&&Z(_t,wr,I.ATHlower*_t.ATH.adjust)}for(i(I,Ot,dt,ct),St=0;St<Ft;St++){var Ze,Ue=0,tr,er;St>1?(Ze=lt,Ue=-2,tr=bt.NORM_TYPE,(dt[0]==bt.SHORT_TYPE||dt[1]==bt.SHORT_TYPE)&&(tr=bt.SHORT_TYPE),er=F[Q][St-2]):(Ze=nt,Ue=0,tr=dt[St],er=tt[Q][St]),tr==bt.SHORT_TYPE?Ze[Ue+St]=E(er,_t.masking_lower):Ze[Ue+St]=ft(er,_t.masking_lower),I.analysis&&(_t.pinfo.pe[Q][St]=Ze[Ue+St])}return 0};function wt(I,O,Y,Q,tt,F,nt,lt){var at=I.internal_flags;if(Q<2)it.fft_long(at,nt[lt],Q,O,Y);else if(Q==2)for(var dt=bt.BLKSIZE-1;dt>=0;--dt){var _t=nt[lt+0][dt],ht=nt[lt+1][dt];nt[lt+0][dt]=(_t+ht)*ie.SQRT2*.5,nt[lt+1][dt]=(_t-ht)*ie.SQRT2*.5}F[0]=nt[lt+0][0],F[0]*=F[0];for(var dt=bt.BLKSIZE/2-1;dt>=0;--dt){var Rt=nt[lt+0][bt.BLKSIZE/2-dt],Dt=nt[lt+0][bt.BLKSIZE/2+dt];F[bt.BLKSIZE/2-dt]=(Rt*Rt+Dt*Dt)*.5}{for(var yt=0,dt=11;dt<bt.HBLKSIZE;dt++)yt+=F[dt];at.tot_ener[Q]=yt}if(I.analysis){for(var dt=0;dt<bt.HBLKSIZE;dt++)at.pinfo.energy[tt][Q][dt]=at.pinfo.energy_save[Q][dt],at.pinfo.energy_save[Q][dt]=F[dt];at.pinfo.pe[tt][Q]=at.pe[Q]}}function Et(I,O,Y,Q,tt,F,nt,lt){var at=I.internal_flags;if(tt==0&&Q<2&&it.fft_short(at,nt[lt],Q,O,Y),Q==2)for(var dt=bt.BLKSIZE_s-1;dt>=0;--dt){var _t=nt[lt+0][tt][dt],ht=nt[lt+1][tt][dt];nt[lt+0][tt][dt]=(_t+ht)*ie.SQRT2*.5,nt[lt+1][tt][dt]=(_t-ht)*ie.SQRT2*.5}F[tt][0]=nt[lt+0][tt][0],F[tt][0]*=F[tt][0];for(var dt=bt.BLKSIZE_s/2-1;dt>=0;--dt){var Rt=nt[lt+0][tt][bt.BLKSIZE_s/2-dt],Dt=nt[lt+0][tt][bt.BLKSIZE_s/2+dt];F[tt][bt.BLKSIZE_s/2-dt]=(Rt*Rt+Dt*Dt)*.5}}function Mt(I,O,Y,Q){var tt=I.internal_flags;I.athaa_loudapprox==2&&Y<2&&(tt.loudness_sq[O][Y]=tt.loudness_sq_save[Y],tt.loudness_sq_save[Y]=b(Q,tt))}var f=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function st(I,O,Y,Q,tt,F,nt,lt,at,dt){for(var _t=ce([2,576]),ht=I.internal_flags,Rt=ht.channels_out,Dt=I.mode==q.JOINT_STEREO?4:Rt,yt=0;yt<Rt;yt++){firbuf=O[yt];for(var Pt=Y+576-350-B+192,ct=0;ct<576;ct++){var Ot,Ft;Ot=firbuf[Pt+ct+10],Ft=0;for(var St=0;St<(B-1)/2-1;St+=2)Ot+=f[St]*(firbuf[Pt+ct+St]+firbuf[Pt+ct+B-St]),Ft+=f[St+1]*(firbuf[Pt+ct+St+1]+firbuf[Pt+ct+B-St-1]);_t[yt][ct]=Ot+Ft}tt[Q][yt].en.assign(ht.en[yt]),tt[Q][yt].thm.assign(ht.thm[yt]),Dt>2&&(F[Q][yt].en.assign(ht.en[yt+2]),F[Q][yt].thm.assign(ht.thm[yt+2]))}for(var yt=0;yt<Dt;yt++){var Ct=te(12),kt=te(12),Lt=[0,0,0,0],Zt=_t[yt&1],Tt=0,Nt=yt==3?ht.nsPsy.attackthre_s:ht.nsPsy.attackthre,Vt=1;if(yt==2)for(var ct=0,St=576;St>0;++ct,--St){var Ut=_t[0][ct],_e=_t[1][ct];_t[0][ct]=Ut+_e,_t[1][ct]=Ut-_e}for(var ct=0;ct<3;ct++)kt[ct]=ht.nsPsy.last_en_subshort[yt][ct+6],zt(ht.nsPsy.last_en_subshort[yt][ct+4]>0),Ct[ct]=kt[ct]/ht.nsPsy.last_en_subshort[yt][ct+4],Lt[0]+=kt[ct];for(var ct=0;ct<9;ct++){for(var Jt=Tt+64,qt=1;Tt<Jt;Tt++)qt<Math.abs(Zt[Tt])&&(qt=Math.abs(Zt[Tt]));ht.nsPsy.last_en_subshort[yt][ct]=kt[ct+3]=qt,Lt[1+ct/3]+=qt,qt>kt[ct+3-2]?(zt(kt[ct+3-2]>0),qt=qt/kt[ct+3-2]):kt[ct+3-2]>qt*10?qt=kt[ct+3-2]/(qt*10):qt=0,Ct[ct+3]=qt}for(var ct=0;ct<3;++ct){var ne=kt[ct*3+3]+kt[ct*3+4]+kt[ct*3+5],fe=1;kt[ct*3+5]*6<ne&&(fe*=.5,kt[ct*3+4]*6<ne&&(fe*=.5)),lt[yt][ct]=fe}if(I.analysis){for(var ue=Ct[0],ct=1;ct<12;ct++)ue<Ct[ct]&&(ue=Ct[ct]);ht.pinfo.ers[Q][yt]=ht.pinfo.ers_save[yt],ht.pinfo.ers_save[yt]=ue}for(var ct=0;ct<12;ct++)at[yt][ct/3]==0&&Ct[ct]>Nt&&(at[yt][ct/3]=ct%3+1);for(var ct=1;ct<4;ct++){var pe=Lt[ct-1],me=Lt[ct],re=Math.max(pe,me);re<4e4&&pe<1.7*me&&me<1.7*pe&&(ct==1&&at[yt][0]<=at[yt][ct]&&(at[yt][0]=0),at[yt][ct]=0)}at[yt][0]<=ht.nsPsy.lastAttacks[yt]&&(at[yt][0]=0),(ht.nsPsy.lastAttacks[yt]==3||at[yt][0]+at[yt][1]+at[yt][2]+at[yt][3]!=0)&&(Vt=0,at[yt][1]!=0&&at[yt][0]!=0&&(at[yt][1]=0),at[yt][2]!=0&&at[yt][1]!=0&&(at[yt][2]=0),at[yt][3]!=0&&at[yt][2]!=0&&(at[yt][3]=0)),yt<2?dt[yt]=Vt:Vt==0&&(dt[0]=dt[1]=0),nt[yt]=ht.tot_ener[yt]}}function rt(I,O,Y){if(Y==0)for(var Q=0;Q<I.npart_s;Q++)I.nb_s2[O][Q]=I.nb_s1[O][Q],I.nb_s1[O][Q]=0}function H(I,O){for(var Y=0;Y<I.npart_l;Y++)I.nb_2[O][Y]=I.nb_1[O][Y],I.nb_1[O][Y]=0}function j(I,O,Y,Q){var tt=M.length-1,F=0,nt=Y[F]+Y[F+1];if(nt>0){var lt=O[F];lt<O[F+1]&&(lt=O[F+1]),zt(I.numlines_s[F]+I.numlines_s[F+1]-1>0),nt=20*(lt*2-nt)/(nt*(I.numlines_s[F]+I.numlines_s[F+1]-1));var at=0|nt;at>tt&&(at=tt),Q[F]=at}else Q[F]=0;for(F=1;F<I.npart_s-1;F++)if(nt=Y[F-1]+Y[F]+Y[F+1],zt(F+1<I.npart_s),nt>0){var lt=O[F-1];lt<O[F]&&(lt=O[F]),lt<O[F+1]&&(lt=O[F+1]),zt(I.numlines_s[F-1]+I.numlines_s[F]+I.numlines_s[F+1]-1>0),nt=20*(lt*3-nt)/(nt*(I.numlines_s[F-1]+I.numlines_s[F]+I.numlines_s[F+1]-1));var at=0|nt;at>tt&&(at=tt),Q[F]=at}else Q[F]=0;if(zt(F==I.npart_s-1),nt=Y[F-1]+Y[F],nt>0){var lt=O[F-1];lt<O[F]&&(lt=O[F]),zt(I.numlines_s[F-1]+I.numlines_s[F]-1>0),nt=20*(lt*2-nt)/(nt*(I.numlines_s[F-1]+I.numlines_s[F]-1));var at=0|nt;at>tt&&(at=tt),Q[F]=at}else Q[F]=0;zt(F==I.npart_s-1)}function s(I,O,Y,Q,tt,F){var nt=I.internal_flags,lt=new float[bt.CBANDS],at=te(bt.CBANDS),dt,_t,ht,Rt=new int[bt.CBANDS];for(ht=_t=0;ht<nt.npart_s;++ht){var Dt=0,yt=0,Pt=nt.numlines_s[ht];for(dt=0;dt<Pt;++dt,++_t){var ct=O[F][_t];Dt+=ct,yt<ct&&(yt=ct)}Y[ht]=Dt,lt[ht]=yt,at[ht]=Dt/Pt,zt(at[ht]>=0)}for(zt(ht==nt.npart_s);ht<bt.CBANDS;++ht)lt[ht]=0,at[ht]=0;for(j(nt,lt,at,Rt),_t=ht=0;ht<nt.npart_s;ht++){var Ot=nt.s3ind_s[ht][0],Ft=nt.s3ind_s[ht][1],St,Ct,kt,Lt,Zt;for(St=Rt[Ot],Ct=1,Lt=nt.s3_ss[_t]*Y[Ot]*M[Rt[Ot]],++_t,++Ot;Ot<=Ft;)St+=Rt[Ot],Ct+=1,kt=nt.s3_ss[_t]*Y[Ot]*M[Rt[Ot]],Lt=R(Lt,kt,Ot-ht),++_t,++Ot;St=(1+2*St)/(2*Ct),Zt=M[St]*.5,Lt*=Zt,Q[ht]=Lt,nt.nb_s2[tt][ht]=nt.nb_s1[tt][ht],nt.nb_s1[tt][ht]=Lt,kt=lt[ht],kt*=nt.minval_s[ht],kt*=Zt,Q[ht]>kt&&(Q[ht]=kt),nt.masking_lower>1&&(Q[ht]*=nt.masking_lower),Q[ht]>Y[ht]&&(Q[ht]=Y[ht]),nt.masking_lower<1&&(Q[ht]*=nt.masking_lower),zt(Q[ht]>=0)}for(;ht<bt.CBANDS;++ht)Y[ht]=0,Q[ht]=0}function m(I,O,Y,Q,tt){var F=te(bt.CBANDS),nt=te(bt.CBANDS),lt=Me(bt.CBANDS+2),at;X(I,O,Y,F,nt),$(I,F,nt,lt);var dt=0;for(at=0;at<I.npart_l;at++){var _t,ht,Rt,Dt,yt=I.s3ind[at][0],Pt=I.s3ind[at][1],ct=0,Ot=0;for(ct=lt[yt],Ot+=1,ht=I.s3_ll[dt]*Y[yt]*M[lt[yt]],++dt,++yt;yt<=Pt;)ct+=lt[yt],Ot+=1,_t=I.s3_ll[dt]*Y[yt]*M[lt[yt]],Dt=R(ht,_t,yt-at),ht=Dt,++dt,++yt;if(ct=(1+2*ct)/(2*Ot),Rt=M[ct]*.5,ht*=Rt,I.blocktype_old[tt&1]==bt.SHORT_TYPE){var Ft=G*I.nb_1[tt][at];Ft>0?Q[at]=Math.min(ht,Ft):Q[at]=Math.min(ht,Y[at]*C)}else{var St=D*I.nb_2[tt][at],Ct=G*I.nb_1[tt][at],Ft;St<=0&&(St=ht),Ct<=0&&(Ct=ht),I.blocktype_old[tt&1]==bt.NORM_TYPE?Ft=Math.min(Ct,St):Ft=Ct,Q[at]=Math.min(ht,Ft)}I.nb_2[tt][at]=I.nb_1[tt][at],I.nb_1[tt][at]=ht,_t=F[at],_t*=I.minval_l[at],_t*=Rt,Q[at]>_t&&(Q[at]=_t),I.masking_lower>1&&(Q[at]*=I.masking_lower),Q[at]>Y[at]&&(Q[at]=Y[at]),I.masking_lower<1&&(Q[at]*=I.masking_lower),zt(Q[at]>=0)}for(;at<bt.CBANDS;++at)Y[at]=0,Q[at]=0}function ot(I,O){var Y=I.internal_flags;I.short_blocks==Le.short_block_coupled&&!(O[0]!=0&&O[1]!=0)&&(O[0]=O[1]=0);for(var Q=0;Q<Y.channels_out;Q++)I.short_blocks==Le.short_block_dispensed&&(O[Q]=1),I.short_blocks==Le.short_block_forced&&(O[Q]=0)}function J(I,O,Y){for(var Q=I.internal_flags,tt=0;tt<Q.channels_out;tt++){var F=bt.NORM_TYPE;O[tt]!=0?(zt(Q.blocktype_old[tt]!=bt.START_TYPE),Q.blocktype_old[tt]==bt.SHORT_TYPE&&(F=bt.STOP_TYPE)):(F=bt.SHORT_TYPE,Q.blocktype_old[tt]==bt.NORM_TYPE&&(Q.blocktype_old[tt]=bt.START_TYPE),Q.blocktype_old[tt]==bt.STOP_TYPE&&(Q.blocktype_old[tt]=bt.SHORT_TYPE)),Y[tt]=Q.blocktype_old[tt],Q.blocktype_old[tt]=F}}function mt(I,O,Y,Q,tt,F,nt){for(var lt=F*2,at=F>0?Math.pow(10,tt):1,dt,_t,ht=0;ht<nt;++ht){var Rt=I[2][ht],Dt=I[3][ht],yt=O[0][ht],Pt=O[1][ht],ct=O[2][ht],Ot=O[3][ht];if(yt<=1.58*Pt&&Pt<=1.58*yt){var Ft=Y[ht]*Dt,St=Y[ht]*Rt;_t=Math.max(ct,Math.min(Ot,Ft)),dt=Math.max(Ot,Math.min(ct,St))}else _t=ct,dt=Ot;if(F>0){var Ct,kt,Lt=Q[ht]*at;if(Ct=Math.min(Math.max(yt,Lt),Math.max(Pt,Lt)),ct=Math.max(_t,Lt),Ot=Math.max(dt,Lt),kt=ct+Ot,kt>0&&Ct*lt<kt){var Zt=Ct*lt/kt;ct*=Zt,Ot*=Zt}_t=Math.min(ct,_t),dt=Math.min(Ot,dt)}_t>Rt&&(_t=Rt),dt>Dt&&(dt=Dt),O[2][ht]=_t,O[3][ht]=dt}}this.L3psycho_anal_vbr=function(I,O,Y,Q,tt,F,nt,lt,at,dt){var _t=I.internal_flags,ht,Rt,Dt=te(bt.HBLKSIZE),yt=ce([3,bt.HBLKSIZE_s]),Pt=ce([2,bt.BLKSIZE]),ct=ce([2,3,bt.BLKSIZE_s]),Ot=ce([4,bt.CBANDS]),Ft=ce([4,bt.CBANDS]),St=ce([4,3]),Ct=.6,kt=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],Lt=Me(2),Zt=I.mode==q.JOINT_STEREO?4:_t.channels_out;st(I,O,Y,Q,tt,F,at,St,kt,Lt),ot(I,Lt);{for(var Tt=0;Tt<Zt;Tt++){var Nt=Tt&1;ht=Pt,wt(I,O,Y,Tt,Q,Dt,ht,Nt),Mt(I,Q,Tt,Dt),Lt[Nt]!=0?m(_t,Dt,Ot[Tt],Ft[Tt],Tt):H(_t,Tt)}Lt[0]+Lt[1]==2&&I.mode==q.JOINT_STEREO&&mt(Ot,Ft,_t.mld_cb_l,_t.ATH.cb_l,I.ATHlower*_t.ATH.adjust,I.msfix,_t.npart_l);for(var Tt=0;Tt<Zt;Tt++){var Nt=Tt&1;Lt[Nt]!=0&&z(_t,Ot[Tt],Ft[Tt],Tt)}}{for(var Vt=0;Vt<3;Vt++){for(var Tt=0;Tt<Zt;++Tt){var Nt=Tt&1;Lt[Nt]!=0?rt(_t,Tt,Vt):(Rt=ct,Et(I,O,Y,Tt,Vt,yt,Rt,Nt),s(I,yt,Ot[Tt],Ft[Tt],Tt,Vt))}Lt[0]+Lt[1]==0&&I.mode==q.JOINT_STEREO&&mt(Ot,Ft,_t.mld_cb_s,_t.ATH.cb_s,I.ATHlower*_t.ATH.adjust,I.msfix,_t.npart_s);for(var Tt=0;Tt<Zt;++Tt){var Nt=Tt&1;Lt[Nt]==0&&W(_t,Ot[Tt],Ft[Tt],Tt,Vt)}}for(var Tt=0;Tt<Zt;Tt++){var Nt=Tt&1;if(Lt[Nt]==0)for(var Ut=0;Ut<bt.SBMAX_s;Ut++){for(var _e=te(3),Vt=0;Vt<3;Vt++){var Jt=_t.thm[Tt].s[Ut][Vt];if(Jt*=d,kt[Tt][Vt]>=2||kt[Tt][Vt+1]==1){var qt=Vt!=0?Vt-1:2,ne=c(_t.thm[Tt].s[Ut][qt],Jt,u*Ct);Jt=Math.min(Jt,ne)}else if(kt[Tt][Vt]==1){var qt=Vt!=0?Vt-1:2,ne=c(_t.thm[Tt].s[Ut][qt],Jt,C*Ct);Jt=Math.min(Jt,ne)}else if(Vt!=0&&kt[Tt][Vt-1]==3||Vt==0&&_t.nsPsy.lastAttacks[Tt]==3){var qt=Vt!=2?Vt+1:0,ne=c(_t.thm[Tt].s[Ut][qt],Jt,C*Ct);Jt=Math.min(Jt,ne)}Jt*=St[Tt][Vt],_e[Vt]=Jt}for(var Vt=0;Vt<3;Vt++)_t.thm[Tt].s[Ut][Vt]=_e[Vt]}}}for(var Tt=0;Tt<Zt;Tt++)_t.nsPsy.lastAttacks[Tt]=kt[Tt][2];J(I,Lt,dt);for(var Tt=0;Tt<Zt;Tt++){var fe,ue,pe,me;Tt>1?(fe=lt,ue=-2,pe=bt.NORM_TYPE,(dt[0]==bt.SHORT_TYPE||dt[1]==bt.SHORT_TYPE)&&(pe=bt.SHORT_TYPE),me=F[Q][Tt-2]):(fe=nt,ue=0,pe=dt[Tt],me=tt[Q][Tt]),pe==bt.SHORT_TYPE?fe[ue+Tt]=E(me,_t.masking_lower):fe[ue+Tt]=ft(me,_t.masking_lower),I.analysis&&(_t.pinfo.pe[Q][Tt]=fe[ue+Tt])}return 0};function gt(I,O){var Y=I,Q;return Y>=0?Q=-Y*27:Q=Y*O,Q<=-72?0:Math.exp(Q*w)}function ut(I){var O=0,Y=0;{var Q=0,tt,F;for(Q=0;gt(Q,I)>1e-20;Q-=1);for(tt=Q,F=0;Math.abs(F-tt)>1e-12;)Q=(F+tt)/2,gt(Q,I)>0?F=Q:tt=Q;O=tt}{var Q=0,tt,F;for(Q=0;gt(Q,I)>1e-20;Q+=1);for(tt=0,F=Q;Math.abs(F-tt)>1e-12;)Q=(F+tt)/2,gt(Q,I)>0?tt=Q:F=Q;Y=F}{var nt=0,lt=1e3,at;for(at=0;at<=lt;++at){var Q=O+at*(Y-O)/lt,dt=gt(Q,I);nt+=dt}{var _t=(lt+1)/(nt*(Y-O));return _t}}}function vt(I){var O,Y,Q,tt;return O=I,O>=0?O*=3:O*=1.5,O>=.5&&O<=2.5?(tt=O-.5,Y=8*(tt*tt-2*tt)):Y=0,O+=.474,Q=15.811389+7.5*O-17.5*Math.sqrt(1+O*O),Q<=-60?0:(O=Math.exp((Y+Q)*w),O/=.6609193,O)}function It(I){return I<0&&(I=0),I=I*.001,13*Math.atan(.76*I)+3.5*Math.atan(I*I/(7.5*7.5))}function Bt(I,O,Y,Q,tt,F,nt,lt,at,dt,_t,ht){var Rt=te(bt.CBANDS+1),Dt=lt/(ht>15?2*576:384),yt=Me(bt.HBLKSIZE),Pt;lt/=at;var ct=0,Ot=0;for(Pt=0;Pt<bt.CBANDS;Pt++){var Ft,St;for(Ft=It(lt*ct),Rt[Pt]=lt*ct,St=ct;It(lt*St)-Ft<p&&St<=at/2;St++);for(I[Pt]=St-ct,Ot=Pt+1;ct<St;)zt(ct<bt.HBLKSIZE),yt[ct++]=Pt;if(ct>at/2){ct=at/2,++Pt;break}}zt(Pt<bt.CBANDS),Rt[Pt]=lt*ct;for(var Ct=0;Ct<ht;Ct++){var kt,Lt,Zt,Tt,Nt;Zt=dt[Ct],Tt=dt[Ct+1],kt=0|Math.floor(.5+_t*(Zt-.5)),kt<0&&(kt=0),Lt=0|Math.floor(.5+_t*(Tt-.5)),Lt>at/2&&(Lt=at/2),Y[Ct]=(yt[kt]+yt[Lt])/2,O[Ct]=yt[Lt];var Vt=Dt*Tt;nt[Ct]=(Vt-Rt[O[Ct]])/(Rt[O[Ct]+1]-Rt[O[Ct]]),nt[Ct]<0?nt[Ct]=0:nt[Ct]>1&&(nt[Ct]=1),Nt=It(lt*dt[Ct]*_t),Nt=Math.min(Nt,15.5)/15.5,F[Ct]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Nt))-2.5)}ct=0;for(var Ut=0;Ut<Ot;Ut++){var _e=I[Ut],Ft,Jt;Ft=It(lt*ct),Jt=It(lt*(ct+_e-1)),Q[Ut]=.5*(Ft+Jt),Ft=It(lt*(ct-.5)),Jt=It(lt*(ct+_e-.5)),tt[Ut]=Jt-Ft,ct+=_e}return Ot}function xt(I,O,Y,Q,tt,F){var nt=ce([bt.CBANDS,bt.CBANDS]),lt,at=0;if(F)for(var dt=0;dt<O;dt++)for(lt=0;lt<O;lt++){var _t=vt(Y[dt]-Y[lt])*Q[lt];nt[dt][lt]=_t*tt[dt]}else for(lt=0;lt<O;lt++)for(var ht=15+Math.min(21/Y[lt],12),Rt=ut(ht),dt=0;dt<O;dt++){var _t=Rt*gt(Y[dt]-Y[lt],ht)*Q[lt];nt[dt][lt]=_t*tt[dt]}for(var dt=0;dt<O;dt++){for(lt=0;lt<O&&!(nt[dt][lt]>0);lt++);for(I[dt][0]=lt,lt=O-1;lt>0&&!(nt[dt][lt]>0);lt--);I[dt][1]=lt,at+=I[dt][1]-I[dt][0]+1}for(var Dt=te(at),yt=0,dt=0;dt<O;dt++)for(lt=I[dt][0];lt<=I[dt][1];lt++)Dt[yt++]=nt[dt][lt];return Dt}function jt(I){var O=It(I);return O=Math.min(O,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*O))-2.5)}this.psymodel_init=function(I){var O=I.internal_flags,Y,Q=!0,tt=13,F=24,nt=0,lt=0,at=-8.25,dt=-4.5,_t=te(bt.CBANDS),ht=te(bt.CBANDS),Rt=te(bt.CBANDS),Dt=I.out_samplerate;switch(I.experimentalZ){default:case 0:Q=!0;break;case 1:Q=!(I.VBR==De.vbr_mtrh||I.VBR==De.vbr_mt);break;case 2:Q=!1;break;case 3:tt=8,nt=-1.75,lt=-.0125,at=-8.25,dt=-2.25;break}for(O.ms_ener_ratio_old=.25,O.blocktype_old[0]=O.blocktype_old[1]=bt.NORM_TYPE,Y=0;Y<4;++Y){for(var ct=0;ct<bt.CBANDS;++ct)O.nb_1[Y][ct]=1e20,O.nb_2[Y][ct]=1e20,O.nb_s1[Y][ct]=O.nb_s2[Y][ct]=1;for(var yt=0;yt<bt.SBMAX_l;yt++)O.en[Y].l[yt]=1e20,O.thm[Y].l[yt]=1e20;for(var ct=0;ct<3;++ct){for(var yt=0;yt<bt.SBMAX_s;yt++)O.en[Y].s[yt][ct]=1e20,O.thm[Y].s[yt][ct]=1e20;O.nsPsy.lastAttacks[Y]=0}for(var ct=0;ct<9;ct++)O.nsPsy.last_en_subshort[Y][ct]=10}for(O.loudness_sq_save[0]=O.loudness_sq_save[1]=0,O.npart_l=Bt(O.numlines_l,O.bo_l,O.bm_l,_t,ht,O.mld_l,O.PSY.bo_l_weight,Dt,bt.BLKSIZE,O.scalefac_band.l,bt.BLKSIZE/(2*576),bt.SBMAX_l),zt(O.npart_l<bt.CBANDS),Y=0;Y<O.npart_l;Y++){var Pt=nt;_t[Y]>=tt&&(Pt=lt*(_t[Y]-tt)/(F-tt)+nt*(F-_t[Y])/(F-tt)),Rt[Y]=Math.pow(10,Pt/10),O.numlines_l[Y]>0?O.rnumlines_l[Y]=1/O.numlines_l[Y]:O.rnumlines_l[Y]=0}O.s3_ll=xt(O.s3ind,O.npart_l,_t,ht,Rt,Q);var ct=0;for(Y=0;Y<O.npart_l;Y++){var Ot;Ot=aa.MAX_VALUE;for(var Ft=0;Ft<O.numlines_l[Y];Ft++,ct++){var St=Dt*ct/(1e3*bt.BLKSIZE),Ct;Ct=this.ATHformula(St*1e3,I)-20,Ct=Math.pow(10,.1*Ct),Ct*=O.numlines_l[Y],Ot>Ct&&(Ot=Ct)}O.ATH.cb_l[Y]=Ot,Ot=-20+_t[Y]*20/10,Ot>6&&(Ot=100),Ot<-15&&(Ot=-15),Ot-=8,O.minval_l[Y]=Math.pow(10,Ot/10)*O.numlines_l[Y]}for(O.npart_s=Bt(O.numlines_s,O.bo_s,O.bm_s,_t,ht,O.mld_s,O.PSY.bo_s_weight,Dt,bt.BLKSIZE_s,O.scalefac_band.s,bt.BLKSIZE_s/384,bt.SBMAX_s),zt(O.npart_s<bt.CBANDS),ct=0,Y=0;Y<O.npart_s;Y++){var Ot,Pt=at;_t[Y]>=tt&&(Pt=dt*(_t[Y]-tt)/(F-tt)+at*(F-_t[Y])/(F-tt)),Rt[Y]=Math.pow(10,Pt/10),Ot=aa.MAX_VALUE;for(var Ft=0;Ft<O.numlines_s[Y];Ft++,ct++){var St=Dt*ct/(1e3*bt.BLKSIZE_s),Ct;Ct=this.ATHformula(St*1e3,I)-20,Ct=Math.pow(10,.1*Ct),Ct*=O.numlines_s[Y],Ot>Ct&&(Ot=Ct)}O.ATH.cb_s[Y]=Ot,Ot=-7+_t[Y]*7/12,_t[Y]>12&&(Ot*=1+Math.log(1+Ot)*3.1),_t[Y]<12&&(Ot*=1+Math.log(1-Ot)*2.3),Ot<-15&&(Ot=-15),Ot-=8,O.minval_s[Y]=Math.pow(10,Ot/10)*O.numlines_s[Y]}O.s3_ss=xt(O.s3ind_s,O.npart_s,_t,ht,Rt,Q),P(),it.init_fft(O),O.decay=Math.exp(-1*x/(L*Dt/192));{var kt;kt=g,I.exp_nspsytune&2&&(kt=1),Math.abs(I.msfix)>0&&(kt=I.msfix),I.msfix=kt;for(var Lt=0;Lt<O.npart_l;Lt++)O.s3ind[Lt][1]>O.npart_l-1&&(O.s3ind[Lt][1]=O.npart_l-1)}var Zt=576*O.mode_gr/Dt;if(O.ATH.decay=Math.pow(10,-12/10*Zt),O.ATH.adjust=.01,O.ATH.adjustLimit=1,zt(O.bo_l[bt.SBMAX_l-1]<=O.npart_l),zt(O.bo_s[bt.SBMAX_s-1]<=O.npart_s),I.ATHtype!=-1){var St,Tt=I.out_samplerate/bt.BLKSIZE,Nt=0;for(St=0,Y=0;Y<bt.BLKSIZE/2;++Y)St+=Tt,O.ATH.eql_w[Y]=1/Math.pow(10,this.ATHformula(St,I)/10),Nt+=O.ATH.eql_w[Y];for(Nt=1/Nt,Y=bt.BLKSIZE/2;--Y>=0;)O.ATH.eql_w[Y]*=Nt}{for(var Lt=ct=0;Lt<O.npart_s;++Lt)for(Y=0;Y<O.numlines_s[Lt];++Y)++ct;for(var Lt=ct=0;Lt<O.npart_l;++Lt)for(Y=0;Y<O.numlines_l[Lt];++Y)++ct}for(ct=0,Y=0;Y<O.npart_l;Y++){var St=Dt*(ct+O.numlines_l[Y]/2)/(1*bt.BLKSIZE);O.mld_cb_l[Y]=jt(St),ct+=O.numlines_l[Y]}for(;Y<bt.CBANDS;++Y)O.mld_cb_l[Y]=1;for(ct=0,Y=0;Y<O.npart_s;Y++){var St=Dt*(ct+O.numlines_s[Y]/2)/(1*bt.BLKSIZE_s);O.mld_cb_s[Y]=jt(St),ct+=O.numlines_s[Y]}for(;Y<bt.CBANDS;++Y)O.mld_cb_s[Y]=1;return 0};function Xt(I,O){I<-.3&&(I=3410),I/=1e3,I=Math.max(.1,I);var Y=3.64*Math.pow(I,-.8)-6.8*Math.exp(-.6*Math.pow(I-3.4,2))+6*Math.exp(-.15*Math.pow(I-8.7,2))+(.6+.04*O)*.001*Math.pow(I,4);return Y}this.ATHformula=function(I,O){var Y;switch(O.ATHtype){case 0:Y=Xt(I,9);break;case 1:Y=Xt(I,-1);break;case 2:Y=Xt(I,0);break;case 3:Y=Xt(I,1)+6;break;case 4:Y=Xt(I,O.ATHcurve);break;default:Y=Xt(I,0);break}return Y}}var hn=un,cn=$e;function dn(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=cn.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var pn=dn,mn=ae(),Na={};Na.SFBMAX=mn.SBMAX_s*3;var fr=Na,za=Gt,bn=za.new_float,Te=za.new_int,xr=fr;function gn(){this.xr=bn(576),this.l3_enc=Te(576),this.scalefac=Te(xr.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=Te(3),this.subblock_gain=Te(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=Te(xr.SFBMAX),this.window=Te(xr.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=Te(4),this.max_nonzero_coeff=0;var q=this;function it(G){return new Int32Array(G)}function x(G){return new Float32Array(G)}this.assign=function(G){q.xr=x(G.xr),q.l3_enc=it(G.l3_enc),q.scalefac=it(G.scalefac),q.xrpow_max=G.xrpow_max,q.part2_3_length=G.part2_3_length,q.big_values=G.big_values,q.count1=G.count1,q.global_gain=G.global_gain,q.scalefac_compress=G.scalefac_compress,q.block_type=G.block_type,q.mixed_block_flag=G.mixed_block_flag,q.table_select=it(G.table_select),q.subblock_gain=it(G.subblock_gain),q.region0_count=G.region0_count,q.region1_count=G.region1_count,q.preflag=G.preflag,q.scalefac_scale=G.scalefac_scale,q.count1table_select=G.count1table_select,q.part2_length=G.part2_length,q.sfb_lmax=G.sfb_lmax,q.sfb_smin=G.sfb_smin,q.psy_lmax=G.psy_lmax,q.sfbmax=G.sfbmax,q.psymax=G.psymax,q.sfbdivide=G.sfbdivide,q.width=it(G.width),q.window=it(G.window),q.count1bits=G.count1bits,q.sfb_partition_table=G.sfb_partition_table.slice(0),q.slen=it(G.slen),q.max_nonzero_coeff=G.max_nonzero_coeff}}var Fr=gn,vn=Gt,na=vn.new_int,wn=Fr;function yn(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[na(4),na(4)];for(var q=0;q<2;q++)for(var it=0;it<2;it++)this.tt[q][it]=new wn}var Sn=yn,Fa=Gt,rr=Fa.System,ar=Fa.new_int,nr=ae();function kn(q,it,x,G){this.l=ar(1+nr.SBMAX_l),this.s=ar(1+nr.SBMAX_s),this.psfb21=ar(1+nr.PSFB21),this.psfb12=ar(1+nr.PSFB12);var D=this.l,y=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],rr.arraycopy(this.arrL,0,D,0,Math.min(this.arrL.length,this.l.length)),rr.arraycopy(this.arrS,0,y,0,Math.min(this.arrS.length,this.s.length)),rr.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),rr.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var Va=kn,Vr=Gt,Br=Vr.new_float,An=Vr.new_float_n,xn=Vr.new_int,sa=ae();function Bn(){this.last_en_subshort=An([4,9]),this.lastAttacks=xn(4),this.pefirbuf=Br(19),this.longfact=Br(sa.SBMAX_l),this.shortfact=Br(sa.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var Rn=Bn;function En(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var Mn=En,Ve=Gt,Tn=Ve.new_byte,In=Ve.new_double,de=Ve.new_float,Ie=Ve.new_float_n,be=Ve.new_int,sr=Ve.new_int_n,On=Sn,Cn=Va,Pn=Rn,Dn=Mn,ia=Da(),Qt=ae(),Ln=fr;ke.MFSIZE=3*1152+Qt.ENCDELAY-Qt.MDCTDELAY;ke.MAX_HEADER_BUF=256;ke.MAX_BITS_PER_CHANNEL=4095;ke.MAX_BITS_PER_GRANULE=7680;ke.BPC=320;function ke(){var q=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Ie([2,ke.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new On,this.ms_ratio=de(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=be(2),this.CurrentStep=be(2),this.masking_lower=0,this.bv_scf=be(576),this.pseudohalf=be(Ln.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*ke.BPC+1),this.itime=In(2),this.sideinfo_len=0,this.sb_sample=Ie([2,2,18,Qt.SBLIMIT]),this.amp_filter=de(32);function it(){this.write_timing=0,this.ptr=0,this.buf=Tn(q)}this.header=new Array(ke.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new Cn,this.minval_l=de(Qt.CBANDS),this.minval_s=de(Qt.CBANDS),this.nb_1=Ie([4,Qt.CBANDS]),this.nb_2=Ie([4,Qt.CBANDS]),this.nb_s1=Ie([4,Qt.CBANDS]),this.nb_s2=Ie([4,Qt.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=de(4),this.loudness_sq=Ie([2,2]),this.loudness_sq_save=de(2),this.mld_l=de(Qt.SBMAX_l),this.mld_s=de(Qt.SBMAX_s),this.bm_l=be(Qt.SBMAX_l),this.bo_l=be(Qt.SBMAX_l),this.bm_s=be(Qt.SBMAX_s),this.bo_s=be(Qt.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=sr([Qt.CBANDS,2]),this.s3ind_s=sr([Qt.CBANDS,2]),this.numlines_s=be(Qt.CBANDS),this.numlines_l=be(Qt.CBANDS),this.rnumlines_l=de(Qt.CBANDS),this.mld_cb_l=de(Qt.CBANDS),this.mld_cb_s=de(Qt.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=de(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=be(2),this.nsPsy=new Pn,this.VBR_seek_table=new Dn,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=sr([16,5]),this.bitrate_blockType_Hist=sr([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var x=0;x<this.en.length;x++)this.en[x]=new ia;for(var x=0;x<this.thm.length;x++)this.thm[x]=new ia;for(var x=0;x<this.header.length;x++)this.header[x]=new it}var ur=ke,Nn=Gt,Oe=Nn.new_float,Ce=ae();function zn(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=Oe(Ce.SBMAX_l),this.s=Oe(Ce.SBMAX_s),this.psfb21=Oe(Ce.PSFB21),this.psfb12=Oe(Ce.PSFB12),this.cb_l=Oe(Ce.CBANDS),this.cb_s=Oe(Ce.CBANDS),this.eql_w=Oe(Ce.BLKSIZE/2)}var Fn=zn,ja=Gt,oe=ja.System,oa=ja.Arrays;Kt.STEPS_per_dB=100;Kt.MAX_dB=120;Kt.GAIN_NOT_ENOUGH_SAMPLES=-24601;Kt.GAIN_ANALYSIS_ERROR=0;Kt.GAIN_ANALYSIS_OK=1;Kt.INIT_GAIN_ANALYSIS_ERROR=0;Kt.INIT_GAIN_ANALYSIS_OK=1;Kt.YULE_ORDER=10;Kt.MAX_ORDER=Kt.YULE_ORDER;Kt.MAX_SAMP_FREQ=48e3;Kt.RMS_WINDOW_TIME_NUMERATOR=1;Kt.RMS_WINDOW_TIME_DENOMINATOR=20;Kt.MAX_SAMPLES_PER_WINDOW=Kt.MAX_SAMP_FREQ*Kt.RMS_WINDOW_TIME_NUMERATOR/Kt.RMS_WINDOW_TIME_DENOMINATOR+1;function Kt(){var q=64.82,it=.95,x=Kt.RMS_WINDOW_TIME_NUMERATOR,G=Kt.RMS_WINDOW_TIME_DENOMINATOR,D=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],y=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function S(u,C,g,B,w,b){for(;w--!=0;)g[B]=1e-10+u[C+0]*b[0]-g[B-1]*b[1]+u[C-1]*b[2]-g[B-2]*b[3]+u[C-2]*b[4]-g[B-3]*b[5]+u[C-3]*b[6]-g[B-4]*b[7]+u[C-4]*b[8]-g[B-5]*b[9]+u[C-5]*b[10]-g[B-6]*b[11]+u[C-6]*b[12]-g[B-7]*b[13]+u[C-7]*b[14]-g[B-8]*b[15]+u[C-8]*b[16]-g[B-9]*b[17]+u[C-9]*b[18]-g[B-10]*b[19]+u[C-10]*b[20],++B,++C}function p(u,C,g,B,w,b){for(;w--!=0;)g[B]=u[C+0]*b[0]-g[B-1]*b[1]+u[C-1]*b[2]-g[B-2]*b[3]+u[C-2]*b[4],++B,++C}function k(u,C){for(var g=0;g<MAX_ORDER;g++)u.linprebuf[g]=u.lstepbuf[g]=u.loutbuf[g]=u.rinprebuf[g]=u.rstepbuf[g]=u.routbuf[g]=0;switch(0|C){case 48e3:u.reqindex=0;break;case 44100:u.reqindex=1;break;case 32e3:u.reqindex=2;break;case 24e3:u.reqindex=3;break;case 22050:u.reqindex=4;break;case 16e3:u.reqindex=5;break;case 12e3:u.reqindex=6;break;case 11025:u.reqindex=7;break;case 8e3:u.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return u.sampleWindow=0|(C*x+G-1)/G,u.lsum=0,u.rsum=0,u.totsamp=0,oa.ill(u.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(u,C){return k(u,C)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(u.linpre=MAX_ORDER,u.rinpre=MAX_ORDER,u.lstep=MAX_ORDER,u.rstep=MAX_ORDER,u.lout=MAX_ORDER,u.rout=MAX_ORDER,oa.fill(u.B,0),INIT_GAIN_ANALYSIS_OK)};function L(u){return u*u}this.AnalyzeSamples=function(u,C,g,B,w,b,r){var e,t,a,l,o,A,M;if(b==0)return GAIN_ANALYSIS_OK;switch(M=0,o=b,r){case 1:B=C,w=g;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(b<MAX_ORDER?(oe.arraycopy(C,g,u.linprebuf,MAX_ORDER,b),oe.arraycopy(B,w,u.rinprebuf,MAX_ORDER,b)):(oe.arraycopy(C,g,u.linprebuf,MAX_ORDER,MAX_ORDER),oe.arraycopy(B,w,u.rinprebuf,MAX_ORDER,MAX_ORDER));o>0;){A=o>u.sampleWindow-u.totsamp?u.sampleWindow-u.totsamp:o,M<MAX_ORDER?(e=u.linpre+M,t=u.linprebuf,a=u.rinpre+M,l=u.rinprebuf,A>MAX_ORDER-M&&(A=MAX_ORDER-M)):(e=g+M,t=C,a=w+M,l=B),S(t,e,u.lstepbuf,u.lstep+u.totsamp,A,D[u.reqindex]),S(l,a,u.rstepbuf,u.rstep+u.totsamp,A,D[u.reqindex]),p(u.lstepbuf,u.lstep+u.totsamp,u.loutbuf,u.lout+u.totsamp,A,y[u.reqindex]),p(u.rstepbuf,u.rstep+u.totsamp,u.routbuf,u.rout+u.totsamp,A,y[u.reqindex]),e=u.lout+u.totsamp,t=u.loutbuf,a=u.rout+u.totsamp,l=u.routbuf;for(var P=A%8;P--!=0;)u.lsum+=L(t[e++]),u.rsum+=L(l[a++]);for(P=A/8;P--!=0;)u.lsum+=L(t[e+0])+L(t[e+1])+L(t[e+2])+L(t[e+3])+L(t[e+4])+L(t[e+5])+L(t[e+6])+L(t[e+7]),e+=8,u.rsum+=L(l[a+0])+L(l[a+1])+L(l[a+2])+L(l[a+3])+L(l[a+4])+L(l[a+5])+L(l[a+6])+L(l[a+7]),a+=8;if(o-=A,M+=A,u.totsamp+=A,u.totsamp==u.sampleWindow){var V=Kt.STEPS_per_dB*10*Math.log10((u.lsum+u.rsum)/u.totsamp*.5+1e-37),U=V<=0?0:0|V;U>=u.A.length&&(U=u.A.length-1),u.A[U]++,u.lsum=u.rsum=0,oe.arraycopy(u.loutbuf,u.totsamp,u.loutbuf,0,MAX_ORDER),oe.arraycopy(u.routbuf,u.totsamp,u.routbuf,0,MAX_ORDER),oe.arraycopy(u.lstepbuf,u.totsamp,u.lstepbuf,0,MAX_ORDER),oe.arraycopy(u.rstepbuf,u.totsamp,u.rstepbuf,0,MAX_ORDER),u.totsamp=0}if(u.totsamp>u.sampleWindow)return GAIN_ANALYSIS_ERROR}return b<MAX_ORDER?(oe.arraycopy(u.linprebuf,b,u.linprebuf,0,MAX_ORDER-b),oe.arraycopy(u.rinprebuf,b,u.rinprebuf,0,MAX_ORDER-b),oe.arraycopy(C,g,u.linprebuf,MAX_ORDER-b,b),oe.arraycopy(B,w,u.rinprebuf,MAX_ORDER-b,b)):(oe.arraycopy(C,g+b-MAX_ORDER,u.linprebuf,0,MAX_ORDER),oe.arraycopy(B,w+b-MAX_ORDER,u.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function d(u,C){var g,B=0;for(g=0;g<C;g++)B+=u[g];if(B==0)return GAIN_NOT_ENOUGH_SAMPLES;var w=0|Math.ceil(B*(1-it));for(g=C;g-- >0&&!((w-=u[g])<=0););return q-g/Kt.STEPS_per_dB}this.GetTitleGain=function(u){for(var C=d(u.A,u.A.length),g=0;g<u.A.length;g++)u.B[g]+=u.A[g],u.A[g]=0;for(var g=0;g<MAX_ORDER;g++)u.linprebuf[g]=u.lstepbuf[g]=u.loutbuf[g]=u.rinprebuf[g]=u.rstepbuf[g]=u.routbuf[g]=0;return u.totsamp=0,u.lsum=u.rsum=0,C}}var Xa=Kt,Ha=Gt,Ne=Ha.new_float,la=Ha.new_int,le=Xa;function Vn(){this.linprebuf=Ne(le.MAX_ORDER*2),this.linpre=0,this.lstepbuf=Ne(le.MAX_SAMPLES_PER_WINDOW+le.MAX_ORDER),this.lstep=0,this.loutbuf=Ne(le.MAX_SAMPLES_PER_WINDOW+le.MAX_ORDER),this.lout=0,this.rinprebuf=Ne(le.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=Ne(le.MAX_SAMPLES_PER_WINDOW+le.MAX_ORDER),this.rstep=0,this.routbuf=Ne(le.MAX_SAMPLES_PER_WINDOW+le.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=la(0|le.STEPS_per_dB*le.MAX_dB),this.B=la(0|le.STEPS_per_dB*le.MAX_dB)}var jn=Vn;function Xn(q){this.bits=q}var Ya=Xn,jr=Gt,_a=jr.new_float,Hn=jr.new_int,fa=jr.assert,Yn=Ya,ua=ae(),Zn=fr,Un=ur;function qn(q){var it=q;this.quantize=it,this.iteration_loop=function(x,G,D,y){var S=x.internal_flags,p=_a(Zn.SFBMAX),k=_a(576),L=Hn(2),d=0,u,C=S.l3_side,g=new Yn(d);this.quantize.rv.ResvFrameBegin(x,g),d=g.bits;for(var B=0;B<S.mode_gr;B++){u=this.quantize.qupvt.on_pe(x,G,L,d,B,B),S.mode_ext==ua.MPG_MD_MS_LR&&(this.quantize.ms_convert(S.l3_side,B),this.quantize.qupvt.reduce_side(L,D[B],d,u));for(var w=0;w<S.channels_out;w++){var b,r,e=C.tt[B][w];e.block_type!=ua.SHORT_TYPE?(b=0,r=S.PSY.mask_adjust-b):(b=0,r=S.PSY.mask_adjust_short-b),S.masking_lower=Math.pow(10,r*.1),this.quantize.init_outer_loop(S,e),this.quantize.init_xrpow(S,e,k)&&(this.quantize.qupvt.calc_xmin(x,y[B][w],e,p),this.quantize.outer_loop(x,e,p,k,w,L[w])),this.quantize.iteration_finish_one(S,B,w),fa(e.part2_3_length<=Un.MAX_BITS_PER_CHANNEL),fa(e.part2_3_length<=L[w])}}this.quantize.rv.ResvFrameEnd(S,d)}}var Wn=qn;function Ht(q,it,x,G){this.xlen=q,this.linmax=it,this.table=x,this.hlen=G}var At={};At.t1HB=[1,1,1,0];At.t2HB=[1,2,1,3,1,1,3,2,0];At.t3HB=[3,2,1,1,1,1,3,2,0];At.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];At.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];At.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];At.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];At.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];At.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];At.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];At.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];At.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];At.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];At.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];At.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];At.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];At.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];At.t1l=[1,4,3,5];At.t2l=[1,4,7,4,5,7,6,7,8];At.t3l=[2,3,7,4,4,7,6,7,8];At.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];At.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];At.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];At.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];At.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];At.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];At.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];At.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];At.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];At.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];At.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];At.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];At.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];At.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];At.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];At.ht=[new Ht(0,0,null,null),new Ht(2,0,At.t1HB,At.t1l),new Ht(3,0,At.t2HB,At.t2l),new Ht(3,0,At.t3HB,At.t3l),new Ht(0,0,null,null),new Ht(4,0,At.t5HB,At.t5l),new Ht(4,0,At.t6HB,At.t6l),new Ht(6,0,At.t7HB,At.t7l),new Ht(6,0,At.t8HB,At.t8l),new Ht(6,0,At.t9HB,At.t9l),new Ht(8,0,At.t10HB,At.t10l),new Ht(8,0,At.t11HB,At.t11l),new Ht(8,0,At.t12HB,At.t12l),new Ht(16,0,At.t13HB,At.t13l),new Ht(0,0,null,At.t16_5l),new Ht(16,0,At.t15HB,At.t15l),new Ht(1,1,At.t16HB,At.t16l),new Ht(2,3,At.t16HB,At.t16l),new Ht(3,7,At.t16HB,At.t16l),new Ht(4,15,At.t16HB,At.t16l),new Ht(6,63,At.t16HB,At.t16l),new Ht(8,255,At.t16HB,At.t16l),new Ht(10,1023,At.t16HB,At.t16l),new Ht(13,8191,At.t16HB,At.t16l),new Ht(4,15,At.t24HB,At.t24l),new Ht(5,31,At.t24HB,At.t24l),new Ht(6,63,At.t24HB,At.t24l),new Ht(7,127,At.t24HB,At.t24l),new Ht(8,255,At.t24HB,At.t24l),new Ht(9,511,At.t24HB,At.t24l),new Ht(11,2047,At.t24HB,At.t24l),new Ht(13,8191,At.t24HB,At.t24l),new Ht(0,0,At.t32HB,At.t32l),new Ht(0,0,At.t33HB,At.t33l)];At.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];At.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];At.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];At.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];At.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];At.scfsi_band=[0,6,11,16,21];var Xr=At,Rr,ha;function Za(){if(ha)return Rr;ha=1;var q=Va,it=Gt,x=it.VbrMode,G=it.Float,D=it.Util,y=it.new_float,S=it.new_int,p=it.assert,k=ae(),L=Ya,d=ur;u.Q_MAX=257,u.Q_MAX2=116,u.LARGE_BITS=1e5,u.IXMAX_VAL=8206;function u(){var C=Hr(),g=null,B=null,w=null;this.setModules=function(R,K,N){g=R,B=K,w=N};function b(R){return p(0<=R+u.Q_MAX2&&R<u.Q_MAX),M[R+u.Q_MAX2]}this.IPOW20=function(R){return p(0<=R&&R<u.Q_MAX),P[R]};var r=2220446049250313e-31,e=u.IXMAX_VAL,t=e+2,a=u.Q_MAX,l=u.Q_MAX2;u.LARGE_BITS;var o=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var A=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=A,this.sfBandIndex=[new q([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new q([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var M=y(a+l+1),P=y(a),V=y(t),U=y(t);this.adj43=U;function _(R,K){var N=w.ATHformula(K,R);return N-=o,N=Math.pow(10,N/10+R.ATHlower),N}function T(R){for(var K=R.internal_flags.ATH.l,N=R.internal_flags.ATH.psfb21,Z=R.internal_flags.ATH.s,W=R.internal_flags.ATH.psfb12,z=R.internal_flags,h=R.out_samplerate,i=0;i<k.SBMAX_l;i++){var c=z.scalefac_band.l[i],v=z.scalefac_band.l[i+1];K[i]=G.MAX_VALUE;for(var E=c;E<v;E++){var et=E*h/1152,ft=_(R,et);K[i]=Math.min(K[i],ft)}}for(var i=0;i<k.PSFB21;i++){var c=z.scalefac_band.psfb21[i],v=z.scalefac_band.psfb21[i+1];N[i]=G.MAX_VALUE;for(var E=c;E<v;E++){var et=E*h/1152,ft=_(R,et);N[i]=Math.min(N[i],ft)}}for(var i=0;i<k.SBMAX_s;i++){var c=z.scalefac_band.s[i],v=z.scalefac_band.s[i+1];Z[i]=G.MAX_VALUE;for(var E=c;E<v;E++){var et=E*h/384,ft=_(R,et);Z[i]=Math.min(Z[i],ft)}Z[i]*=z.scalefac_band.s[i+1]-z.scalefac_band.s[i]}for(var i=0;i<k.PSFB12;i++){var c=z.scalefac_band.psfb12[i],v=z.scalefac_band.psfb12[i+1];W[i]=G.MAX_VALUE;for(var E=c;E<v;E++){var et=E*h/384,ft=_(R,et);W[i]=Math.min(W[i],ft)}W[i]*=z.scalefac_band.s[13]-z.scalefac_band.s[12]}if(R.noATH){for(var i=0;i<k.SBMAX_l;i++)K[i]=1e-20;for(var i=0;i<k.PSFB21;i++)N[i]=1e-20;for(var i=0;i<k.SBMAX_s;i++)Z[i]=1e-20;for(var i=0;i<k.PSFB12;i++)W[i]=1e-20}z.ATH.floor=10*Math.log10(_(R,-1))}this.iteration_init=function(R){var K=R.internal_flags,N=K.l3_side,Z;if(K.iteration_init_init==0){for(K.iteration_init_init=1,N.main_data_begin=0,T(R),V[0]=0,Z=1;Z<t;Z++)V[Z]=Math.pow(Z,4/3);for(Z=0;Z<t-1;Z++)U[Z]=Z+1-Math.pow(.5*(V[Z]+V[Z+1]),.75);for(U[Z]=.5,Z=0;Z<a;Z++)P[Z]=Math.pow(2,(Z-210)*-.1875);for(Z=0;Z<=a+l;Z++)M[Z]=Math.pow(2,(Z-210-l)*.25);g.huffman_init(K);{var W,z,h,i;for(Z=R.exp_nspsytune>>2&63,Z>=32&&(Z-=64),W=Math.pow(10,Z/4/10),Z=R.exp_nspsytune>>8&63,Z>=32&&(Z-=64),z=Math.pow(10,Z/4/10),Z=R.exp_nspsytune>>14&63,Z>=32&&(Z-=64),h=Math.pow(10,Z/4/10),Z=R.exp_nspsytune>>20&63,Z>=32&&(Z-=64),i=h*Math.pow(10,Z/4/10),Z=0;Z<k.SBMAX_l;Z++){var c;Z<=6?c=W:Z<=13?c=z:Z<=20?c=h:c=i,K.nsPsy.longfact[Z]=c}for(Z=0;Z<k.SBMAX_s;Z++){var c;Z<=5?c=W:Z<=10?c=z:Z<=11?c=h:c=i,K.nsPsy.shortfact[Z]=c}}}},this.on_pe=function(R,K,N,Z,W,z){var h=R.internal_flags,i=0,c,v=S(2),E,et=new L(i),ft=B.ResvMaxBits(R,Z,et,z);i=et.bits;var X=i+ft;for(X>d.MAX_BITS_PER_GRANULE&&(X=d.MAX_BITS_PER_GRANULE),c=0,E=0;E<h.channels_out;++E)N[E]=Math.min(d.MAX_BITS_PER_CHANNEL,i/h.channels_out),v[E]=0|N[E]*K[W][E]/700-N[E],v[E]>Z*3/4&&(v[E]=Z*3/4),v[E]<0&&(v[E]=0),v[E]+N[E]>d.MAX_BITS_PER_CHANNEL&&(v[E]=Math.max(0,d.MAX_BITS_PER_CHANNEL-N[E])),c+=v[E];if(c>ft)for(E=0;E<h.channels_out;++E)v[E]=ft*v[E]/c;for(E=0;E<h.channels_out;++E)N[E]+=v[E],ft-=v[E];for(c=0,E=0;E<h.channels_out;++E)c+=N[E];if(c>d.MAX_BITS_PER_GRANULE){var $=0;for(E=0;E<h.channels_out;++E)N[E]*=d.MAX_BITS_PER_GRANULE,N[E]/=c,$+=N[E]}return X},this.reduce_side=function(R,K,N,Z){p(R[0]+R[1]<=d.MAX_BITS_PER_GRANULE);var W=.33*(.5-K)/.5;W<0&&(W=0),W>.5&&(W=.5);var z=0|W*.5*(R[0]+R[1]);z>d.MAX_BITS_PER_CHANNEL-R[0]&&(z=d.MAX_BITS_PER_CHANNEL-R[0]),z<0&&(z=0),R[1]>=125&&(R[1]-z>125?(R[0]<N&&(R[0]+=z),R[1]-=z):(R[0]+=R[1]-125,R[1]=125)),z=R[0]+R[1],z>Z&&(R[0]=Z*R[0]/z,R[1]=Z*R[1]/z),p(R[0]<=d.MAX_BITS_PER_CHANNEL),p(R[1]<=d.MAX_BITS_PER_CHANNEL),p(R[0]+R[1]<=d.MAX_BITS_PER_GRANULE)},this.athAdjust=function(R,K,N){var Z=90.30873362,W=94.82444863,z=D.FAST_LOG10_X(K,10),h=R*R,i=0;return z-=N,h>1e-20&&(i=1+D.FAST_LOG10_X(h,10/Z)),i<0&&(i=0),z*=i,z+=N+Z-W,Math.pow(10,.1*z)},this.calc_xmin=function(R,K,N,Z){var W=0,z=R.internal_flags,h,i=0,c=0,v=z.ATH,E=N.xr,et=R.VBR==x.vbr_mtrh?1:0,ft=z.masking_lower;for((R.VBR==x.vbr_mtrh||R.VBR==x.vbr_mt)&&(ft=1),h=0;h<N.psy_lmax;h++){var X,$,pt,wt,Et,Mt;R.VBR==x.vbr_rh||R.VBR==x.vbr_mtrh?$=athAdjust(v.adjust,v.l[h],v.floor):$=v.adjust*v.l[h],Et=N.width[h],pt=$/Et,wt=r,Mt=Et>>1,X=0;do{var f,st;f=E[i]*E[i],X+=f,wt+=f<pt?f:pt,i++,st=E[i]*E[i],X+=st,wt+=st<pt?st:pt,i++}while(--Mt>0);if(X>$&&c++,h==k.SBPSY_l){var rt=$*z.nsPsy.longfact[h];wt<rt&&(wt=rt)}if(et!=0&&($=wt),!R.ATHonly){var H=K.en.l[h];if(H>0){var rt;rt=X*K.thm.l[h]*ft/H,et!=0&&(rt*=z.nsPsy.longfact[h]),$<rt&&($=rt)}}et!=0?Z[W++]=$:Z[W++]=$*z.nsPsy.longfact[h]}var j=575;if(N.block_type!=k.SHORT_TYPE)for(var s=576;s--!=0&&C.EQ(E[s],0);)j=s;N.max_nonzero_coeff=j;for(var m=N.sfb_smin;h<N.psymax;m++,h+=3){var Et,ot,J;for(R.VBR==x.vbr_rh||R.VBR==x.vbr_mtrh?J=athAdjust(v.adjust,v.s[m],v.floor):J=v.adjust*v.s[m],Et=N.width[h],ot=0;ot<3;ot++){var X=0,$,pt,wt,Mt=Et>>1;pt=J/Et,wt=r;do{var f,st;f=E[i]*E[i],X+=f,wt+=f<pt?f:pt,i++,st=E[i]*E[i],X+=st,wt+=st<pt?st:pt,i++}while(--Mt>0);if(X>J&&c++,m==k.SBPSY_s){var rt=J*z.nsPsy.shortfact[m];wt<rt&&(wt=rt)}if(et!=0?$=wt:$=J,!R.ATHonly&&!R.ATHshort){var H=K.en.s[m][ot];if(H>0){var rt;rt=X*K.thm.s[m][ot]*ft/H,et!=0&&(rt*=z.nsPsy.shortfact[m]),$<rt&&($=rt)}}et!=0?Z[W++]=$:Z[W++]=$*z.nsPsy.shortfact[m]}R.useTemporal&&(Z[W-3]>Z[W-3+1]&&(Z[W-3+1]+=(Z[W-3]-Z[W-3+1])*z.decay),Z[W-3+1]>Z[W-3+2]&&(Z[W-3+2]+=(Z[W-3+1]-Z[W-3+2])*z.decay))}return c};function n(R){this.s=R}this.calc_noise_core=function(R,K,N,Z){var W=0,z=K.s,h=R.l3_enc;if(z>R.count1)for(;N--!=0;){var i;i=R.xr[z],z++,W+=i*i,i=R.xr[z],z++,W+=i*i}else if(z>R.big_values){var c=y(2);for(c[0]=0,c[1]=Z;N--!=0;){var i;i=Math.abs(R.xr[z])-c[h[z]],z++,W+=i*i,i=Math.abs(R.xr[z])-c[h[z]],z++,W+=i*i}}else for(;N--!=0;){var i;i=Math.abs(R.xr[z])-V[h[z]]*Z,z++,W+=i*i,i=Math.abs(R.xr[z])-V[h[z]]*Z,z++,W+=i*i}return K.s=z,W},this.calc_noise=function(R,K,N,Z,W){var z=0,h=0,i,c,v=0,E=0,et=0,ft=-20,X=0,$=R.scalefac,pt=0;for(Z.over_SSD=0,i=0;i<R.psymax;i++){var wt=R.global_gain-($[pt++]+(R.preflag!=0?A[i]:0)<<R.scalefac_scale+1)-R.subblock_gain[R.window[i]]*8,Et=0;if(W!=null&&W.step[i]==wt)Et=W.noise[i],X+=R.width[i],N[z++]=Et/K[h++],Et=W.noise_log[i];else{var Mt=b(wt);if(c=R.width[i]>>1,X+R.width[i]>R.max_nonzero_coeff){var f;f=R.max_nonzero_coeff-X+1,f>0?c=f>>1:c=0}var st=new n(X);Et=this.calc_noise_core(R,st,c,Mt),X=st.s,W!=null&&(W.step[i]=wt,W.noise[i]=Et),Et=N[z++]=Et/K[h++],Et=D.FAST_LOG10(Math.max(Et,1e-20)),W!=null&&(W.noise_log[i]=Et)}if(W!=null&&(W.global_gain=R.global_gain),et+=Et,Et>0){var rt;rt=Math.max(0|Et*10+.5,1),Z.over_SSD+=rt*rt,v++,E+=Et}ft=Math.max(ft,Et)}return Z.over_count=v,Z.tot_noise=et,Z.over_noise=E,Z.max_noise=ft,v},this.set_pinfo=function(R,K,N,Z,W){var z=R.internal_flags,h,i,c,v,E,et=K.scalefac_scale==0?.5:1,ft=K.scalefac,X=y(L3Side.SFBMAX),$=y(L3Side.SFBMAX),pt=new CalcNoiseResult;calc_xmin(R,N,K,X),calc_noise(K,X,$,pt,null);var wt=0;for(i=K.sfb_lmax,K.block_type!=k.SHORT_TYPE&&K.mixed_block_flag==0&&(i=22),h=0;h<i;h++){var Et=z.scalefac_band.l[h],Mt=z.scalefac_band.l[h+1],f=Mt-Et;for(v=0;wt<Mt;wt++)v+=K.xr[wt]*K.xr[wt];v/=f,E=1e15,z.pinfo.en[Z][W][h]=E*v,z.pinfo.xfsf[Z][W][h]=E*X[h]*$[h]/f,N.en.l[h]>0&&!R.ATHonly?v=v/N.en.l[h]:v=0,z.pinfo.thr[Z][W][h]=E*Math.max(v*N.thm.l[h],z.ATH.l[h]),z.pinfo.LAMEsfb[Z][W][h]=0,K.preflag!=0&&h>=11&&(z.pinfo.LAMEsfb[Z][W][h]=-et*A[h]),h<k.SBPSY_l&&(p(ft[h]>=0),z.pinfo.LAMEsfb[Z][W][h]-=et*ft[h])}if(K.block_type==k.SHORT_TYPE)for(i=h,h=K.sfb_smin;h<k.SBMAX_s;h++)for(var Et=z.scalefac_band.s[h],Mt=z.scalefac_band.s[h+1],f=Mt-Et,st=0;st<3;st++){for(v=0,c=Et;c<Mt;c++)v+=K.xr[wt]*K.xr[wt],wt++;v=Math.max(v/f,1e-20),E=1e15,z.pinfo.en_s[Z][W][3*h+st]=E*v,z.pinfo.xfsf_s[Z][W][3*h+st]=E*X[i]*$[i]/f,N.en.s[h][st]>0?v=v/N.en.s[h][st]:v=0,(R.ATHonly||R.ATHshort)&&(v=0),z.pinfo.thr_s[Z][W][3*h+st]=E*Math.max(v*N.thm.s[h][st],z.ATH.s[h]),z.pinfo.LAMEsfb_s[Z][W][3*h+st]=-2*K.subblock_gain[st],h<k.SBPSY_s&&(z.pinfo.LAMEsfb_s[Z][W][3*h+st]-=et*ft[i]),i++}z.pinfo.LAMEqss[Z][W]=K.global_gain,z.pinfo.LAMEmainbits[Z][W]=K.part2_3_length+K.part2_length,z.pinfo.LAMEsfbits[Z][W]=K.part2_length,z.pinfo.over[Z][W]=pt.over_count,z.pinfo.max_noise[Z][W]=pt.max_noise*10,z.pinfo.over_noise[Z][W]=pt.over_noise*10,z.pinfo.tot_noise[Z][W]=pt.tot_noise*10,z.pinfo.over_SSD[Z][W]=pt.over_SSD}}return Rr=u,Rr}var Er,ca;function Ua(){if(ca)return Er;ca=1;var q=Gt,it=q.System,x=q.Arrays,G=q.new_int,D=q.assert,y=ae(),S=Xr,p=Fr,k=Za();function L(){var d=null;this.qupvt=null,this.setModules=function(z){this.qupvt=z,d=z};function u(z){this.bits=0|z}var C=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function g(z,h,i,c,v,E){var et=.5946/h;for(z=z>>1;z--!=0;)v[E++]=et>i[c++]?0:1,v[E++]=et>i[c++]?0:1}function B(z,h,i,c,v,E){z=z>>1;var et=z%2;for(z=z>>1;z--!=0;){var ft,X,$,pt,wt,Et,Mt,f;ft=i[c++]*h,X=i[c++]*h,wt=0|ft,$=i[c++]*h,Et=0|X,pt=i[c++]*h,Mt=0|$,ft+=d.adj43[wt],f=0|pt,X+=d.adj43[Et],v[E++]=0|ft,$+=d.adj43[Mt],v[E++]=0|X,pt+=d.adj43[f],v[E++]=0|$,v[E++]=0|pt}if(et!=0){var ft,X,wt,Et;ft=i[c++]*h,X=i[c++]*h,wt=0|ft,Et=0|X,ft+=d.adj43[wt],X+=d.adj43[Et],v[E++]=0|ft,v[E++]=0|X}}function w(z,h,i,c,v){var E,et,ft=0,X,$=0,pt=0,wt=0,Et=h,Mt=0,f=Et,st=0,rt=z,H=0;for(X=v!=null&&c.global_gain==v.global_gain,c.block_type==y.SHORT_TYPE?et=38:et=21,E=0;E<=et;E++){var j=-1;if((X||c.block_type==y.NORM_TYPE)&&(j=c.global_gain-(c.scalefac[E]+(c.preflag!=0?d.pretab[E]:0)<<c.scalefac_scale+1)-c.subblock_gain[c.window[E]]*8),D(c.width[E]>=0),X&&v.step[E]==j)$!=0&&(B($,i,rt,H,f,st),$=0),pt!=0&&(g(pt,i,rt,H,f,st),pt=0);else{var s=c.width[E];if(ft+c.width[E]>c.max_nonzero_coeff){var m;m=c.max_nonzero_coeff-ft+1,x.fill(h,c.max_nonzero_coeff,576,0),s=m,s<0&&(s=0),E=et+1}if($==0&&pt==0&&(f=Et,st=Mt,rt=z,H=wt),v!=null&&v.sfb_count1>0&&E>=v.sfb_count1&&v.step[E]>0&&j>=v.step[E]?($!=0&&(B($,i,rt,H,f,st),$=0,f=Et,st=Mt,rt=z,H=wt),pt+=s):(pt!=0&&(g(pt,i,rt,H,f,st),pt=0,f=Et,st=Mt,rt=z,H=wt),$+=s),s<=0){pt!=0&&(g(pt,i,rt,H,f,st),pt=0),$!=0&&(B($,i,rt,H,f,st),$=0);break}}E<=et&&(Mt+=c.width[E],wt+=c.width[E],ft+=c.width[E])}$!=0&&(B($,i,rt,H,f,st),$=0),pt!=0&&(g(pt,i,rt,H,f,st),pt=0)}function b(z,h,i){var c=0,v=0;do{var E=z[h++],et=z[h++];c<E&&(c=E),v<et&&(v=et)}while(h<i);return c<v&&(c=v),c}function r(z,h,i,c,v,E){var et=S.ht[c].xlen*65536+S.ht[v].xlen,ft=0,X;do{var $=z[h++],pt=z[h++];$!=0&&($>14&&($=15,ft+=et),$*=16),pt!=0&&(pt>14&&(pt=15,ft+=et),$+=pt),ft+=S.largetbl[$]}while(h<i);return X=ft&65535,ft>>=16,ft>X&&(ft=X,c=v),E.bits+=ft,c}function e(z,h,i,c){var v=0,E=S.ht[1].hlen;do{var et=z[h+0]*2+z[h+1];h+=2,v+=E[et]}while(h<i);return c.bits+=v,1}function t(z,h,i,c,v){var E=0,et,ft=S.ht[c].xlen,X;c==2?X=S.table23:X=S.table56;do{var $=z[h+0]*ft+z[h+1];h+=2,E+=X[$]}while(h<i);return et=E&65535,E>>=16,E>et&&(E=et,c++),v.bits+=E,c}function a(z,h,i,c,v){var E=0,et=0,ft=0,X=S.ht[c].xlen,$=S.ht[c].hlen,pt=S.ht[c+1].hlen,wt=S.ht[c+2].hlen;do{var Et=z[h+0]*X+z[h+1];h+=2,E+=$[Et],et+=pt[Et],ft+=wt[Et]}while(h<i);var Mt=c;return E>et&&(E=et,Mt++),E>ft&&(E=ft,Mt=c+2),v.bits+=E,Mt}var l=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function o(z,h,i,c){var v=b(z,h,i);switch(v){case 0:return v;case 1:return e(z,h,i,c);case 2:case 3:return t(z,h,i,l[v-1],c);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return a(z,h,i,l[v-1],c);default:if(v>k.IXMAX_VAL)return c.bits=k.LARGE_BITS,-1;v-=15;var E;for(E=24;E<32&&!(S.ht[E].linmax>=v);E++);var et;for(et=E-8;et<24&&!(S.ht[et].linmax>=v);et++);return r(z,h,i,et,E,c)}}this.noquant_count_bits=function(z,h,i){var c=h.l3_enc,v=Math.min(576,h.max_nonzero_coeff+2>>1<<1);for(i!=null&&(i.sfb_count1=0);v>1&&!(c[v-1]|c[v-2]);v-=2);h.count1=v;for(var E=0,et=0;v>3;v-=4){var ft;if(((c[v-1]|c[v-2]|c[v-3]|c[v-4])&2147483647)>1)break;ft=((c[v-4]*2+c[v-3])*2+c[v-2])*2+c[v-1],E+=S.t32l[ft],et+=S.t33l[ft]}var X=E;if(h.count1table_select=0,E>et&&(X=et,h.count1table_select=1),h.count1bits=X,h.big_values=v,v==0)return X;if(h.block_type==y.SHORT_TYPE)E=3*z.scalefac_band.s[3],E>h.big_values&&(E=h.big_values),et=h.big_values;else if(h.block_type==y.NORM_TYPE){if(E=h.region0_count=z.bv_scf[v-2],et=h.region1_count=z.bv_scf[v-1],D(E+et+2<y.SBPSY_l),et=z.scalefac_band.l[E+et+2],E=z.scalefac_band.l[E+1],et<v){var $=new u(X);h.table_select[2]=o(c,et,v,$),X=$.bits}}else h.region0_count=7,h.region1_count=y.SBMAX_l-1-7-1,E=z.scalefac_band.l[8],et=v,E>et&&(E=et);if(E=Math.min(E,v),et=Math.min(et,v),0<E){var $=new u(X);h.table_select[0]=o(c,0,E,$),X=$.bits}if(E<et){var $=new u(X);h.table_select[1]=o(c,E,et,$),X=$.bits}if(z.use_best_huffman==2&&(h.part2_3_length=X,best_huffman_divide(z,h),X=h.part2_3_length),i!=null&&h.block_type==y.NORM_TYPE){for(var pt=0;z.scalefac_band.l[pt]<h.big_values;)pt++;i.sfb_count1=pt}return X},this.count_bits=function(z,h,i,c){var v=i.l3_enc,E=k.IXMAX_VAL/d.IPOW20(i.global_gain);if(i.xrpow_max>E)return k.LARGE_BITS;if(w(h,v,d.IPOW20(i.global_gain),i,c),z.substep_shaping&2)for(var et=0,ft=i.global_gain+i.scalefac_scale,X=.634521682242439/d.IPOW20(ft),$=0;$<i.sfbmax;$++){var pt=i.width[$];if(z.pseudohalf[$]==0)et+=pt;else{var wt;for(wt=et,et+=pt;wt<et;++wt)v[wt]=h[wt]>=X?v[wt]:0}}return this.noquant_count_bits(z,i,c)};function A(z,h,i,c,v,E,et){for(var ft=h.big_values,X=0;X<=22;X++)c[X]=k.LARGE_BITS;for(var X=0;X<16;X++){var $=z.scalefac_band.l[X+1];if($>=ft)break;var pt=0,wt=new u(pt),Et=o(i,0,$,wt);pt=wt.bits;for(var Mt=0;Mt<8;Mt++){var f=z.scalefac_band.l[X+Mt+2];if(f>=ft)break;var st=pt;wt=new u(st);var rt=o(i,$,f,wt);st=wt.bits,c[X+Mt]>st&&(c[X+Mt]=st,v[X+Mt]=X,E[X+Mt]=Et,et[X+Mt]=rt)}}}function M(z,h,i,c,v,E,et,ft){for(var X=h.big_values,$=2;$<y.SBMAX_l+1;$++){var pt=z.scalefac_band.l[$];if(pt>=X)break;var wt=v[$-2]+h.count1bits;if(i.part2_3_length<=wt)break;var Et=new u(wt),Mt=o(c,pt,X,Et);wt=Et.bits,!(i.part2_3_length<=wt)&&(i.assign(h),i.part2_3_length=wt,i.region0_count=E[$-2],i.region1_count=$-2-E[$-2],i.table_select[0]=et[$-2],i.table_select[1]=ft[$-2],i.table_select[2]=Mt)}}this.best_huffman_divide=function(z,h){var i=new p,c=h.l3_enc,v=G(23),E=G(23),et=G(23),ft=G(23);if(!(h.block_type==y.SHORT_TYPE&&z.mode_gr==1)){i.assign(h),h.block_type==y.NORM_TYPE&&(A(z,h,c,v,E,et,ft),M(z,i,h,c,v,E,et,ft));var X=i.big_values;if(!(X==0||(c[X-2]|c[X-1])>1)&&(X=h.count1+2,!(X>576))){i.assign(h),i.count1=X;for(var $=0,pt=0;X>i.big_values;X-=4){var wt=((c[X-4]*2+c[X-3])*2+c[X-2])*2+c[X-1];$+=S.t32l[wt],pt+=S.t33l[wt]}if(i.big_values=X,i.count1table_select=0,$>pt&&($=pt,i.count1table_select=1),i.count1bits=$,i.block_type==y.NORM_TYPE)M(z,i,h,c,v,E,et,ft);else{if(i.part2_3_length=$,$=z.scalefac_band.l[8],$>X&&($=X),$>0){var Et=new u(i.part2_3_length);i.table_select[0]=o(c,0,$,Et),i.part2_3_length=Et.bits}if(X>$){var Et=new u(i.part2_3_length);i.table_select[1]=o(c,$,X,Et),i.part2_3_length=Et.bits}h.part2_3_length>i.part2_3_length&&h.assign(i)}}}};var P=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],V=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],U=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],_=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];L.slen1_tab=U,L.slen2_tab=_;function T(z,h){for(var i,c=h.tt[1][z],v=h.tt[0][z],E=0;E<S.scfsi_band.length-1;E++){for(i=S.scfsi_band[E];i<S.scfsi_band[E+1]&&!(v.scalefac[i]!=c.scalefac[i]&&c.scalefac[i]>=0);i++);if(i==S.scfsi_band[E+1]){for(i=S.scfsi_band[E];i<S.scfsi_band[E+1];i++)c.scalefac[i]=-1;h.scfsi[z][E]=1}}var et=0,ft=0;for(i=0;i<11;i++)c.scalefac[i]!=-1&&(ft++,et<c.scalefac[i]&&(et=c.scalefac[i]));for(var X=0,$=0;i<y.SBPSY_l;i++)c.scalefac[i]!=-1&&($++,X<c.scalefac[i]&&(X=c.scalefac[i]));for(var E=0;E<16;E++)if(et<P[E]&&X<V[E]){var pt=U[E]*ft+_[E]*$;c.part2_length>pt&&(c.part2_length=pt,c.scalefac_compress=E)}}this.best_scalefac_store=function(z,h,i,c){var v=c.tt[h][i],E,et,ft,X,$=0;for(ft=0,E=0;E<v.sfbmax;E++){var pt=v.width[E];for(ft+=pt,X=-pt;X<0&&v.l3_enc[X+ft]==0;X++);X==0&&(v.scalefac[E]=$=-2)}if(v.scalefac_scale==0&&v.preflag==0){var wt=0;for(E=0;E<v.sfbmax;E++)v.scalefac[E]>0&&(wt|=v.scalefac[E]);if(!(wt&1)&&wt!=0){for(E=0;E<v.sfbmax;E++)v.scalefac[E]>0&&(v.scalefac[E]>>=1);v.scalefac_scale=$=1}}if(v.preflag==0&&v.block_type!=y.SHORT_TYPE&&z.mode_gr==2){for(E=11;E<y.SBPSY_l&&!(v.scalefac[E]<d.pretab[E]&&v.scalefac[E]!=-2);E++);if(E==y.SBPSY_l){for(E=11;E<y.SBPSY_l;E++)v.scalefac[E]>0&&(v.scalefac[E]-=d.pretab[E]);v.preflag=$=1}}for(et=0;et<4;et++)c.scfsi[i][et]=0;for(z.mode_gr==2&&h==1&&c.tt[0][i].block_type!=y.SHORT_TYPE&&c.tt[1][i].block_type!=y.SHORT_TYPE&&(T(i,c),$=0),E=0;E<v.sfbmax;E++)v.scalefac[E]==-2&&(v.scalefac[E]=0);$!=0&&(z.mode_gr==2?this.scale_bitcount(v):this.scale_bitcount_lsf(z,v))};function n(z,h){for(var i=0;i<h;++i)if(z[i]<0)return!1;return!0}var R=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],K=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],N=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(z){var h,i,c=0,v=0,E,et=z.scalefac;if(D(n(et,z.sfbmax)),z.block_type==y.SHORT_TYPE)E=R,z.mixed_block_flag!=0&&(E=K);else if(E=N,z.preflag==0){for(i=11;i<y.SBPSY_l&&!(et[i]<d.pretab[i]);i++);if(i==y.SBPSY_l)for(z.preflag=1,i=11;i<y.SBPSY_l;i++)et[i]-=d.pretab[i]}for(i=0;i<z.sfbdivide;i++)c<et[i]&&(c=et[i]);for(;i<z.sfbmax;i++)v<et[i]&&(v=et[i]);for(z.part2_length=k.LARGE_BITS,h=0;h<16;h++)c<P[h]&&v<V[h]&&z.part2_length>E[h]&&(z.part2_length=E[h],z.scalefac_compress=h);return z.part2_length==k.LARGE_BITS};var Z=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(z,h){var i,c,v,E,et,ft,X,$,pt=G(4),wt=h.scalefac;for(h.preflag!=0?i=2:i=0,X=0;X<4;X++)pt[X]=0;if(h.block_type==y.SHORT_TYPE){c=1;var Et=d.nr_of_sfb_block[i][c];for($=0,v=0;v<4;v++)for(E=Et[v]/3,X=0;X<E;X++,$++)for(et=0;et<3;et++)wt[$*3+et]>pt[v]&&(pt[v]=wt[$*3+et])}else{c=0;var Et=d.nr_of_sfb_block[i][c];for($=0,v=0;v<4;v++)for(E=Et[v],X=0;X<E;X++,$++)wt[$]>pt[v]&&(pt[v]=wt[$])}for(ft=!1,v=0;v<4;v++)pt[v]>Z[i][v]&&(ft=!0);if(!ft){var Mt,f,st,rt;for(h.sfb_partition_table=d.nr_of_sfb_block[i][c],v=0;v<4;v++)h.slen[v]=W[pt[v]];switch(Mt=h.slen[0],f=h.slen[1],st=h.slen[2],rt=h.slen[3],i){case 0:h.scalefac_compress=(Mt*5+f<<4)+(st<<2)+rt;break;case 1:h.scalefac_compress=400+(Mt*5+f<<2)+st;break;case 2:h.scalefac_compress=500+Mt*3+f;break;default:it.err.printf(`intensity stereo not implemented yet
`);break}}if(!ft)for(D(h.sfb_partition_table!=null),h.part2_length=0,v=0;v<4;v++)h.part2_length+=h.slen[v]*h.sfb_partition_table[v];return ft};var W=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(z){for(var h=2;h<=576;h+=2){for(var i=0,c;z.scalefac_band.l[++i]<h;);for(c=C[i][0];z.scalefac_band.l[c+1]>h;)c--;for(c<0&&(c=C[i][0]),z.bv_scf[h-2]=c,c=C[i][1];z.scalefac_band.l[c+z.bv_scf[h-2]+2]>h;)c--;c<0&&(c=C[i][1]),z.bv_scf[h-1]=c}}}return Er=L,Er}var Mr,da;function Hr(){if(da)return Mr;da=1;var q=Gt,it=q.System,x=q.Arrays,G=q.new_byte,D=q.new_float_n,y=q.new_int,S=q.assert,p=Ua(),k=Xr,L=ae(),d=ur;u.EQ=function(C,g){return Math.abs(C)>Math.abs(g)?Math.abs(C-g)<=Math.abs(C)*1e-6:Math.abs(C-g)<=Math.abs(g)*1e-6},u.NEQ=function(C,g){return!u.EQ(C,g)};function u(){var C=Yr(),g=this,B=32773,w=null,b=null,r=null,e=null;this.setModules=function(h,i,c,v){w=h,b=i,r=c,e=v};var t=null,a=0,l=0,o=0;this.getframebits=function(h){var i=h.internal_flags,c;i.bitrate_index!=0?c=k.bitrate_table[h.version][i.bitrate_index]:c=h.brate;var v=0|(h.version+1)*72e3*c/h.out_samplerate+i.padding;return 8*v};function A(h){it.arraycopy(h.header[h.w_ptr].buf,0,t,l,h.sideinfo_len),l+=h.sideinfo_len,a+=h.sideinfo_len*8,h.w_ptr=h.w_ptr+1&d.MAX_HEADER_BUF-1}function M(h,i,c){for(;c>0;){var v;o==0&&(o=8,l++,S(l<C.LAME_MAXMP3BUFFER),S(h.header[h.w_ptr].write_timing>=a),h.header[h.w_ptr].write_timing==a&&A(h),t[l]=0),v=Math.min(c,o),c-=v,o-=v,t[l]|=i>>c<<o,a+=v}}function P(h,i,c){for(;c>0;){var v;o==0&&(o=8,l++,S(l<C.LAME_MAXMP3BUFFER),t[l]=0),v=Math.min(c,o),c-=v,o-=v,t[l]|=i>>c<<o,a+=v}}function V(h,i){var c=h.internal_flags,v;if(i>=8&&(M(c,76,8),i-=8),i>=8&&(M(c,65,8),i-=8),i>=8&&(M(c,77,8),i-=8),i>=8&&(M(c,69,8),i-=8),i>=32){var E=r.getLameShortVersion();if(i>=32)for(v=0;v<E.length&&i>=8;++v)i-=8,M(c,E.charAt(v),8)}for(;i>=1;i-=1)M(c,c.ancillary_flag,1),c.ancillary_flag^=h.disable_reservoir?0:1}function U(h,i,c){for(var v=h.header[h.h_ptr].ptr;c>0;){var E=Math.min(c,8-(v&7));c-=E,h.header[h.h_ptr].buf[v>>3]|=i>>c<<8-(v&7)-E,v+=E}h.header[h.h_ptr].ptr=v}function _(h,i){h<<=8;for(var c=0;c<8;c++)h<<=1,i<<=1,(i^h)&65536&&(i^=B);return i}this.CRC_writeheader=function(h,i){var c=65535;c=_(i[2]&255,c),c=_(i[3]&255,c);for(var v=6;v<h.sideinfo_len;v++)c=_(i[v]&255,c);i[4]=byte(c>>8),i[5]=byte(c&255)};function T(h,i){var c=h.internal_flags,v,E,et;if(v=c.l3_side,c.header[c.h_ptr].ptr=0,x.fill(c.header[c.h_ptr].buf,0,c.sideinfo_len,0),h.out_samplerate<16e3?U(c,4094,12):U(c,4095,12),U(c,h.version,1),U(c,1,2),U(c,h.error_protection?0:1,1),U(c,c.bitrate_index,4),U(c,c.samplerate_index,2),U(c,c.padding,1),U(c,h.extension,1),U(c,h.mode.ordinal(),2),U(c,c.mode_ext,2),U(c,h.copyright,1),U(c,h.original,1),U(c,h.emphasis,2),h.error_protection&&U(c,0,16),h.version==1){for(S(v.main_data_begin>=0),U(c,v.main_data_begin,9),c.channels_out==2?U(c,v.private_bits,3):U(c,v.private_bits,5),et=0;et<c.channels_out;et++){var ft;for(ft=0;ft<4;ft++)U(c,v.scfsi[et][ft],1)}for(E=0;E<2;E++)for(et=0;et<c.channels_out;et++){var X=v.tt[E][et];U(c,X.part2_3_length+X.part2_length,12),U(c,X.big_values/2,9),U(c,X.global_gain,8),U(c,X.scalefac_compress,4),X.block_type!=L.NORM_TYPE?(U(c,1,1),U(c,X.block_type,2),U(c,X.mixed_block_flag,1),X.table_select[0]==14&&(X.table_select[0]=16),U(c,X.table_select[0],5),X.table_select[1]==14&&(X.table_select[1]=16),U(c,X.table_select[1],5),U(c,X.subblock_gain[0],3),U(c,X.subblock_gain[1],3),U(c,X.subblock_gain[2],3)):(U(c,0,1),X.table_select[0]==14&&(X.table_select[0]=16),U(c,X.table_select[0],5),X.table_select[1]==14&&(X.table_select[1]=16),U(c,X.table_select[1],5),X.table_select[2]==14&&(X.table_select[2]=16),U(c,X.table_select[2],5),S(0<=X.region0_count&&X.region0_count<16),S(0<=X.region1_count&&X.region1_count<8),U(c,X.region0_count,4),U(c,X.region1_count,3)),U(c,X.preflag,1),U(c,X.scalefac_scale,1),U(c,X.count1table_select,1)}}else for(S(v.main_data_begin>=0),U(c,v.main_data_begin,8),U(c,v.private_bits,c.channels_out),E=0,et=0;et<c.channels_out;et++){var X=v.tt[E][et];U(c,X.part2_3_length+X.part2_length,12),U(c,X.big_values/2,9),U(c,X.global_gain,8),U(c,X.scalefac_compress,9),X.block_type!=L.NORM_TYPE?(U(c,1,1),U(c,X.block_type,2),U(c,X.mixed_block_flag,1),X.table_select[0]==14&&(X.table_select[0]=16),U(c,X.table_select[0],5),X.table_select[1]==14&&(X.table_select[1]=16),U(c,X.table_select[1],5),U(c,X.subblock_gain[0],3),U(c,X.subblock_gain[1],3),U(c,X.subblock_gain[2],3)):(U(c,0,1),X.table_select[0]==14&&(X.table_select[0]=16),U(c,X.table_select[0],5),X.table_select[1]==14&&(X.table_select[1]=16),U(c,X.table_select[1],5),X.table_select[2]==14&&(X.table_select[2]=16),U(c,X.table_select[2],5),S(0<=X.region0_count&&X.region0_count<16),S(0<=X.region1_count&&X.region1_count<8),U(c,X.region0_count,4),U(c,X.region1_count,3)),U(c,X.scalefac_scale,1),U(c,X.count1table_select,1)}h.error_protection&&CRC_writeheader(c,c.header[c.h_ptr].buf);{var $=c.h_ptr;S(c.header[$].ptr==c.sideinfo_len*8),c.h_ptr=$+1&d.MAX_HEADER_BUF-1,c.header[c.h_ptr].write_timing=c.header[$].write_timing+i,c.h_ptr==c.w_ptr&&it.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function n(h,i){var c=k.ht[i.count1table_select+32],v,E=0,et=i.big_values,ft=i.big_values;for(S(i.count1table_select<2),v=(i.count1-i.big_values)/4;v>0;--v){var X=0,$=0,pt;pt=i.l3_enc[et+0],pt!=0&&($+=8,i.xr[ft+0]<0&&X++),pt=i.l3_enc[et+1],pt!=0&&($+=4,X*=2,i.xr[ft+1]<0&&X++),pt=i.l3_enc[et+2],pt!=0&&($+=2,X*=2,i.xr[ft+2]<0&&X++),pt=i.l3_enc[et+3],pt!=0&&($++,X*=2,i.xr[ft+3]<0&&X++),et+=4,ft+=4,M(h,X+c.table[$],c.hlen[$]),E+=c.hlen[$]}return E}function R(h,i,c,v,E){var et=k.ht[i],ft=0;if(i==0)return ft;for(var X=c;X<v;X+=2){var $=0,pt=0,wt=et.xlen,Et=et.xlen,Mt=0,f=E.l3_enc[X],st=E.l3_enc[X+1];if(f!=0&&(E.xr[X]<0&&Mt++,$--),i>15){if(f>14){var rt=f-15;S(rt<=et.linmax),Mt|=rt<<1,pt=wt,f=15}if(st>14){var H=st-15;S(H<=et.linmax),Mt<<=wt,Mt|=H,pt+=wt,st=15}Et=16}st!=0&&(Mt<<=1,E.xr[X+1]<0&&Mt++,$--),f=f*Et+st,pt-=$,$+=et.hlen[f],M(h,et.table[f],$),M(h,Mt,pt),ft+=$+pt}return ft}function K(h,i){var c=3*h.scalefac_band.s[3];c>i.big_values&&(c=i.big_values);var v=R(h,i.table_select[0],0,c,i);return v+=R(h,i.table_select[1],c,i.big_values,i),v}function N(h,i){var c,v,E,et;c=i.big_values;var ft=i.region0_count+1;return S(ft<h.scalefac_band.l.length),E=h.scalefac_band.l[ft],ft+=i.region1_count+1,S(ft<h.scalefac_band.l.length),et=h.scalefac_band.l[ft],E>c&&(E=c),et>c&&(et=c),v=R(h,i.table_select[0],0,E,i),v+=R(h,i.table_select[1],E,et,i),v+=R(h,i.table_select[2],et,c,i),v}function Z(h){var i,c,v,E,et=0,ft=h.internal_flags,X=ft.l3_side;if(h.version==1)for(i=0;i<2;i++)for(c=0;c<ft.channels_out;c++){var $=X.tt[i][c],pt=p.slen1_tab[$.scalefac_compress],wt=p.slen2_tab[$.scalefac_compress];for(E=0,v=0;v<$.sfbdivide;v++)$.scalefac[v]!=-1&&(M(ft,$.scalefac[v],pt),E+=pt);for(;v<$.sfbmax;v++)$.scalefac[v]!=-1&&(M(ft,$.scalefac[v],wt),E+=wt);S(E==$.part2_length),$.block_type==L.SHORT_TYPE?E+=K(ft,$):E+=N(ft,$),E+=n(ft,$),S(E==$.part2_3_length+$.part2_length),et+=E}else for(i=0,c=0;c<ft.channels_out;c++){var $=X.tt[i][c],Et,Mt,f=0;if(S($.sfb_partition_table!=null),E=0,v=0,Mt=0,$.block_type==L.SHORT_TYPE){for(;Mt<4;Mt++){var st=$.sfb_partition_table[Mt]/3,rt=$.slen[Mt];for(Et=0;Et<st;Et++,v++)M(ft,Math.max($.scalefac[v*3+0],0),rt),M(ft,Math.max($.scalefac[v*3+1],0),rt),M(ft,Math.max($.scalefac[v*3+2],0),rt),f+=3*rt}E+=K(ft,$)}else{for(;Mt<4;Mt++){var st=$.sfb_partition_table[Mt],rt=$.slen[Mt];for(Et=0;Et<st;Et++,v++)M(ft,Math.max($.scalefac[v],0),rt),f+=rt}E+=N(ft,$)}E+=n(ft,$),S(E==$.part2_3_length),S(f==$.part2_length),et+=f+E}return et}function W(){this.total=0}function z(h,i){var c=h.internal_flags,v,E,et,ft,X;return X=c.w_ptr,ft=c.h_ptr-1,ft==-1&&(ft=d.MAX_HEADER_BUF-1),v=c.header[ft].write_timing-a,i.total=v,v>=0&&(E=1+ft-X,ft<X&&(E=1+ft-X+d.MAX_HEADER_BUF),v-=E*8*c.sideinfo_len),et=g.getframebits(h),v+=et,i.total+=et,i.total%8!=0?i.total=1+i.total/8:i.total=i.total/8,i.total+=l+1,v<0&&it.err.println(`strange error flushing buffer ... 
`),v}this.flush_bitstream=function(h){var i=h.internal_flags,c,v,E=i.h_ptr-1;if(E==-1&&(E=d.MAX_HEADER_BUF-1),c=i.l3_side,!((v=z(h,new W))<0)){if(V(h,v),S(i.header[E].write_timing+this.getframebits(h)==a),i.ResvSize=0,c.main_data_begin=0,i.findReplayGain){var et=w.GetTitleGain(i.rgdata);S(NEQ(et,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),i.RadioGain=Math.floor(et*10+.5)|0}i.findPeakSample&&(i.noclipGainChange=Math.ceil(Math.log10(i.PeakSample/32767)*20*10)|0,i.noclipGainChange>0&&(EQ(h.scale,1)||EQ(h.scale,0))?i.noclipScale=Math.floor(32767/i.PeakSample*100)/100:i.noclipScale=-1)}},this.add_dummy_byte=function(h,i,c){for(var v=h.internal_flags,E;c-- >0;)for(P(v,i,8),E=0;E<d.MAX_HEADER_BUF;++E)v.header[E].write_timing+=8},this.format_bitstream=function(h){var i=h.internal_flags,c;c=i.l3_side;var v=this.getframebits(h);V(h,c.resvDrain_pre),T(h,v);var E=8*i.sideinfo_len;if(E+=Z(h),V(h,c.resvDrain_post),E+=c.resvDrain_post,c.main_data_begin+=(v-E)/8,z(h,new W)!=i.ResvSize&&it.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),c.main_data_begin*8!=i.ResvSize&&(it.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*c.main_data_begin,i.ResvSize,c.resvDrain_post,c.resvDrain_pre,8*i.sideinfo_len,E-c.resvDrain_post-8*i.sideinfo_len,E,E%8,v),it.err.println("This is a fatal error.  It has several possible causes:"),it.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),it.err.println(" 9%%  Your system is overclocked"),it.err.println(" 1%%  bug in LAME encoding library"),i.ResvSize=c.main_data_begin*8),a>1e9){var et;for(et=0;et<d.MAX_HEADER_BUF;++et)i.header[et].write_timing-=a;a=0}return 0},this.copy_buffer=function(h,i,c,v,E){var et=l+1;if(et<=0)return 0;if(v!=0&&et>v)return-1;if(it.arraycopy(t,0,i,c,et),l=-1,o=0,E!=0){var ft=y(1);if(ft[0]=h.nMusicCRC,e.updateMusicCRC(ft,i,c,et),h.nMusicCRC=ft[0],et>0&&(h.VBR_seek_table.nBytesWritten+=et),h.decode_on_the_fly){for(var X=D([2,1152]),$=et,pt=-1,wt;pt!=0;)if(pt=b.hip_decode1_unclipped(h.hip,i,c,$,X[0],X[1]),$=0,pt==-1&&(pt=0),pt>0){if(h.findPeakSample){for(wt=0;wt<pt;wt++)X[0][wt]>h.PeakSample?h.PeakSample=X[0][wt]:-X[0][wt]>h.PeakSample&&(h.PeakSample=-X[0][wt]);if(h.channels_out>1)for(wt=0;wt<pt;wt++)X[1][wt]>h.PeakSample?h.PeakSample=X[1][wt]:-X[1][wt]>h.PeakSample&&(h.PeakSample=-X[1][wt])}if(h.findReplayGain&&w.AnalyzeSamples(h.rgdata,X[0],0,X[1],0,pt,h.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return et},this.init_bit_stream_w=function(h){t=G(C.LAME_MAXMP3BUFFER),h.h_ptr=h.w_ptr=0,h.header[h.h_ptr].write_timing=0,l=-1,o=0,a=0}}return Mr=u,Mr}var Tr,pa;function Yr(){if(pa)return Tr;pa=1;var q=Gt,it=q.System,x=q.VbrMode,G=q.ShortBlock,D=q.new_float,y=q.new_int_n,S=q.new_short_n,p=q.assert,k=hn,L=pn,d=ur,u=Fn,C=jn,g=Wn,B=Hr(),w=Xr,b=ae();function r(){var e=$e,t=this,a=128*1024;r.V9=410,r.V8=420,r.V7=430,r.V6=440,r.V5=450,r.V4=460,r.V3=470,r.V2=480,r.V1=490,r.V0=500,r.R3MIX=1e3,r.STANDARD=1001,r.EXTREME=1002,r.INSANE=1003,r.STANDARD_FAST=1004,r.EXTREME_FAST=1005,r.MEDIUM=1006,r.MEDIUM_FAST=1007;var l=16384+a;r.LAME_MAXMP3BUFFER=l;var o,A,M,P,V,U=new k,_,T,n;this.enc=new b,this.setModules=function(s,m,ot,J,mt,gt,ut,vt,It){o=s,A=m,M=ot,P=J,V=mt,_=gt,T=vt,n=It,this.enc.setModules(A,U,P,_)};function R(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=D(b.SBMAX_l),this.bo_s_weight=D(b.SBMAX_s)}function K(){this.lowerlimit=0}function N(s,m){this.lowpass=m}var Z=4294479419;function W(s){var m;return s.class_id=Z,m=s.internal_flags=new d,s.mode=e.NOT_SET,s.original=1,s.in_samplerate=44100,s.num_channels=2,s.num_samples=-1,s.bWriteVbrTag=!0,s.quality=-1,s.short_blocks=null,m.subblock_gain=-1,s.lowpassfreq=0,s.highpassfreq=0,s.lowpasswidth=-1,s.highpasswidth=-1,s.VBR=x.vbr_off,s.VBR_q=4,s.ATHcurve=-1,s.VBR_mean_bitrate_kbps=128,s.VBR_min_bitrate_kbps=0,s.VBR_max_bitrate_kbps=0,s.VBR_hard_min=0,m.VBR_min_bitrate=1,m.VBR_max_bitrate=13,s.quant_comp=-1,s.quant_comp_short=-1,s.msfix=-1,m.resample_ratio=1,m.OldValue[0]=180,m.OldValue[1]=180,m.CurrentStep[0]=4,m.CurrentStep[1]=4,m.masking_lower=1,m.nsPsy.attackthre=-1,m.nsPsy.attackthre_s=-1,s.scale=-1,s.athaa_type=-1,s.ATHtype=-1,s.athaa_loudapprox=-1,s.athaa_sensitivity=0,s.useTemporal=null,s.interChRatio=-1,m.mf_samples_to_encode=b.ENCDELAY+b.POSTDELAY,s.encoder_padding=0,m.mf_size=b.ENCDELAY-b.MDCTDELAY,s.findReplayGain=!1,s.decode_on_the_fly=!1,m.decode_on_the_fly=!1,m.findReplayGain=!1,m.findPeakSample=!1,m.RadioGain=0,m.AudiophileGain=0,m.noclipGainChange=0,m.noclipScale=-1,s.preset=0,s.write_id3tag_automatic=!0,0}this.lame_init=function(){var s=new L;return W(s),s.lame_allocated_gfp=1,s};function z(s){return s>1?0:s<=0?1:Math.cos(Math.PI/2*s)}this.nearestBitrateFullIndex=function(s){var m=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],ot=0,J=0,mt=0,gt=0;gt=m[16],mt=16,J=m[16],ot=16;for(var ut=0;ut<16;ut++)if(Math.max(s,m[ut+1])!=s){gt=m[ut+1],mt=ut+1,J=m[ut],ot=ut;break}return gt-s>s-J?ot:mt};function h(s,m){var ot=44100;return m>=48e3?ot=48e3:m>=44100?ot=44100:m>=32e3?ot=32e3:m>=24e3?ot=24e3:m>=22050?ot=22050:m>=16e3?ot=16e3:m>=12e3?ot=12e3:m>=11025?ot=11025:m>=8e3&&(ot=8e3),s==-1?ot:(s<=15960&&(ot=44100),s<=15250&&(ot=32e3),s<=11220&&(ot=24e3),s<=9970&&(ot=22050),s<=7230&&(ot=16e3),s<=5420&&(ot=12e3),s<=4510&&(ot=11025),s<=3970&&(ot=8e3),m<ot?m>44100?48e3:m>32e3?44100:m>24e3?32e3:m>22050?24e3:m>16e3?22050:m>12e3?16e3:m>11025?12e3:m>8e3?11025:8e3:ot)}function i(s,m){switch(s){case 44100:return m.version=1,0;case 48e3:return m.version=1,1;case 32e3:return m.version=1,2;case 22050:return m.version=0,0;case 24e3:return m.version=0,1;case 16e3:return m.version=0,2;case 11025:return m.version=0,0;case 12e3:return m.version=0,1;case 8e3:return m.version=0,2;default:return m.version=0,-1}}function c(s,m,ot){ot<16e3&&(m=2);for(var J=w.bitrate_table[m][1],mt=2;mt<=14;mt++)w.bitrate_table[m][mt]>0&&Math.abs(w.bitrate_table[m][mt]-s)<Math.abs(J-s)&&(J=w.bitrate_table[m][mt]);return J}function v(s,m,ot){ot<16e3&&(m=2);for(var J=0;J<=14;J++)if(w.bitrate_table[m][J]>0&&w.bitrate_table[m][J]==s)return J;return-1}function E(s,m){var ot=[new N(8,2e3),new N(16,3700),new N(24,3900),new N(32,5500),new N(40,7e3),new N(48,7500),new N(56,1e4),new N(64,11e3),new N(80,13500),new N(96,15100),new N(112,15600),new N(128,17e3),new N(160,17500),new N(192,18600),new N(224,19400),new N(256,19700),new N(320,20500)],J=t.nearestBitrateFullIndex(m);s.lowerlimit=ot[J].lowpass}function et(s){var m=s.internal_flags,ot=32,J=-1;if(m.lowpass1>0){for(var mt=999,gt=0;gt<=31;gt++){var ut=gt/31;ut>=m.lowpass2&&(ot=Math.min(ot,gt)),m.lowpass1<ut&&ut<m.lowpass2&&(mt=Math.min(mt,gt))}mt==999?m.lowpass1=(ot-.75)/31:m.lowpass1=(mt-.75)/31,m.lowpass2=ot/31}if(m.highpass2>0&&m.highpass2<.9*(.75/31)&&(m.highpass1=0,m.highpass2=0,it.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),m.highpass2>0){for(var vt=-1,gt=0;gt<=31;gt++){var ut=gt/31;ut<=m.highpass1&&(J=Math.max(J,gt)),m.highpass1<ut&&ut<m.highpass2&&(vt=Math.max(vt,gt))}m.highpass1=J/31,vt==-1?m.highpass2=(J+.75)/31:m.highpass2=(vt+.75)/31}for(var gt=0;gt<32;gt++){var It,Bt,ut=gt/31;m.highpass2>m.highpass1?It=z((m.highpass2-ut)/(m.highpass2-m.highpass1+1e-20)):It=1,m.lowpass2>m.lowpass1?Bt=z((ut-m.lowpass1)/(m.lowpass2-m.lowpass1+1e-20)):Bt=1,m.amp_filter[gt]=It*Bt}}function ft(s){var m=s.internal_flags;switch(s.quality){default:case 9:m.psymodel=0,m.noise_shaping=0,m.noise_shaping_amp=0,m.noise_shaping_stop=0,m.use_best_huffman=0,m.full_outer_loop=0;break;case 8:s.quality=7;case 7:m.psymodel=1,m.noise_shaping=0,m.noise_shaping_amp=0,m.noise_shaping_stop=0,m.use_best_huffman=0,m.full_outer_loop=0;break;case 6:m.psymodel=1,m.noise_shaping==0&&(m.noise_shaping=1),m.noise_shaping_amp=0,m.noise_shaping_stop=0,m.subblock_gain==-1&&(m.subblock_gain=1),m.use_best_huffman=0,m.full_outer_loop=0;break;case 5:m.psymodel=1,m.noise_shaping==0&&(m.noise_shaping=1),m.noise_shaping_amp=0,m.noise_shaping_stop=0,m.subblock_gain==-1&&(m.subblock_gain=1),m.use_best_huffman=0,m.full_outer_loop=0;break;case 4:m.psymodel=1,m.noise_shaping==0&&(m.noise_shaping=1),m.noise_shaping_amp=0,m.noise_shaping_stop=0,m.subblock_gain==-1&&(m.subblock_gain=1),m.use_best_huffman=1,m.full_outer_loop=0;break;case 3:m.psymodel=1,m.noise_shaping==0&&(m.noise_shaping=1),m.noise_shaping_amp=1,m.noise_shaping_stop=1,m.subblock_gain==-1&&(m.subblock_gain=1),m.use_best_huffman=1,m.full_outer_loop=0;break;case 2:m.psymodel=1,m.noise_shaping==0&&(m.noise_shaping=1),m.substep_shaping==0&&(m.substep_shaping=2),m.noise_shaping_amp=1,m.noise_shaping_stop=1,m.subblock_gain==-1&&(m.subblock_gain=1),m.use_best_huffman=1,m.full_outer_loop=0;break;case 1:m.psymodel=1,m.noise_shaping==0&&(m.noise_shaping=1),m.substep_shaping==0&&(m.substep_shaping=2),m.noise_shaping_amp=2,m.noise_shaping_stop=1,m.subblock_gain==-1&&(m.subblock_gain=1),m.use_best_huffman=1,m.full_outer_loop=0;break;case 0:m.psymodel=1,m.noise_shaping==0&&(m.noise_shaping=1),m.substep_shaping==0&&(m.substep_shaping=2),m.noise_shaping_amp=2,m.noise_shaping_stop=1,m.subblock_gain==-1&&(m.subblock_gain=1),m.use_best_huffman=1,m.full_outer_loop=0;break}}function X(s){var m=s.internal_flags;s.frameNum=0,s.write_id3tag_automatic&&T.id3tag_write_v2(s),m.bitrate_stereoMode_Hist=y([16,5]),m.bitrate_blockType_Hist=y([16,6]),m.PeakSample=0,s.bWriteVbrTag&&_.InitVbrTag(s)}this.lame_init_params=function(s){var m=s.internal_flags;if(m.Class_ID=0,m.ATH==null&&(m.ATH=new u),m.PSY==null&&(m.PSY=new R),m.rgdata==null&&(m.rgdata=new C),m.channels_in=s.num_channels,m.channels_in==1&&(s.mode=e.MONO),m.channels_out=s.mode==e.MONO?1:2,m.mode_ext=b.MPG_MD_MS_LR,s.mode==e.MONO&&(s.force_ms=!1),s.VBR==x.vbr_off&&s.VBR_mean_bitrate_kbps!=128&&s.brate==0&&(s.brate=s.VBR_mean_bitrate_kbps),s.VBR==x.vbr_off||s.VBR==x.vbr_mtrh||s.VBR==x.vbr_mt||(s.free_format=!1),s.VBR==x.vbr_off&&s.brate==0&&B.EQ(s.compression_ratio,0)&&(s.compression_ratio=11.025),s.VBR==x.vbr_off&&s.compression_ratio>0&&(s.out_samplerate==0&&(s.out_samplerate=map2MP3Frequency(int(.97*s.in_samplerate))),s.brate=0|s.out_samplerate*16*m.channels_out/(1e3*s.compression_ratio),m.samplerate_index=i(s.out_samplerate,s),s.free_format||(s.brate=c(s.brate,s.version,s.out_samplerate))),s.out_samplerate!=0&&(s.out_samplerate<16e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,64)):s.out_samplerate<32e3?(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,8),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,160)):(s.VBR_mean_bitrate_kbps=Math.max(s.VBR_mean_bitrate_kbps,32),s.VBR_mean_bitrate_kbps=Math.min(s.VBR_mean_bitrate_kbps,320))),s.lowpassfreq==0){var ot=16e3;switch(s.VBR){case x.vbr_off:{var J=new K;E(J,s.brate),ot=J.lowerlimit;break}case x.vbr_abr:{var J=new K;E(J,s.VBR_mean_bitrate_kbps),ot=J.lowerlimit;break}case x.vbr_rh:{var mt=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var gt=mt[s.VBR_q],ut=mt[s.VBR_q+1],vt=s.VBR_q_frac;ot=linear_int(gt,ut,vt)}else ot=19500;break}default:{var mt=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=s.VBR_q&&s.VBR_q<=9){var gt=mt[s.VBR_q],ut=mt[s.VBR_q+1],vt=s.VBR_q_frac;ot=linear_int(gt,ut,vt)}else ot=19500}}s.mode==e.MONO&&(s.VBR==x.vbr_off||s.VBR==x.vbr_abr)&&(ot*=1.5),s.lowpassfreq=ot|0}if(s.out_samplerate==0&&(2*s.lowpassfreq>s.in_samplerate&&(s.lowpassfreq=s.in_samplerate/2),s.out_samplerate=h(s.lowpassfreq|0,s.in_samplerate)),s.lowpassfreq=Math.min(20500,s.lowpassfreq),s.lowpassfreq=Math.min(s.out_samplerate/2,s.lowpassfreq),s.VBR==x.vbr_off&&(s.compression_ratio=s.out_samplerate*16*m.channels_out/(1e3*s.brate)),s.VBR==x.vbr_abr&&(s.compression_ratio=s.out_samplerate*16*m.channels_out/(1e3*s.VBR_mean_bitrate_kbps)),s.bWriteVbrTag||(s.findReplayGain=!1,s.decode_on_the_fly=!1,m.findPeakSample=!1),m.findReplayGain=s.findReplayGain,m.decode_on_the_fly=s.decode_on_the_fly,m.decode_on_the_fly&&(m.findPeakSample=!0),m.findReplayGain&&o.InitGainAnalysis(m.rgdata,s.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return s.internal_flags=null,-6;switch(m.decode_on_the_fly&&!s.decode_only&&(m.hip!=null&&n.hip_decode_exit(m.hip),m.hip=n.hip_decode_init()),m.mode_gr=s.out_samplerate<=24e3?1:2,s.framesize=576*m.mode_gr,s.encoder_delay=b.ENCDELAY,m.resample_ratio=s.in_samplerate/s.out_samplerate,s.VBR){case x.vbr_mt:case x.vbr_rh:case x.vbr_mtrh:{var It=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];s.compression_ratio=It[s.VBR_q]}break;case x.vbr_abr:s.compression_ratio=s.out_samplerate*16*m.channels_out/(1e3*s.VBR_mean_bitrate_kbps);break;default:s.compression_ratio=s.out_samplerate*16*m.channels_out/(1e3*s.brate);break}if(s.mode==e.NOT_SET&&(s.mode=e.JOINT_STEREO),s.highpassfreq>0?(m.highpass1=2*s.highpassfreq,s.highpasswidth>=0?m.highpass2=2*(s.highpassfreq+s.highpasswidth):m.highpass2=2*s.highpassfreq,m.highpass1/=s.out_samplerate,m.highpass2/=s.out_samplerate):(m.highpass1=0,m.highpass2=0),s.lowpassfreq>0?(m.lowpass2=2*s.lowpassfreq,s.lowpasswidth>=0?(m.lowpass1=2*(s.lowpassfreq-s.lowpasswidth),m.lowpass1<0&&(m.lowpass1=0)):m.lowpass1=2*s.lowpassfreq,m.lowpass1/=s.out_samplerate,m.lowpass2/=s.out_samplerate):(m.lowpass1=0,m.lowpass2=0),et(s),m.samplerate_index=i(s.out_samplerate,s),m.samplerate_index<0)return s.internal_flags=null,-1;if(s.VBR==x.vbr_off){if(s.free_format)m.bitrate_index=0;else if(s.brate=c(s.brate,s.version,s.out_samplerate),m.bitrate_index=v(s.brate,s.version,s.out_samplerate),m.bitrate_index<=0)return s.internal_flags=null,-1}else m.bitrate_index=1;s.analysis&&(s.bWriteVbrTag=!1),m.pinfo!=null&&(s.bWriteVbrTag=!1),A.init_bit_stream_w(m);for(var Bt=m.samplerate_index+3*s.version+6*(s.out_samplerate<16e3?1:0),xt=0;xt<b.SBMAX_l+1;xt++)m.scalefac_band.l[xt]=P.sfBandIndex[Bt].l[xt];for(var xt=0;xt<b.PSFB21+1;xt++){var jt=(m.scalefac_band.l[22]-m.scalefac_band.l[21])/b.PSFB21,Xt=m.scalefac_band.l[21]+xt*jt;m.scalefac_band.psfb21[xt]=Xt}m.scalefac_band.psfb21[b.PSFB21]=576;for(var xt=0;xt<b.SBMAX_s+1;xt++)m.scalefac_band.s[xt]=P.sfBandIndex[Bt].s[xt];for(var xt=0;xt<b.PSFB12+1;xt++){var jt=(m.scalefac_band.s[13]-m.scalefac_band.s[12])/b.PSFB12,Xt=m.scalefac_band.s[12]+xt*jt;m.scalefac_band.psfb12[xt]=Xt}m.scalefac_band.psfb12[b.PSFB12]=192,s.version==1?m.sideinfo_len=m.channels_out==1?21:36:m.sideinfo_len=m.channels_out==1?13:21,s.error_protection&&(m.sideinfo_len+=2),X(s),m.Class_ID=Z;{var I;for(I=0;I<19;I++)m.nsPsy.pefirbuf[I]=700*m.mode_gr*m.channels_out;s.ATHtype==-1&&(s.ATHtype=4)}switch(p(s.VBR_q<=9),p(s.VBR_q>=0),s.VBR){case x.vbr_mt:s.VBR=x.vbr_mtrh;case x.vbr_mtrh:{s.useTemporal==null&&(s.useTemporal=!1),M.apply_preset(s,500-s.VBR_q*10,0),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),s.quality<5&&(s.quality=0),s.quality>5&&(s.quality=5),m.PSY.mask_adjust=s.maskingadjust,m.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?m.sfb21_extra=!1:m.sfb21_extra=s.out_samplerate>44e3,m.iteration_loop=new VBRNewIterationLoop(V);break}case x.vbr_rh:{M.apply_preset(s,500-s.VBR_q*10,0),m.PSY.mask_adjust=s.maskingadjust,m.PSY.mask_adjust_short=s.maskingadjust_short,s.experimentalY?m.sfb21_extra=!1:m.sfb21_extra=s.out_samplerate>44e3,s.quality>6&&(s.quality=6),s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),m.iteration_loop=new VBROldIterationLoop(V);break}default:{var O;m.sfb21_extra=!1,s.quality<0&&(s.quality=LAME_DEFAULT_QUALITY),O=s.VBR,O==x.vbr_off&&(s.VBR_mean_bitrate_kbps=s.brate),M.apply_preset(s,s.VBR_mean_bitrate_kbps,0),s.VBR=O,m.PSY.mask_adjust=s.maskingadjust,m.PSY.mask_adjust_short=s.maskingadjust_short,O==x.vbr_off?m.iteration_loop=new g(V):m.iteration_loop=new ABRIterationLoop(V);break}}if(p(s.scale>=0),s.VBR!=x.vbr_off){if(m.VBR_min_bitrate=1,m.VBR_max_bitrate=14,s.out_samplerate<16e3&&(m.VBR_max_bitrate=8),s.VBR_min_bitrate_kbps!=0&&(s.VBR_min_bitrate_kbps=c(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),m.VBR_min_bitrate=v(s.VBR_min_bitrate_kbps,s.version,s.out_samplerate),m.VBR_min_bitrate<0)||s.VBR_max_bitrate_kbps!=0&&(s.VBR_max_bitrate_kbps=c(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),m.VBR_max_bitrate=v(s.VBR_max_bitrate_kbps,s.version,s.out_samplerate),m.VBR_max_bitrate<0))return-1;s.VBR_min_bitrate_kbps=w.bitrate_table[s.version][m.VBR_min_bitrate],s.VBR_max_bitrate_kbps=w.bitrate_table[s.version][m.VBR_max_bitrate],s.VBR_mean_bitrate_kbps=Math.min(w.bitrate_table[s.version][m.VBR_max_bitrate],s.VBR_mean_bitrate_kbps),s.VBR_mean_bitrate_kbps=Math.max(w.bitrate_table[s.version][m.VBR_min_bitrate],s.VBR_mean_bitrate_kbps)}return s.tune&&(m.PSY.mask_adjust+=s.tune_value_a,m.PSY.mask_adjust_short+=s.tune_value_a),ft(s),p(s.scale>=0),s.athaa_type<0?m.ATH.useAdjust=3:m.ATH.useAdjust=s.athaa_type,m.ATH.aaSensitivityP=Math.pow(10,s.athaa_sensitivity/-10),s.short_blocks==null&&(s.short_blocks=G.short_block_allowed),s.short_blocks==G.short_block_allowed&&(s.mode==e.JOINT_STEREO||s.mode==e.STEREO)&&(s.short_blocks=G.short_block_coupled),s.quant_comp<0&&(s.quant_comp=1),s.quant_comp_short<0&&(s.quant_comp_short=0),s.msfix<0&&(s.msfix=0),s.exp_nspsytune=s.exp_nspsytune|1,s.internal_flags.nsPsy.attackthre<0&&(s.internal_flags.nsPsy.attackthre=k.NSATTACKTHRE),s.internal_flags.nsPsy.attackthre_s<0&&(s.internal_flags.nsPsy.attackthre_s=k.NSATTACKTHRE_S),p(s.scale>=0),s.scale<0&&(s.scale=1),s.ATHtype<0&&(s.ATHtype=4),s.ATHcurve<0&&(s.ATHcurve=4),s.athaa_loudapprox<0&&(s.athaa_loudapprox=2),s.interChRatio<0&&(s.interChRatio=0),s.useTemporal==null&&(s.useTemporal=!0),m.slot_lag=m.frac_SpF=0,s.VBR==x.vbr_off&&(m.slot_lag=m.frac_SpF=(s.version+1)*72e3*s.brate%s.out_samplerate|0),P.iteration_init(s),U.psymodel_init(s),p(s.scale>=0),0};function $(s,m){(s.in_buffer_0==null||s.in_buffer_nsamples<m)&&(s.in_buffer_0=D(m),s.in_buffer_1=D(m),s.in_buffer_nsamples=m)}this.lame_encode_flush=function(s,m,ot,J){var mt=s.internal_flags,gt=S([2,1152]),ut=0,vt,It,Bt,xt,jt=mt.mf_samples_to_encode-b.POSTDELAY,Xt=pt(s);if(mt.mf_samples_to_encode<1)return 0;for(vt=0,s.in_samplerate!=s.out_samplerate&&(jt+=16*s.out_samplerate/s.in_samplerate),Bt=s.framesize-jt%s.framesize,Bt<576&&(Bt+=s.framesize),s.encoder_padding=Bt,xt=(jt+Bt)/s.framesize;xt>0&&ut>=0;){var I=Xt-mt.mf_size,O=s.frameNum;I*=s.in_samplerate,I/=s.out_samplerate,I>1152&&(I=1152),I<1&&(I=1),It=J-vt,J==0&&(It=0),ut=this.lame_encode_buffer(s,gt[0],gt[1],I,m,ot,It),ot+=ut,vt+=ut,xt-=O!=s.frameNum?1:0}if(mt.mf_samples_to_encode=0,ut<0||(It=J-vt,J==0&&(It=0),A.flush_bitstream(s),ut=A.copy_buffer(mt,m,ot,It,1),ut<0))return ut;if(ot+=ut,vt+=ut,It=J-vt,J==0&&(It=0),s.write_id3tag_automatic){if(T.id3tag_write_v1(s),ut=A.copy_buffer(mt,m,ot,It,0),ut<0)return ut;vt+=ut}return vt},this.lame_encode_buffer=function(s,m,ot,J,mt,gt,ut){var vt=s.internal_flags,It=[null,null];if(vt.Class_ID!=Z)return-3;if(J==0)return 0;$(vt,J),It[0]=vt.in_buffer_0,It[1]=vt.in_buffer_1;for(var Bt=0;Bt<J;Bt++)It[0][Bt]=m[Bt],vt.channels_in>1&&(It[1][Bt]=ot[Bt]);return wt(s,It[0],It[1],J,mt,gt,ut)};function pt(s){var m=b.BLKSIZE+s.framesize-b.FFTOFFSET;return m=Math.max(m,512+s.framesize-32),m}function wt(s,m,ot,J,mt,gt,ut){var vt=s.internal_flags,It=0,Bt,xt,jt,Xt,I,O=[null,null],Y=[null,null];if(vt.Class_ID!=Z)return-3;if(J==0)return 0;if(I=A.copy_buffer(vt,mt,gt,ut,0),I<0)return I;if(gt+=I,It+=I,Y[0]=m,Y[1]=ot,B.NEQ(s.scale,0)&&B.NEQ(s.scale,1))for(xt=0;xt<J;++xt)Y[0][xt]*=s.scale,vt.channels_out==2&&(Y[1][xt]*=s.scale);if(B.NEQ(s.scale_left,0)&&B.NEQ(s.scale_left,1))for(xt=0;xt<J;++xt)Y[0][xt]*=s.scale_left;if(B.NEQ(s.scale_right,0)&&B.NEQ(s.scale_right,1))for(xt=0;xt<J;++xt)Y[1][xt]*=s.scale_right;if(s.num_channels==2&&vt.channels_out==1)for(xt=0;xt<J;++xt)Y[0][xt]=.5*(Y[0][xt]+Y[1][xt]),Y[1][xt]=0;Xt=pt(s),O[0]=vt.mfbuf[0],O[1]=vt.mfbuf[1];for(var Q=0;J>0;){var tt=[null,null],F=0,nt=0;tt[0]=Y[0],tt[1]=Y[1];var lt=new Mt;if(j(s,O,tt,Q,J,lt),F=lt.n_in,nt=lt.n_out,vt.findReplayGain&&!vt.decode_on_the_fly&&o.AnalyzeSamples(vt.rgdata,O[0],vt.mf_size,O[1],vt.mf_size,nt,vt.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(J-=F,Q+=F,vt.channels_out==2,vt.mf_size+=nt,p(vt.mf_size<=d.MFSIZE),vt.mf_samples_to_encode<1&&(vt.mf_samples_to_encode=b.ENCDELAY+b.POSTDELAY),vt.mf_samples_to_encode+=nt,vt.mf_size>=Xt){var at=ut-It;if(ut==0&&(at=0),Bt=Et(s,O[0],O[1],mt,gt,at),Bt<0)return Bt;for(gt+=Bt,It+=Bt,vt.mf_size-=s.framesize,vt.mf_samples_to_encode-=s.framesize,jt=0;jt<vt.channels_out;jt++)for(xt=0;xt<vt.mf_size;xt++)O[jt][xt]=O[jt][xt+s.framesize]}}return It}function Et(s,m,ot,J,mt,gt){var ut=t.enc.lame_encode_mp3_frame(s,m,ot,J,mt,gt);return s.frameNum++,ut}function Mt(){this.n_in=0,this.n_out=0}function f(){this.num_used=0}function st(s,m){return m!=0?st(m,s%m):s}function rt(s,m,ot){var J=Math.PI*m;s/=ot,s<0&&(s=0),s>1&&(s=1);var mt=s-.5,gt=.42-.5*Math.cos(2*s*Math.PI)+.08*Math.cos(4*s*Math.PI);return Math.abs(mt)<1e-9?J/Math.PI:gt*Math.sin(ot*J*mt)/(Math.PI*ot*mt)}function H(s,m,ot,J,mt,gt,ut,vt,It){var Bt=s.internal_flags,xt,jt=0,Xt,I=s.out_samplerate/st(s.out_samplerate,s.in_samplerate);I>d.BPC&&(I=d.BPC);var O=Math.abs(Bt.resample_ratio-Math.floor(.5+Bt.resample_ratio))<1e-4?1:0,Y=1/Bt.resample_ratio;Y>1&&(Y=1);var Q=31;Q%2==0&&--Q,Q+=O;var tt=Q+1;if(Bt.fill_buffer_resample_init==0){for(Bt.inbuf_old[0]=D(tt),Bt.inbuf_old[1]=D(tt),xt=0;xt<=2*I;++xt)Bt.blackfilt[xt]=D(tt);for(Bt.itime[0]=0,Bt.itime[1]=0,jt=0;jt<=2*I;jt++){var F=0,nt=(jt-I)/(2*I);for(xt=0;xt<=Q;xt++)F+=Bt.blackfilt[jt][xt]=rt(xt-nt,Y,Q);for(xt=0;xt<=Q;xt++)Bt.blackfilt[jt][xt]/=F}Bt.fill_buffer_resample_init=1}var lt=Bt.inbuf_old[It];for(Xt=0;Xt<J;Xt++){var at,dt;if(at=Xt*Bt.resample_ratio,jt=0|Math.floor(at-Bt.itime[It]),Q+jt-Q/2>=ut)break;var nt=at-Bt.itime[It]-(jt+.5*(Q%2));dt=0|Math.floor(nt*2*I+I+.5);var _t=0;for(xt=0;xt<=Q;++xt){var ht=0|xt+jt-Q/2,Rt;Rt=ht<0?lt[tt+ht]:mt[gt+ht],_t+=Rt*Bt.blackfilt[dt][xt]}m[ot+Xt]=_t}if(vt.num_used=Math.min(ut,Q+jt-Q/2),Bt.itime[It]+=vt.num_used-Xt*Bt.resample_ratio,vt.num_used>=tt)for(xt=0;xt<tt;xt++)lt[xt]=mt[gt+vt.num_used+xt-tt];else{var Dt=tt-vt.num_used;for(xt=0;xt<Dt;++xt)lt[xt]=lt[xt+vt.num_used];for(jt=0;xt<tt;++xt,++jt)lt[xt]=mt[gt+jt];p(jt==vt.num_used)}return Xt}function j(s,m,ot,J,mt,gt){var ut=s.internal_flags;if(ut.resample_ratio<.9999||ut.resample_ratio>1.0001)for(var vt=0;vt<ut.channels_out;vt++){var It=new f;gt.n_out=H(s,m[vt],ut.mf_size,s.framesize,ot[vt],J,mt,It,vt),gt.n_in=It.num_used}else{gt.n_out=Math.min(s.framesize,mt),gt.n_in=gt.n_out;for(var Bt=0;Bt<gt.n_out;++Bt)m[0][ut.mf_size+Bt]=ot[0][J+Bt],ut.channels_out==2&&(m[1][ut.mf_size+Bt]=ot[1][J+Bt])}}}return Tr=r,Tr}var Gn=Gt,ye=Gn.VbrMode;function Qn(){var q=Yr();function it(d,u,C,g,B,w,b,r,e,t,a,l,o,A,M){this.vbr_q=d,this.quant_comp=u,this.quant_comp_s=C,this.expY=g,this.st_lrm=B,this.st_s=w,this.masking_adj=b,this.masking_adj_short=r,this.ath_lower=e,this.ath_curve=t,this.ath_sensitivity=a,this.interch=l,this.safejoint=o,this.sfb21mod=A,this.msfix=M}function x(d,u,C,g,B,w,b,r,e,t,a,l,o,A){this.quant_comp=u,this.quant_comp_s=C,this.safejoint=g,this.nsmsfix=B,this.st_lrm=w,this.st_s=b,this.nsbass=r,this.scale=e,this.masking_adj=t,this.ath_lower=a,this.ath_curve=l,this.interch=o,this.sfscale=A}var G;this.setModules=function(d){G=d};var D=[new it(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new it(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new it(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new it(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new it(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new it(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new it(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new it(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new it(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new it(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new it(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],y=[new it(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new it(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new it(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new it(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new it(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new it(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new it(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new it(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new it(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new it(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new it(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function S(d,u,C){var g=d.VBR==ye.vbr_rh?D:y,B=d.VBR_q_frac,w=g[u],b=g[u+1],r=w;w.st_lrm=w.st_lrm+B*(b.st_lrm-w.st_lrm),w.st_s=w.st_s+B*(b.st_s-w.st_s),w.masking_adj=w.masking_adj+B*(b.masking_adj-w.masking_adj),w.masking_adj_short=w.masking_adj_short+B*(b.masking_adj_short-w.masking_adj_short),w.ath_lower=w.ath_lower+B*(b.ath_lower-w.ath_lower),w.ath_curve=w.ath_curve+B*(b.ath_curve-w.ath_curve),w.ath_sensitivity=w.ath_sensitivity+B*(b.ath_sensitivity-w.ath_sensitivity),w.interch=w.interch+B*(b.interch-w.interch),w.msfix=w.msfix+B*(b.msfix-w.msfix),L(d,r.vbr_q),C!=0?d.quant_comp=r.quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=r.quant_comp),C!=0?d.quant_comp_short=r.quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=r.quant_comp_s),r.expY!=0&&(d.experimentalY=r.expY!=0),C!=0?d.internal_flags.nsPsy.attackthre=r.st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=r.st_lrm),C!=0?d.internal_flags.nsPsy.attackthre_s=r.st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=r.st_s),C!=0?d.maskingadjust=r.masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=r.masking_adj),C!=0?d.maskingadjust_short=r.masking_adj_short:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=r.masking_adj_short),C!=0?d.ATHlower=-r.ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-r.ath_lower/10),C!=0?d.ATHcurve=r.ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=r.ath_curve),C!=0?d.athaa_sensitivity=r.ath_sensitivity:Math.abs(d.athaa_sensitivity- -1)>0||(d.athaa_sensitivity=r.ath_sensitivity),r.interch>0&&(C!=0?d.interChRatio=r.interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=r.interch)),r.safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|r.safejoint),r.sfb21mod>0&&(d.exp_nspsytune=d.exp_nspsytune|r.sfb21mod<<20),C!=0?d.msfix=r.msfix:Math.abs(d.msfix- -1)>0||(d.msfix=r.msfix),C==0&&(d.VBR_q=u,d.VBR_q_frac=B)}var p=[new x(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new x(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new x(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new x(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new x(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new x(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new x(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new x(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new x(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new x(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new x(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new x(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new x(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new x(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new x(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new x(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new x(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function k(d,u,C){var g=u,B=G.nearestBitrateFullIndex(u);if(d.VBR=ye.vbr_abr,d.VBR_mean_bitrate_kbps=g,d.VBR_mean_bitrate_kbps=Math.min(d.VBR_mean_bitrate_kbps,320),d.VBR_mean_bitrate_kbps=Math.max(d.VBR_mean_bitrate_kbps,8),d.brate=d.VBR_mean_bitrate_kbps,d.VBR_mean_bitrate_kbps>320&&(d.disable_reservoir=!0),p[B].safejoint>0&&(d.exp_nspsytune=d.exp_nspsytune|2),p[B].sfscale>0&&(d.internal_flags.noise_shaping=2),Math.abs(p[B].nsbass)>0){var w=int(p[B].nsbass*4);w<0&&(w+=64),d.exp_nspsytune=d.exp_nspsytune|w<<2}return C!=0?d.quant_comp=p[B].quant_comp:Math.abs(d.quant_comp- -1)>0||(d.quant_comp=p[B].quant_comp),C!=0?d.quant_comp_short=p[B].quant_comp_s:Math.abs(d.quant_comp_short- -1)>0||(d.quant_comp_short=p[B].quant_comp_s),C!=0?d.msfix=p[B].nsmsfix:Math.abs(d.msfix- -1)>0||(d.msfix=p[B].nsmsfix),C!=0?d.internal_flags.nsPsy.attackthre=p[B].st_lrm:Math.abs(d.internal_flags.nsPsy.attackthre- -1)>0||(d.internal_flags.nsPsy.attackthre=p[B].st_lrm),C!=0?d.internal_flags.nsPsy.attackthre_s=p[B].st_s:Math.abs(d.internal_flags.nsPsy.attackthre_s- -1)>0||(d.internal_flags.nsPsy.attackthre_s=p[B].st_s),C!=0?d.scale=p[B].scale:Math.abs(d.scale- -1)>0||(d.scale=p[B].scale),C!=0?d.maskingadjust=p[B].masking_adj:Math.abs(d.maskingadjust-0)>0||(d.maskingadjust=p[B].masking_adj),p[B].masking_adj>0?C!=0?d.maskingadjust_short=p[B].masking_adj*.9:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=p[B].masking_adj*.9):C!=0?d.maskingadjust_short=p[B].masking_adj*1.1:Math.abs(d.maskingadjust_short-0)>0||(d.maskingadjust_short=p[B].masking_adj*1.1),C!=0?d.ATHlower=-p[B].ath_lower/10:Math.abs(-d.ATHlower*10-0)>0||(d.ATHlower=-p[B].ath_lower/10),C!=0?d.ATHcurve=p[B].ath_curve:Math.abs(d.ATHcurve- -1)>0||(d.ATHcurve=p[B].ath_curve),C!=0?d.interChRatio=p[B].interch:Math.abs(d.interChRatio- -1)>0||(d.interChRatio=p[B].interch),u}this.apply_preset=function(d,u,C){switch(u){case q.R3MIX:{u=q.V3,d.VBR=ye.vbr_mtrh;break}case q.MEDIUM:{u=q.V4,d.VBR=ye.vbr_rh;break}case q.MEDIUM_FAST:{u=q.V4,d.VBR=ye.vbr_mtrh;break}case q.STANDARD:{u=q.V2,d.VBR=ye.vbr_rh;break}case q.STANDARD_FAST:{u=q.V2,d.VBR=ye.vbr_mtrh;break}case q.EXTREME:{u=q.V0,d.VBR=ye.vbr_rh;break}case q.EXTREME_FAST:{u=q.V0,d.VBR=ye.vbr_mtrh;break}case q.INSANE:return u=320,d.preset=u,k(d,u,C),d.VBR=ye.vbr_off,u}switch(d.preset=u,u){case q.V9:return S(d,9,C),u;case q.V8:return S(d,8,C),u;case q.V7:return S(d,7,C),u;case q.V6:return S(d,6,C),u;case q.V5:return S(d,5,C),u;case q.V4:return S(d,4,C),u;case q.V3:return S(d,3,C),u;case q.V2:return S(d,2,C),u;case q.V1:return S(d,1,C),u;case q.V0:return S(d,0,C),u}return 8<=u&&u<=320?k(d,u,C):(d.preset=0,u)};function L(d,u){var C=0;return 0>u&&(C=-1,u=0),9<u&&(C=-1,u=9),d.VBR_q=u,d.VBR_q_frac=0,C}}var Kn=Qn;function Jn(){this.setModules=function(q,it){}}var $n=Jn;function ts(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var es=ts,qa=Gt,ma=qa.new_float,rs=qa.new_int;function as(){this.global_gain=0,this.sfb_count1=0,this.step=rs(39),this.noise=ma(39),this.noise_log=ma(39)}var ns=as,je=Gt,Be=je.System,ba=je.VbrMode,Ir=je.Util,ze=je.Arrays,qe=je.new_float,We=je.assert,ss=$n,Or=es,is=ns,Yt=ae(),ga=Fr,va=fr;function os(){var q;this.rv=null;var it;this.qupvt=null;var x,G=new ss,D;this.setModules=function(r,e,t,a){q=r,it=e,this.rv=e,x=t,this.qupvt=t,D=a,G.setModules(x,D)},this.ms_convert=function(r,e){for(var t=0;t<576;++t){var a=r.tt[e][0].xr[t],l=r.tt[e][1].xr[t];r.tt[e][0].xr[t]=(a+l)*(Ir.SQRT2*.5),r.tt[e][1].xr[t]=(a-l)*(Ir.SQRT2*.5)}};function y(r,e,t,a){a=0;for(var l=0;l<=t;++l){var o=Math.abs(r.xr[l]);a+=o,e[l]=Math.sqrt(o*Math.sqrt(o)),e[l]>r.xrpow_max&&(r.xrpow_max=e[l])}return a}this.init_xrpow=function(r,e,t){var a=0,l=0|e.max_nonzero_coeff;if(e.xrpow_max=0,ze.fill(t,l,576,0),a=y(e,t,l,a),a>1e-20){var o=0;r.substep_shaping&2&&(o=1);for(var A=0;A<e.psymax;A++)r.pseudohalf[A]=o;return!0}return ze.fill(e.l3_enc,0,576,0),!1};function S(r,e){var t=r.ATH,a=e.xr;if(e.block_type!=Yt.SHORT_TYPE)for(var l=!1,o=Yt.PSFB21-1;o>=0&&!l;o--){var A=r.scalefac_band.psfb21[o],M=r.scalefac_band.psfb21[o+1],P=x.athAdjust(t.adjust,t.psfb21[o],t.floor);r.nsPsy.longfact[21]>1e-12&&(P*=r.nsPsy.longfact[21]);for(var V=M-1;V>=A;V--)if(Math.abs(a[V])<P)a[V]=0;else{l=!0;break}}else for(var U=0;U<3;U++)for(var l=!1,o=Yt.PSFB12-1;o>=0&&!l;o--){var A=r.scalefac_band.s[12]*3+(r.scalefac_band.s[13]-r.scalefac_band.s[12])*U+(r.scalefac_band.psfb12[o]-r.scalefac_band.psfb12[0]),M=A+(r.scalefac_band.psfb12[o+1]-r.scalefac_band.psfb12[o]),_=x.athAdjust(t.adjust,t.psfb12[o],t.floor);r.nsPsy.shortfact[12]>1e-12&&(_*=r.nsPsy.shortfact[12]);for(var V=M-1;V>=A;V--)if(Math.abs(a[V])<_)a[V]=0;else{l=!0;break}}}this.init_outer_loop=function(r,e){e.part2_3_length=0,e.big_values=0,e.count1=0,e.global_gain=210,e.scalefac_compress=0,e.table_select[0]=0,e.table_select[1]=0,e.table_select[2]=0,e.subblock_gain[0]=0,e.subblock_gain[1]=0,e.subblock_gain[2]=0,e.subblock_gain[3]=0,e.region0_count=0,e.region1_count=0,e.preflag=0,e.scalefac_scale=0,e.count1table_select=0,e.part2_length=0,e.sfb_lmax=Yt.SBPSY_l,e.sfb_smin=Yt.SBPSY_s,e.psy_lmax=r.sfb21_extra?Yt.SBMAX_l:Yt.SBPSY_l,e.psymax=e.psy_lmax,e.sfbmax=e.sfb_lmax,e.sfbdivide=11;for(var t=0;t<Yt.SBMAX_l;t++)e.width[t]=r.scalefac_band.l[t+1]-r.scalefac_band.l[t],e.window[t]=3;if(e.block_type==Yt.SHORT_TYPE){var a=qe(576);e.sfb_smin=0,e.sfb_lmax=0,e.mixed_block_flag!=0&&(e.sfb_smin=3,e.sfb_lmax=r.mode_gr*2+4),e.psymax=e.sfb_lmax+3*((r.sfb21_extra?Yt.SBMAX_s:Yt.SBPSY_s)-e.sfb_smin),e.sfbmax=e.sfb_lmax+3*(Yt.SBPSY_s-e.sfb_smin),e.sfbdivide=e.sfbmax-18,e.psy_lmax=e.sfb_lmax;var l=r.scalefac_band.l[e.sfb_lmax];Be.arraycopy(e.xr,0,a,0,576);for(var t=e.sfb_smin;t<Yt.SBMAX_s;t++)for(var o=r.scalefac_band.s[t],A=r.scalefac_band.s[t+1],M=0;M<3;M++)for(var P=o;P<A;P++)e.xr[l++]=a[3*P+M];for(var V=e.sfb_lmax,t=e.sfb_smin;t<Yt.SBMAX_s;t++)e.width[V]=e.width[V+1]=e.width[V+2]=r.scalefac_band.s[t+1]-r.scalefac_band.s[t],e.window[V]=0,e.window[V+1]=1,e.window[V+2]=2,V+=3}e.count1bits=0,e.sfb_partition_table=x.nr_of_sfb_block[0][0],e.slen[0]=0,e.slen[1]=0,e.slen[2]=0,e.slen[3]=0,e.max_nonzero_coeff=575,ze.fill(e.scalefac,0),S(r,e)};function p(r){this.ordinal=r}p.BINSEARCH_NONE=new p(0),p.BINSEARCH_UP=new p(1),p.BINSEARCH_DOWN=new p(2);function k(r,e,t,a,l){var o,A=r.CurrentStep[a],M=!1,P=r.OldValue[a],V=p.BINSEARCH_NONE;for(e.global_gain=P,t-=e.part2_length;;){var U;if(o=D.count_bits(r,l,e,null),A==1||o==t)break;o>t?(V==p.BINSEARCH_DOWN&&(M=!0),M&&(A/=2),V=p.BINSEARCH_UP,U=A):(V==p.BINSEARCH_UP&&(M=!0),M&&(A/=2),V=p.BINSEARCH_DOWN,U=-A),e.global_gain+=U,e.global_gain<0&&(e.global_gain=0,M=!0),e.global_gain>255&&(e.global_gain=255,M=!0)}for(We(e.global_gain>=0),We(e.global_gain<256);o>t&&e.global_gain<255;)e.global_gain++,o=D.count_bits(r,l,e,null);return r.CurrentStep[a]=P-e.global_gain>=4?4:2,r.OldValue[a]=e.global_gain,e.part2_3_length=o,o}this.trancate_smallspectrums=function(r,e,t,a){var l=qe(va.SFBMAX);if(!(!(r.substep_shaping&4)&&e.block_type==Yt.SHORT_TYPE||r.substep_shaping&128)){x.calc_noise(e,t,l,new Or,null);for(var A=0;A<576;A++){var o=0;e.l3_enc[A]!=0&&(o=Math.abs(e.xr[A])),a[A]=o}var A=0,M=8;e.block_type==Yt.SHORT_TYPE&&(M=6);do{var P,V,U,_,T=e.width[M];if(A+=T,!(l[M]>=1)&&(ze.sort(a,A-T,T),!BitStream.EQ(a[A-1],0))){P=(1-l[M])*t[M],V=0,_=0;do{var n;for(U=1;_+U<T&&!BitStream.NEQ(a[_+A-T],a[_+A+U-T]);U++);if(n=a[_+A-T]*a[_+A-T]*U,P<n){_!=0&&(V=a[_+A-T-1]);break}P-=n,_+=U}while(_<T);if(!BitStream.EQ(V,0))do Math.abs(e.xr[A-T])<=V&&(e.l3_enc[A-T]=0);while(--T>0)}}while(++M<e.psymax);e.part2_3_length=D.noquant_count_bits(r,e,null)}};function L(r){for(var e=0;e<r.sfbmax;e++)if(r.scalefac[e]+r.subblock_gain[r.window[e]]==0)return!1;return!0}function d(r){return Ir.FAST_LOG10(.368+.632*r*r*r)}function u(r,e){for(var t=1e-37,a=0;a<e.psymax;a++)t+=d(r[a]);return Math.max(1e-20,t)}function C(r,e,t,a,l){var o;switch(r){default:case 9:{e.over_count>0?(o=t.over_SSD<=e.over_SSD,t.over_SSD==e.over_SSD&&(o=t.bits<e.bits)):o=t.max_noise<0&&t.max_noise*10+t.bits<=e.max_noise*10+e.bits;break}case 0:o=t.over_count<e.over_count||t.over_count==e.over_count&&t.over_noise<e.over_noise||t.over_count==e.over_count&&BitStream.EQ(t.over_noise,e.over_noise)&&t.tot_noise<e.tot_noise;break;case 8:t.max_noise=u(l,a);case 1:o=t.max_noise<e.max_noise;break;case 2:o=t.tot_noise<e.tot_noise;break;case 3:o=t.tot_noise<e.tot_noise&&t.max_noise<e.max_noise;break;case 4:o=t.max_noise<=0&&e.max_noise>.2||t.max_noise<=0&&e.max_noise<0&&e.max_noise>t.max_noise-.2&&t.tot_noise<e.tot_noise||t.max_noise<=0&&e.max_noise>0&&e.max_noise>t.max_noise-.2&&t.tot_noise<e.tot_noise+e.over_noise||t.max_noise>0&&e.max_noise>-.05&&e.max_noise>t.max_noise-.1&&t.tot_noise+t.over_noise<e.tot_noise+e.over_noise||t.max_noise>0&&e.max_noise>-.1&&e.max_noise>t.max_noise-.15&&t.tot_noise+t.over_noise+t.over_noise<e.tot_noise+e.over_noise+e.over_noise;break;case 5:o=t.over_noise<e.over_noise||BitStream.EQ(t.over_noise,e.over_noise)&&t.tot_noise<e.tot_noise;break;case 6:o=t.over_noise<e.over_noise||BitStream.EQ(t.over_noise,e.over_noise)&&(t.max_noise<e.max_noise||BitStream.EQ(t.max_noise,e.max_noise)&&t.tot_noise<=e.tot_noise);break;case 7:o=t.over_count<e.over_count||t.over_noise<e.over_noise;break}return e.over_count==0&&(o=o&&t.bits<e.bits),o}function g(r,e,t,a,l){var o=r.internal_flags,A;e.scalefac_scale==0?A=1.2968395546510096:A=1.6817928305074292;for(var M=0,P=0;P<e.sfbmax;P++)M<t[P]&&(M=t[P]);var V=o.noise_shaping_amp;switch(V==3&&(l?V=2:V=1),V){case 2:break;case 1:M>1?M=Math.pow(M,.5):M*=.95;break;default:M>1?M=1:M*=.95;break}for(var U=0,P=0;P<e.sfbmax;P++){var _=e.width[P],T;if(U+=_,!(t[P]<M)){if(o.substep_shaping&2&&(o.pseudohalf[P]=o.pseudohalf[P]==0?1:0,o.pseudohalf[P]==0&&o.noise_shaping_amp==2))return;for(e.scalefac[P]++,T=-_;T<0;T++)a[U+T]*=A,a[U+T]>e.xrpow_max&&(e.xrpow_max=a[U+T]);if(o.noise_shaping_amp==2)return}}}function B(r,e){for(var t=1.2968395546510096,a=0,l=0;l<r.sfbmax;l++){var o=r.width[l],A=r.scalefac[l];if(r.preflag!=0&&(A+=x.pretab[l]),a+=o,A&1){A++;for(var M=-o;M<0;M++)e[a+M]*=t,e[a+M]>r.xrpow_max&&(r.xrpow_max=e[a+M])}r.scalefac[l]=A>>1}r.preflag=0,r.scalefac_scale=1}function w(r,e,t){var a,l=e.scalefac;for(a=0;a<e.sfb_lmax;a++)if(l[a]>=16)return!0;for(var o=0;o<3;o++){var A=0,M=0;for(a=e.sfb_lmax+o;a<e.sfbdivide;a+=3)A<l[a]&&(A=l[a]);for(;a<e.sfbmax;a+=3)M<l[a]&&(M=l[a]);if(!(A<16&&M<8)){if(e.subblock_gain[o]>=7)return!0;e.subblock_gain[o]++;var P=r.scalefac_band.l[e.sfb_lmax];for(a=e.sfb_lmax+o;a<e.sfbmax;a+=3){var V,U=e.width[a],_=l[a];if(_=_-(4>>e.scalefac_scale),_>=0){l[a]=_,P+=U*3;continue}l[a]=0;{var T=210+(_<<e.scalefac_scale+1);V=x.IPOW20(T)}P+=U*(o+1);for(var n=-U;n<0;n++)t[P+n]*=V,t[P+n]>e.xrpow_max&&(e.xrpow_max=t[P+n]);P+=U*(3-o-1)}{var V=x.IPOW20(202);P+=e.width[a]*(o+1);for(var n=-e.width[a];n<0;n++)t[P+n]*=V,t[P+n]>e.xrpow_max&&(e.xrpow_max=t[P+n])}}}return!1}function b(r,e,t,a,l){var o=r.internal_flags;g(r,e,t,a,l);var A=L(e);return A?!1:(o.mode_gr==2?A=D.scale_bitcount(e):A=D.scale_bitcount_lsf(o,e),A?(o.noise_shaping>1&&(ze.fill(o.pseudohalf,0),e.scalefac_scale==0?(B(e,a),A=!1):e.block_type==Yt.SHORT_TYPE&&o.subblock_gain>0&&(A=w(o,e,a)||L(e))),A||(o.mode_gr==2?A=D.scale_bitcount(e):A=D.scale_bitcount_lsf(o,e)),!A):!0)}this.outer_loop=function(r,e,t,a,l,o){var A=r.internal_flags,M=new ga,P=qe(576),V=qe(va.SFBMAX),U=new Or,_,T=new is,n=9999999,R=!1,K=!1,N=0;if(k(A,e,o,l,a),A.noise_shaping==0)return 100;x.calc_noise(e,t,V,U,T),U.bits=e.part2_3_length,M.assign(e);var Z=0;for(Be.arraycopy(a,0,P,0,576);!R;){do{var W=new Or,z,h=255;if(A.substep_shaping&2?z=20:z=3,A.sfb21_extra&&(V[M.sfbmax]>1||M.block_type==Yt.SHORT_TYPE&&(V[M.sfbmax+1]>1||V[M.sfbmax+2]>1))||!b(r,M,V,a,K))break;M.scalefac_scale!=0&&(h=254);var i=o-M.part2_length;if(i<=0)break;for(;(M.part2_3_length=D.count_bits(A,a,M,T))>i&&M.global_gain<=h;)M.global_gain++;if(M.global_gain>h)break;if(U.over_count==0){for(;(M.part2_3_length=D.count_bits(A,a,M,T))>n&&M.global_gain<=h;)M.global_gain++;if(M.global_gain>h)break}if(x.calc_noise(M,t,V,W,T),W.bits=M.part2_3_length,e.block_type!=Yt.SHORT_TYPE?_=r.quant_comp:_=r.quant_comp_short,_=C(_,U,W,M,V)?1:0,_!=0)n=e.part2_3_length,U=W,e.assign(M),Z=0,Be.arraycopy(a,0,P,0,576);else if(A.full_outer_loop==0&&(++Z>z&&U.over_count==0||A.noise_shaping_amp==3&&K&&Z>30||A.noise_shaping_amp==3&&K&&M.global_gain-N>15))break}while(M.global_gain+M.scalefac_scale<255);A.noise_shaping_amp==3?K?R=!0:(M.assign(e),Be.arraycopy(P,0,a,0,576),Z=0,N=M.global_gain,K=!0):R=!0}return We(e.global_gain+e.scalefac_scale<=255),r.VBR==ba.vbr_rh||r.VBR==ba.vbr_mtrh?Be.arraycopy(P,0,a,0,576):A.substep_shaping&1&&trancate_smallspectrums(A,e,t,a),U.over_count},this.iteration_finish_one=function(r,e,t){var a=r.l3_side,l=a.tt[e][t];D.best_scalefac_store(r,e,t,a),r.use_best_huffman==1&&D.best_huffman_divide(r,l),it.ResvAdjust(r,l)},this.VBR_encode_granule=function(r,e,t,a,l,o,A){var M=r.internal_flags,P=new ga,V=qe(576),U=A,_=A+1,T=(A+o)/2,n,R,K=0,N=M.sfb21_extra;We(U<=LameInternalFlags.MAX_BITS_PER_CHANNEL),ze.fill(P.l3_enc,0);do T>U-42?M.sfb21_extra=!1:M.sfb21_extra=N,R=outer_loop(r,e,t,a,l,T),R<=0?(K=1,_=e.part2_3_length,P.assign(e),Be.arraycopy(a,0,V,0,576),A=_-32,n=A-o,T=(A+o)/2):(o=T+32,n=A-o,T=(A+o)/2,K!=0&&(K=2,e.assign(P),Be.arraycopy(V,0,a,0,576)));while(n>12);M.sfb21_extra=N,K==2&&Be.arraycopy(P.l3_enc,0,e.l3_enc,0,576),We(e.part2_3_length<=U)},this.get_framebits=function(r,e){var t=r.internal_flags;t.bitrate_index=t.VBR_min_bitrate;var a=q.getframebits(r);t.bitrate_index=1,a=q.getframebits(r);for(var l=1;l<=t.VBR_max_bitrate;l++){t.bitrate_index=l;var o=new MeanBits(a);e[l]=it.ResvFrameBegin(r,o),a=o.bits}},this.VBR_old_prepare=function(r,e,t,a,l,o,A,M,P){var V=r.internal_flags,U,_=0,T=1,n=0;V.bitrate_index=V.VBR_max_bitrate;var R=it.ResvFrameBegin(r,new MeanBits(0))/V.mode_gr;get_framebits(r,o);for(var K=0;K<V.mode_gr;K++){var N=x.on_pe(r,e,M[K],R,K,0);V.mode_ext==Yt.MPG_MD_MS_LR&&(ms_convert(V.l3_side,K),x.reduce_side(M[K],t[K],R,N));for(var Z=0;Z<V.channels_out;++Z){var W=V.l3_side.tt[K][Z];W.block_type!=Yt.SHORT_TYPE?(_=1.28/(1+Math.exp(3.5-e[K][Z]/300))-.05,U=V.PSY.mask_adjust-_):(_=2.56/(1+Math.exp(3.5-e[K][Z]/300))-.14,U=V.PSY.mask_adjust_short-_),V.masking_lower=Math.pow(10,U*.1),init_outer_loop(V,W),P[K][Z]=x.calc_xmin(r,a[K][Z],W,l[K][Z]),P[K][Z]!=0&&(T=0),A[K][Z]=126,n+=M[K][Z]}}for(var K=0;K<V.mode_gr;K++)for(var Z=0;Z<V.channels_out;Z++)n>o[V.VBR_max_bitrate]&&(M[K][Z]*=o[V.VBR_max_bitrate],M[K][Z]/=n),A[K][Z]>M[K][Z]&&(A[K][Z]=M[K][Z]);return T},this.bitpressure_strategy=function(r,e,t,a){for(var l=0;l<r.mode_gr;l++)for(var o=0;o<r.channels_out;o++){for(var A=r.l3_side.tt[l][o],M=e[l][o],P=0,V=0;V<A.psy_lmax;V++)M[P++]*=1+.029*V*V/Yt.SBMAX_l/Yt.SBMAX_l;if(A.block_type==Yt.SHORT_TYPE)for(var V=A.sfb_smin;V<Yt.SBMAX_s;V++)M[P++]*=1+.029*V*V/Yt.SBMAX_s/Yt.SBMAX_s,M[P++]*=1+.029*V*V/Yt.SBMAX_s/Yt.SBMAX_s,M[P++]*=1+.029*V*V/Yt.SBMAX_s/Yt.SBMAX_s;a[l][o]=0|Math.max(t[l][o],.9*a[l][o])}},this.VBR_new_prepare=function(r,e,t,a,l,o){var A=r.internal_flags,M=1,P=0,V=0,U;if(r.free_format){A.bitrate_index=0;var _=new MeanBits(P);U=it.ResvFrameBegin(r,_),P=_.bits,l[0]=U}else{A.bitrate_index=A.VBR_max_bitrate;var _=new MeanBits(P);it.ResvFrameBegin(r,_),P=_.bits,get_framebits(r,l),U=l[A.VBR_max_bitrate]}for(var T=0;T<A.mode_gr;T++){x.on_pe(r,e,o[T],P,T,0),A.mode_ext==Yt.MPG_MD_MS_LR&&ms_convert(A.l3_side,T);for(var n=0;n<A.channels_out;++n){var R=A.l3_side.tt[T][n];A.masking_lower=Math.pow(10,A.PSY.mask_adjust*.1),init_outer_loop(A,R),x.calc_xmin(r,t[T][n],R,a[T][n])!=0&&(M=0),V+=o[T][n]}}for(var T=0;T<A.mode_gr;T++)for(var n=0;n<A.channels_out;n++)V>U&&(o[T][n]*=U,o[T][n]/=V);return M},this.calc_target_bits=function(r,e,t,a,l,o){var A=r.internal_flags,M=A.l3_side,P,V,U,_,T=0;A.bitrate_index=A.VBR_max_bitrate;var n=new MeanBits(T);for(o[0]=it.ResvFrameBegin(r,n),T=n.bits,A.bitrate_index=1,T=q.getframebits(r)-A.sideinfo_len*8,l[0]=T/(A.mode_gr*A.channels_out),T=r.VBR_mean_bitrate_kbps*r.framesize*1e3,A.substep_shaping&1&&(T*=1.09),T/=r.out_samplerate,T-=A.sideinfo_len*8,T/=A.mode_gr*A.channels_out,P=.93+.07*(11-r.compression_ratio)/(11-5.5),P<.9&&(P=.9),P>1&&(P=1),V=0;V<A.mode_gr;V++){var R=0;for(U=0;U<A.channels_out;U++){if(a[V][U]=int(P*T),e[V][U]>700){var K=int((e[V][U]-700)/1.4),N=M.tt[V][U];a[V][U]=int(P*T),N.block_type==Yt.SHORT_TYPE&&K<T/2&&(K=T/2),K>T*3/2?K=T*3/2:K<0&&(K=0),a[V][U]+=K}a[V][U]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(a[V][U]=LameInternalFlags.MAX_BITS_PER_CHANNEL),R+=a[V][U]}if(R>LameInternalFlags.MAX_BITS_PER_GRANULE)for(U=0;U<A.channels_out;++U)a[V][U]*=LameInternalFlags.MAX_BITS_PER_GRANULE,a[V][U]/=R}if(A.mode_ext==Yt.MPG_MD_MS_LR)for(V=0;V<A.mode_gr;V++)x.reduce_side(a[V],t[V],T*A.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(_=0,V=0;V<A.mode_gr;V++)for(U=0;U<A.channels_out;U++)a[V][U]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(a[V][U]=LameInternalFlags.MAX_BITS_PER_CHANNEL),_+=a[V][U];if(_>o[0])for(V=0;V<A.mode_gr;V++)for(U=0;U<A.channels_out;U++)a[V][U]*=o[0],a[V][U]/=_}}var ls=os,_s=Gt,wa=_s.assert;function fs(){var q;this.setModules=function(it){q=it},this.ResvFrameBegin=function(it,x){var G=it.internal_flags,D,y=G.l3_side,S=q.getframebits(it);x.bits=(S-G.sideinfo_len*8)/G.mode_gr;var p=8*256*G.mode_gr-8;it.brate>320?D=8*int(it.brate*1e3/(it.out_samplerate/1152)/8+.5):(D=8*1440,it.strict_ISO&&(D=8*int(32e4/(it.out_samplerate/1152)/8+.5))),G.ResvMax=D-S,G.ResvMax>p&&(G.ResvMax=p),(G.ResvMax<0||it.disable_reservoir)&&(G.ResvMax=0);var k=x.bits*G.mode_gr+Math.min(G.ResvSize,G.ResvMax);return k>D&&(k=D),wa(G.ResvMax%8==0),wa(G.ResvMax>=0),y.resvDrain_pre=0,G.pinfo!=null&&(G.pinfo.mean_bits=x.bits/2,G.pinfo.resvsize=G.ResvSize),k},this.ResvMaxBits=function(it,x,G,D){var y=it.internal_flags,S,p=y.ResvSize,k=y.ResvMax;D!=0&&(p+=x),y.substep_shaping&1&&(k*=.9),G.bits=x,p*10>k*9?(S=p-k*9/10,G.bits+=S,y.substep_shaping|=128):(S=0,y.substep_shaping&=127,!it.disable_reservoir&&!(y.substep_shaping&1)&&(G.bits-=.1*x));var L=p<y.ResvMax*6/10?p:y.ResvMax*6/10;return L-=S,L<0&&(L=0),L},this.ResvAdjust=function(it,x){it.ResvSize-=x.part2_3_length+x.part2_length},this.ResvFrameEnd=function(it,x){var G,D=it.l3_side;it.ResvSize+=x*it.mode_gr;var y=0;D.resvDrain_post=0,D.resvDrain_pre=0,(G=it.ResvSize%8)!=0&&(y+=G),G=it.ResvSize-y-it.ResvMax,G>0&&(y+=G);{var S=Math.min(D.main_data_begin*8,y)/8;D.resvDrain_pre+=8*S,y-=8*S,it.ResvSize-=8*S,D.main_data_begin-=S}D.resvDrain_post+=y,it.ResvSize-=y}}var us=fs;function hs(){var q="http://www.mp3dev.org/",it=3,x=98,G=4,D=0,y=93;this.getLameVersion=function(){return it+"."+x+"."+G},this.getLameShortVersion=function(){return it+"."+x+"."+G},this.getLameVeryShortVersion=function(){return"LAME"+it+"."+x+"r"},this.getPsyVersion=function(){return D+"."+y},this.getLameUrl=function(){return q},this.getLameOsBitness=function(){return"32bits"}}var cs=hs,Xe=Gt,ds=Xe.System,Cr=Xe.VbrMode,ya=Xe.ShortBlock,ps=Xe.Arrays,ir=Xe.new_byte,ms=Xe.assert;Ke.NUMTOCENTRIES=100;Ke.MAXFRAMESIZE=2880;function Ke(){var q,it,x;this.setModules=function(T,n,R){q=T,it=n,x=R};var G=1,D=2,y=4,S=8,p=Ke.NUMTOCENTRIES,k=Ke.MAXFRAMESIZE,L=p+4+4+4+4+4,d=L+9+1+1+8+1+1+3+1+1+2+4+2+2,u=128,C=64,g=32,B=null,w="Xing",b="Info",r=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function e(T,n){if(T.nVbrNumFrames++,T.sum+=n,T.seen++,!(T.seen<T.want)&&(T.pos<T.size&&(T.bag[T.pos]=T.sum,T.pos++,T.seen=0),T.pos==T.size)){for(var R=1;R<T.size;R+=2)T.bag[R/2]=T.bag[R];T.want*=2,T.pos/=2}}function t(T,n){if(!(T.pos<=0))for(var R=1;R<p;++R){var K=R/p,N,Z,W=0|Math.floor(K*T.pos);W>T.pos-1&&(W=T.pos-1),N=T.bag[W],Z=T.sum;var z=0|256*N/Z;z>255&&(z=255),n[R]=255&z}}this.addVbrFrame=function(T){var n=T.internal_flags,R=Tables.bitrate_table[T.version][n.bitrate_index];ms(n.VBR_seek_table.bag!=null),e(n.VBR_seek_table,R)};function a(T,n){var R=T[n+0]&255;return R<<=8,R|=T[n+1]&255,R<<=8,R|=T[n+2]&255,R<<=8,R|=T[n+3]&255,R}function l(T,n,R){T[n+0]=255&(R>>24&255),T[n+1]=255&(R>>16&255),T[n+2]=255&(R>>8&255),T[n+3]=255&(R&255)}function o(T,n,R){T[n+0]=255&(R>>8&255),T[n+1]=255&(R&255)}function A(T,n){return new String(T,n,w.length(),B).equals(w)||new String(T,n,b.length(),B).equals(b)}function M(T,n,R){return 255&(T<<n|R&~(-1<<n))}function P(T,n){var R=T.internal_flags;n[0]=M(n[0],8,255),n[1]=M(n[1],3,7),n[1]=M(n[1],1,T.out_samplerate<16e3?0:1),n[1]=M(n[1],1,T.version),n[1]=M(n[1],2,1),n[1]=M(n[1],1,T.error_protection?0:1),n[2]=M(n[2],4,R.bitrate_index),n[2]=M(n[2],2,R.samplerate_index),n[2]=M(n[2],1,0),n[2]=M(n[2],1,T.extension),n[3]=M(n[3],2,T.mode.ordinal()),n[3]=M(n[3],2,R.mode_ext),n[3]=M(n[3],1,T.copyright),n[3]=M(n[3],1,T.original),n[3]=M(n[3],2,T.emphasis),n[0]=255;var K=255&(n[1]&241),N;T.version==1?N=u:T.out_samplerate<16e3?N=g:N=C,T.VBR==Cr.vbr_off&&(N=T.brate);var Z;T.free_format?Z=0:Z=255&16*q.BitrateIndex(N,T.version,T.out_samplerate),T.version==1?(n[1]=255&(K|10),K=255&(n[2]&13),n[2]=255&(Z|K)):(n[1]=255&(K|2),K=255&(n[2]&13),n[2]=255&(Z|K))}this.getVbrTag=function(T){var n=new VBRTagData,R=0;n.flags=0;var K=T[R+1]>>3&1,N=T[R+2]>>2&3,Z=T[R+3]>>6&3,W=T[R+2]>>4&15;if(W=Tables.bitrate_table[K][W],T[R+1]>>4==14?n.samprate=Tables.samplerate_table[2][N]:n.samprate=Tables.samplerate_table[K][N],K!=0?Z!=3?R+=36:R+=21:Z!=3?R+=21:R+=13,!A(T,R))return null;R+=4,n.hId=K;var z=n.flags=a(T,R);if(R+=4,z&G&&(n.frames=a(T,R),R+=4),z&D&&(n.bytes=a(T,R),R+=4),z&y){if(n.toc!=null)for(var h=0;h<p;h++)n.toc[h]=T[R+h];R+=p}n.vbrScale=-1,z&S&&(n.vbrScale=a(T,R),R+=4),n.headersize=(K+1)*72e3*W/n.samprate,R+=21;var i=T[R+0]<<4;i+=T[R+1]>>4;var c=(T[R+1]&15)<<8;return c+=T[R+2]&255,(i<0||i>3e3)&&(i=-1),(c<0||c>3e3)&&(c=-1),n.encDelay=i,n.encPadding=c,n},this.InitVbrTag=function(T){var n=T.internal_flags,R;T.version==1?R=u:T.out_samplerate<16e3?R=g:R=C,T.VBR==Cr.vbr_off&&(R=T.brate);var K=(T.version+1)*72e3*R/T.out_samplerate,N=n.sideinfo_len+d;if(n.VBR_seek_table.TotalFrameSize=K,K<N||K>k){T.bWriteVbrTag=!1;return}n.VBR_seek_table.nVbrNumFrames=0,n.VBR_seek_table.nBytesWritten=0,n.VBR_seek_table.sum=0,n.VBR_seek_table.seen=0,n.VBR_seek_table.want=1,n.VBR_seek_table.pos=0,n.VBR_seek_table.bag==null&&(n.VBR_seek_table.bag=new int[400],n.VBR_seek_table.size=400);var Z=ir(k);P(T,Z);for(var W=n.VBR_seek_table.TotalFrameSize,z=0;z<W;++z)it.add_dummy_byte(T,Z[z]&255,1)};function V(T,n){var R=n^T;return n=n>>8^r[R&255],n}this.updateMusicCRC=function(T,n,R,K){for(var N=0;N<K;++N)T[0]=V(n[R+N],T[0])};function U(T,n,R,K,N){var Z=T.internal_flags,W=0,z=T.encoder_delay,h=T.encoder_padding,i=100-10*T.VBR_q-T.quality,c=x.getLameVeryShortVersion(),v,E=0,et,ft=[1,5,3,2,4,0,3],X=0|(T.lowpassfreq/100+.5>255?255:T.lowpassfreq/100+.5),$=0,pt=0,wt=0,Et=T.internal_flags.noise_shaping,Mt=0,f=0,st=0,rt=0,H=0,j=(T.exp_nspsytune&1)!=0,s=(T.exp_nspsytune&2)!=0,m=!1,ot=!1,J=T.internal_flags.nogap_total,mt=T.internal_flags.nogap_current,gt=T.ATHtype,ut=0,vt;switch(T.VBR){case vbr_abr:vt=T.VBR_mean_bitrate_kbps;break;case vbr_off:vt=T.brate;break;default:vt=T.VBR_min_bitrate_kbps}switch(T.VBR.ordinal()<ft.length?v=ft[T.VBR.ordinal()]:v=0,et=16*E+v,Z.findReplayGain&&(Z.RadioGain>510&&(Z.RadioGain=510),Z.RadioGain<-510&&(Z.RadioGain=-510),pt=8192,pt|=3072,Z.RadioGain>=0?pt|=Z.RadioGain:(pt|=512,pt|=-Z.RadioGain)),Z.findPeakSample&&($=Math.abs(0|Z.PeakSample/32767*Math.pow(2,23)+.5)),J!=-1&&(mt>0&&(ot=!0),mt<J-1&&(m=!0)),ut=gt+((j?1:0)<<4)+((s?1:0)<<5)+((m?1:0)<<6)+((ot?1:0)<<7),i<0&&(i=0),T.mode){case MONO:Mt=0;break;case STEREO:Mt=1;break;case DUAL_CHANNEL:Mt=2;break;case JOINT_STEREO:T.force_ms?Mt=4:Mt=3;break;case NOT_SET:default:Mt=7;break}T.in_samplerate<=32e3?st=0:T.in_samplerate==48e3?st=2:T.in_samplerate>48e3?st=3:st=1,(T.short_blocks==ya.short_block_forced||T.short_blocks==ya.short_block_dispensed||T.lowpassfreq==-1&&T.highpassfreq==-1||T.scale_left<T.scale_right||T.scale_left>T.scale_right||T.disable_reservoir&&T.brate<320||T.noATH||T.ATHonly||gt==0||T.in_samplerate<=32e3)&&(f=1),rt=Et+(Mt<<2)+(f<<5)+(st<<6),H=Z.nMusicCRC,l(R,K+W,i),W+=4;for(var It=0;It<9;It++)R[K+W+It]=255&c.charAt(It);W+=9,R[K+W]=255&et,W++,R[K+W]=255&X,W++,l(R,K+W,$),W+=4,o(R,K+W,pt),W+=2,o(R,K+W,wt),W+=2,R[K+W]=255&ut,W++,vt>=255?R[K+W]=255:R[K+W]=255&vt,W++,R[K+W]=255&z>>4,R[K+W+1]=255&(z<<4)+(h>>8),R[K+W+2]=255&h,W+=3,R[K+W]=255&rt,W++,R[K+W++]=0,o(R,K+W,T.preset),W+=2,l(R,K+W,n),W+=4,o(R,K+W,H),W+=2;for(var Bt=0;Bt<W;Bt++)N=V(R[K+Bt],N);return o(R,K+W,N),W+=2,W}function _(T){T.seek(0);var n=ir(10);T.readFully(n);var R;return new String(n,"ISO-8859-1").startsWith("ID3")?R=0:R=((n[6]&127)<<21|(n[7]&127)<<14|(n[8]&127)<<7|n[9]&127)+n.length,R}this.getLameTagFrame=function(T,n){var R=T.internal_flags;if(!T.bWriteVbrTag||R.Class_ID!=Lame.LAME_ID||R.VBR_seek_table.pos<=0)return 0;if(n.length<R.VBR_seek_table.TotalFrameSize)return R.VBR_seek_table.TotalFrameSize;ps.fill(n,0,R.VBR_seek_table.TotalFrameSize,0),P(T,n);var K=ir(p);if(T.free_format)for(var N=1;N<p;++N)K[N]=255&255*N/100;else t(R.VBR_seek_table,K);var Z=R.sideinfo_len;T.error_protection&&(Z-=2),T.VBR==Cr.vbr_off?(n[Z++]=255&b.charAt(0),n[Z++]=255&b.charAt(1),n[Z++]=255&b.charAt(2),n[Z++]=255&b.charAt(3)):(n[Z++]=255&w.charAt(0),n[Z++]=255&w.charAt(1),n[Z++]=255&w.charAt(2),n[Z++]=255&w.charAt(3)),l(n,Z,G+D+y+S),Z+=4,l(n,Z,R.VBR_seek_table.nVbrNumFrames),Z+=4;var W=R.VBR_seek_table.nBytesWritten+R.VBR_seek_table.TotalFrameSize;l(n,Z,0|W),Z+=4,ds.arraycopy(K,0,n,Z,K.length),Z+=K.length,T.error_protection&&it.CRC_writeheader(R,n);for(var z=0,N=0;N<Z;N++)z=V(n[N],z);return Z+=U(T,W,n,Z,z),R.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(T,n){var R=T.internal_flags;if(R.VBR_seek_table.pos<=0||(n.seek(n.length()),n.length()==0))return-1;var K=_(n);n.seek(K);var N=ir(k),Z=getLameTagFrame(T,N);return Z>N.length?-1:(Z<1||n.write(N,0,Z),0)}}var bs=Ke,Wa=Gt,Sa=Wa.new_byte,gs=Wa.assert,vs=Yr(),ws=Kn,ys=Xa,Ss=Za(),ks=ls,As=Ua(),xs=us,Bs=$e,Rs=Hr();ae();var Es=cs,Ms=bs;function Ts(){this.setModules=function(q,it){}}function Is(){this.setModules=function(q,it,x){}}function Os(){}function Cs(){this.setModules=function(q,it){}}function Ps(q,it,x){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),q=1,it=44100,x=128);var G=new vs,D=new Ts,y=new ys,S=new Rs,p=new ws,k=new Ss,L=new ks,d=new Ms,u=new Es,C=new Cs,g=new xs,B=new As,w=new Is,b=new Os;G.setModules(y,S,p,k,L,d,u,C,b),S.setModules(y,b,u,d),C.setModules(S,u),p.setModules(G),L.setModules(S,g,k,B),k.setModules(B,g,G.enc.psy),g.setModules(S),B.setModules(k),d.setModules(G,S,u),D.setModules(w,b),w.setModules(u,C,p);var r=G.lame_init();r.num_channels=q,r.in_samplerate=it,r.brate=x,r.mode=Bs.STEREO,r.quality=3,r.bWriteVbrTag=!1,r.disable_reservoir=!0,r.write_id3tag_automatic=!1,G.lame_init_params(r);var e=1152,t=0|1.25*e+7200,a=Sa(t);this.encodeBuffer=function(l,o){q==1&&(o=l),gs(l.length==o.length),l.length>e&&(e=l.length,t=0|1.25*e+7200,a=Sa(t));var A=G.lame_encode_buffer(r,l,o,l.length,a,0,t);return new Int8Array(a.subarray(0,A))},this.flush=function(){var l=G.lame_encode_flush(r,a,0,t);return new Int8Array(a.subarray(0,l))}}function ge(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function hr(q){return q.charCodeAt(0)<<24|q.charCodeAt(1)<<16|q.charCodeAt(2)<<8|q.charCodeAt(3)}ge.RIFF=hr("RIFF");ge.WAVE=hr("WAVE");ge.fmt_=hr("fmt ");ge.data=hr("data");ge.readHeader=function(q){var it=new ge,x=q.getUint32(0,!1);if(ge.RIFF==x&&(q.getUint32(4,!0),ge.WAVE==q.getUint32(8,!1)&&ge.fmt_==q.getUint32(12,!1))){var G=q.getUint32(16,!0),D=20;switch(G){case 16:case 18:it.channels=q.getUint16(D+2,!0),it.sampleRate=q.getUint32(D+4,!0);break;default:throw"extended fmt chunk not implemented"}D+=G;for(var y=ge.data,S=0;y!=x&&(x=q.getUint32(D,!1),S=q.getUint32(D+4,!0),y!=x);)D+=S+8;return it.dataLen=S,it.dataOffset=D+8,it}};zr.Mp3Encoder=Ps;zr.WavHeader=ge;var or=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ga(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}function lr(q){throw new Error('Could not dynamically require "'+q+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pr={exports:{}};var ka;function Ds(){return ka||(ka=1,(function(q,it){(function(x){q.exports=x()})(function(){return(function x(G,D,y){function S(L,d){if(!D[L]){if(!G[L]){var u=typeof lr=="function"&&lr;if(!d&&u)return u(L,!0);if(p)return p(L,!0);var C=new Error("Cannot find module '"+L+"'");throw C.code="MODULE_NOT_FOUND",C}var g=D[L]={exports:{}};G[L][0].call(g.exports,function(B){var w=G[L][1][B];return S(w||B)},g,g.exports,x,G,D,y)}return D[L].exports}for(var p=typeof lr=="function"&&lr,k=0;k<y.length;k++)S(y[k]);return S})({1:[function(x,G,D){var y=x("./utils"),S=x("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";D.encode=function(k){for(var L,d,u,C,g,B,w,b=[],r=0,e=k.length,t=e,a=y.getTypeOf(k)!=="string";r<k.length;)t=e-r,u=a?(L=k[r++],d=r<e?k[r++]:0,r<e?k[r++]:0):(L=k.charCodeAt(r++),d=r<e?k.charCodeAt(r++):0,r<e?k.charCodeAt(r++):0),C=L>>2,g=(3&L)<<4|d>>4,B=1<t?(15&d)<<2|u>>6:64,w=2<t?63&u:64,b.push(p.charAt(C)+p.charAt(g)+p.charAt(B)+p.charAt(w));return b.join("")},D.decode=function(k){var L,d,u,C,g,B,w=0,b=0,r="data:";if(k.substr(0,r.length)===r)throw new Error("Invalid base64 input, it looks like a data url.");var e,t=3*(k=k.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(k.charAt(k.length-1)===p.charAt(64)&&t--,k.charAt(k.length-2)===p.charAt(64)&&t--,t%1!=0)throw new Error("Invalid base64 input, bad content length.");for(e=S.uint8array?new Uint8Array(0|t):new Array(0|t);w<k.length;)L=p.indexOf(k.charAt(w++))<<2|(C=p.indexOf(k.charAt(w++)))>>4,d=(15&C)<<4|(g=p.indexOf(k.charAt(w++)))>>2,u=(3&g)<<6|(B=p.indexOf(k.charAt(w++))),e[b++]=L,g!==64&&(e[b++]=d),B!==64&&(e[b++]=u);return e}},{"./support":30,"./utils":32}],2:[function(x,G,D){var y=x("./external"),S=x("./stream/DataWorker"),p=x("./stream/Crc32Probe"),k=x("./stream/DataLengthProbe");function L(d,u,C,g,B){this.compressedSize=d,this.uncompressedSize=u,this.crc32=C,this.compression=g,this.compressedContent=B}L.prototype={getContentWorker:function(){var d=new S(y.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new k("data_length")),u=this;return d.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new S(y.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},L.createWorkerFrom=function(d,u,C){return d.pipe(new p).pipe(new k("uncompressedSize")).pipe(u.compressWorker(C)).pipe(new k("compressedSize")).withStreamInfo("compression",u)},G.exports=L},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(x,G,D){var y=x("./stream/GenericWorker");D.STORE={magic:"\0\0",compressWorker:function(){return new y("STORE compression")},uncompressWorker:function(){return new y("STORE decompression")}},D.DEFLATE=x("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(x,G,D){var y=x("./utils"),S=(function(){for(var p,k=[],L=0;L<256;L++){p=L;for(var d=0;d<8;d++)p=1&p?3988292384^p>>>1:p>>>1;k[L]=p}return k})();G.exports=function(p,k){return p!==void 0&&p.length?y.getTypeOf(p)!=="string"?(function(L,d,u,C){var g=S,B=C+u;L^=-1;for(var w=C;w<B;w++)L=L>>>8^g[255&(L^d[w])];return-1^L})(0|k,p,p.length,0):(function(L,d,u,C){var g=S,B=C+u;L^=-1;for(var w=C;w<B;w++)L=L>>>8^g[255&(L^d.charCodeAt(w))];return-1^L})(0|k,p,p.length,0):0}},{"./utils":32}],5:[function(x,G,D){D.base64=!1,D.binary=!1,D.dir=!1,D.createFolders=!0,D.date=null,D.compression=null,D.compressionOptions=null,D.comment=null,D.unixPermissions=null,D.dosPermissions=null},{}],6:[function(x,G,D){var y=null;y=typeof Promise<"u"?Promise:x("lie"),G.exports={Promise:y}},{lie:37}],7:[function(x,G,D){var y=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",S=x("pako"),p=x("./utils"),k=x("./stream/GenericWorker"),L=y?"uint8array":"array";function d(u,C){k.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=C,this.meta={}}D.magic="\b\0",p.inherits(d,k),d.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(p.transformTo(L,u.data),!1)},d.prototype.flush=function(){k.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){k.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new S[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(C){u.push({data:C,meta:u.meta})}},D.compressWorker=function(u){return new d("Deflate",u)},D.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(x,G,D){function y(g,B){var w,b="";for(w=0;w<B;w++)b+=String.fromCharCode(255&g),g>>>=8;return b}function S(g,B,w,b,r,e){var t,a,l=g.file,o=g.compression,A=e!==L.utf8encode,M=p.transformTo("string",e(l.name)),P=p.transformTo("string",L.utf8encode(l.name)),V=l.comment,U=p.transformTo("string",e(V)),_=p.transformTo("string",L.utf8encode(V)),T=P.length!==l.name.length,n=_.length!==V.length,R="",K="",N="",Z=l.dir,W=l.date,z={crc32:0,compressedSize:0,uncompressedSize:0};B&&!w||(z.crc32=g.crc32,z.compressedSize=g.compressedSize,z.uncompressedSize=g.uncompressedSize);var h=0;B&&(h|=8),A||!T&&!n||(h|=2048);var i=0,c=0;Z&&(i|=16),r==="UNIX"?(c=798,i|=(function(E,et){var ft=E;return E||(ft=et?16893:33204),(65535&ft)<<16})(l.unixPermissions,Z)):(c=20,i|=(function(E){return 63&(E||0)})(l.dosPermissions)),t=W.getUTCHours(),t<<=6,t|=W.getUTCMinutes(),t<<=5,t|=W.getUTCSeconds()/2,a=W.getUTCFullYear()-1980,a<<=4,a|=W.getUTCMonth()+1,a<<=5,a|=W.getUTCDate(),T&&(K=y(1,1)+y(d(M),4)+P,R+="up"+y(K.length,2)+K),n&&(N=y(1,1)+y(d(U),4)+_,R+="uc"+y(N.length,2)+N);var v="";return v+=`
\0`,v+=y(h,2),v+=o.magic,v+=y(t,2),v+=y(a,2),v+=y(z.crc32,4),v+=y(z.compressedSize,4),v+=y(z.uncompressedSize,4),v+=y(M.length,2),v+=y(R.length,2),{fileRecord:u.LOCAL_FILE_HEADER+v+M+R,dirRecord:u.CENTRAL_FILE_HEADER+y(c,2)+v+y(U.length,2)+"\0\0\0\0"+y(i,4)+y(b,4)+M+R+U}}var p=x("../utils"),k=x("../stream/GenericWorker"),L=x("../utf8"),d=x("../crc32"),u=x("../signature");function C(g,B,w,b){k.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=B,this.zipPlatform=w,this.encodeFileName=b,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(C,k),C.prototype.push=function(g){var B=g.meta.percent||0,w=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,k.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(B+100*(w-b-1))/w:100}}))},C.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var B=this.streamFiles&&!g.file.dir;if(B){var w=S(g,B,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},C.prototype.closedSource=function(g){this.accumulate=!1;var B=this.streamFiles&&!g.file.dir,w=S(g,B,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),B)this.push({data:(function(b){return u.DATA_DESCRIPTOR+y(b.crc32,4)+y(b.compressedSize,4)+y(b.uncompressedSize,4)})(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},C.prototype.flush=function(){for(var g=this.bytesWritten,B=0;B<this.dirRecords.length;B++)this.push({data:this.dirRecords[B],meta:{percent:100}});var w=this.bytesWritten-g,b=(function(r,e,t,a,l){var o=p.transformTo("string",l(a));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+y(r,2)+y(r,2)+y(e,4)+y(t,4)+y(o.length,2)+o})(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},C.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},C.prototype.registerPrevious=function(g){this._sources.push(g);var B=this;return g.on("data",function(w){B.processChunk(w)}),g.on("end",function(){B.closedSource(B.previous.streamInfo),B._sources.length?B.prepareNextSource():B.end()}),g.on("error",function(w){B.error(w)}),this},C.prototype.resume=function(){return!!k.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},C.prototype.error=function(g){var B=this._sources;if(!k.prototype.error.call(this,g))return!1;for(var w=0;w<B.length;w++)try{B[w].error(g)}catch{}return!0},C.prototype.lock=function(){k.prototype.lock.call(this);for(var g=this._sources,B=0;B<g.length;B++)g[B].lock()},G.exports=C},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(x,G,D){var y=x("../compressions"),S=x("./ZipFileWorker");D.generateWorker=function(p,k,L){var d=new S(k.streamFiles,L,k.platform,k.encodeFileName),u=0;try{p.forEach(function(C,g){u++;var B=(function(e,t){var a=e||t,l=y[a];if(!l)throw new Error(a+" is not a valid compression method !");return l})(g.options.compression,k.compression),w=g.options.compressionOptions||k.compressionOptions||{},b=g.dir,r=g.date;g._compressWorker(B,w).withStreamInfo("file",{name:C,dir:b,date:r,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=u}catch(C){d.error(C)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(x,G,D){function y(){if(!(this instanceof y))return new y;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var S=new y;for(var p in this)typeof this[p]!="function"&&(S[p]=this[p]);return S}}(y.prototype=x("./object")).loadAsync=x("./load"),y.support=x("./support"),y.defaults=x("./defaults"),y.version="3.10.1",y.loadAsync=function(S,p){return new y().loadAsync(S,p)},y.external=x("./external"),G.exports=y},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(x,G,D){var y=x("./utils"),S=x("./external"),p=x("./utf8"),k=x("./zipEntries"),L=x("./stream/Crc32Probe"),d=x("./nodejsUtils");function u(C){return new S.Promise(function(g,B){var w=C.decompressed.getContentWorker().pipe(new L);w.on("error",function(b){B(b)}).on("end",function(){w.streamInfo.crc32!==C.decompressed.crc32?B(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}G.exports=function(C,g){var B=this;return g=y.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),d.isNode&&d.isStream(C)?S.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):y.prepareContent("the loaded zip file",C,!0,g.optimizedBinaryString,g.base64).then(function(w){var b=new k(g);return b.load(w),b}).then(function(w){var b=[S.Promise.resolve(w)],r=w.files;if(g.checkCRC32)for(var e=0;e<r.length;e++)b.push(u(r[e]));return S.Promise.all(b)}).then(function(w){for(var b=w.shift(),r=b.files,e=0;e<r.length;e++){var t=r[e],a=t.fileNameStr,l=y.resolve(t.fileNameStr);B.file(l,t.decompressed,{binary:!0,optimizedBinaryString:!0,date:t.date,dir:t.dir,comment:t.fileCommentStr.length?t.fileCommentStr:null,unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions,createFolders:g.createFolders}),t.dir||(B.file(l).unsafeOriginalName=a)}return b.zipComment.length&&(B.comment=b.zipComment),B})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(x,G,D){var y=x("../utils"),S=x("../stream/GenericWorker");function p(k,L){S.call(this,"Nodejs stream input adapter for "+k),this._upstreamEnded=!1,this._bindStream(L)}y.inherits(p,S),p.prototype._bindStream=function(k){var L=this;(this._stream=k).pause(),k.on("data",function(d){L.push({data:d,meta:{percent:0}})}).on("error",function(d){L.isPaused?this.generatedError=d:L.error(d)}).on("end",function(){L.isPaused?L._upstreamEnded=!0:L.end()})},p.prototype.pause=function(){return!!S.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},G.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(x,G,D){var y=x("readable-stream").Readable;function S(p,k,L){y.call(this,k),this._helper=p;var d=this;p.on("data",function(u,C){d.push(u)||d._helper.pause(),L&&L(C)}).on("error",function(u){d.emit("error",u)}).on("end",function(){d.push(null)})}x("../utils").inherits(S,y),S.prototype._read=function(){this._helper.resume()},G.exports=S},{"../utils":32,"readable-stream":16}],14:[function(x,G,D){G.exports={isNode:typeof Buffer<"u",newBufferFrom:function(y,S){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(y,S);if(typeof y=="number")throw new Error('The "data" argument must not be a number');return new Buffer(y,S)},allocBuffer:function(y){if(Buffer.alloc)return Buffer.alloc(y);var S=new Buffer(y);return S.fill(0),S},isBuffer:function(y){return Buffer.isBuffer(y)},isStream:function(y){return y&&typeof y.on=="function"&&typeof y.pause=="function"&&typeof y.resume=="function"}}},{}],15:[function(x,G,D){function y(l,o,A){var M,P=p.getTypeOf(o),V=p.extend(A||{},d);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(l=r(l)),V.createFolders&&(M=b(l))&&e.call(this,M,!0);var U=P==="string"&&V.binary===!1&&V.base64===!1;A&&A.binary!==void 0||(V.binary=!U),(o instanceof u&&o.uncompressedSize===0||V.dir||!o||o.length===0)&&(V.base64=!1,V.binary=!0,o="",V.compression="STORE",P="string");var _=null;_=o instanceof u||o instanceof k?o:B.isNode&&B.isStream(o)?new w(l,o):p.prepareContent(l,o,V.binary,V.optimizedBinaryString,V.base64);var T=new C(l,_,V);this.files[l]=T}var S=x("./utf8"),p=x("./utils"),k=x("./stream/GenericWorker"),L=x("./stream/StreamHelper"),d=x("./defaults"),u=x("./compressedObject"),C=x("./zipObject"),g=x("./generate"),B=x("./nodejsUtils"),w=x("./nodejs/NodejsStreamInputAdapter"),b=function(l){l.slice(-1)==="/"&&(l=l.substring(0,l.length-1));var o=l.lastIndexOf("/");return 0<o?l.substring(0,o):""},r=function(l){return l.slice(-1)!=="/"&&(l+="/"),l},e=function(l,o){return o=o!==void 0?o:d.createFolders,l=r(l),this.files[l]||y.call(this,l,null,{dir:!0,createFolders:o}),this.files[l]};function t(l){return Object.prototype.toString.call(l)==="[object RegExp]"}var a={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(l){var o,A,M;for(o in this.files)M=this.files[o],(A=o.slice(this.root.length,o.length))&&o.slice(0,this.root.length)===this.root&&l(A,M)},filter:function(l){var o=[];return this.forEach(function(A,M){l(A,M)&&o.push(M)}),o},file:function(l,o,A){if(arguments.length!==1)return l=this.root+l,y.call(this,l,o,A),this;if(t(l)){var M=l;return this.filter(function(V,U){return!U.dir&&M.test(V)})}var P=this.files[this.root+l];return P&&!P.dir?P:null},folder:function(l){if(!l)return this;if(t(l))return this.filter(function(P,V){return V.dir&&l.test(P)});var o=this.root+l,A=e.call(this,o),M=this.clone();return M.root=A.name,M},remove:function(l){l=this.root+l;var o=this.files[l];if(o||(l.slice(-1)!=="/"&&(l+="/"),o=this.files[l]),o&&!o.dir)delete this.files[l];else for(var A=this.filter(function(P,V){return V.name.slice(0,l.length)===l}),M=0;M<A.length;M++)delete this.files[A[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(l){var o,A={};try{if((A=p.extend(l||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:S.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");p.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var M=A.comment||this.comment||"";o=g.generateWorker(this,A,M)}catch(P){(o=new k("error")).error(P)}return new L(o,A.type||"string",A.mimeType)},generateAsync:function(l,o){return this.generateInternalStream(l).accumulate(o)},generateNodeStream:function(l,o){return(l=l||{}).type||(l.type="nodebuffer"),this.generateInternalStream(l).toNodejsStream(o)}};G.exports=a},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(x,G,D){G.exports=x("stream")},{stream:void 0}],17:[function(x,G,D){var y=x("./DataReader");function S(p){y.call(this,p);for(var k=0;k<this.data.length;k++)p[k]=255&p[k]}x("../utils").inherits(S,y),S.prototype.byteAt=function(p){return this.data[this.zero+p]},S.prototype.lastIndexOfSignature=function(p){for(var k=p.charCodeAt(0),L=p.charCodeAt(1),d=p.charCodeAt(2),u=p.charCodeAt(3),C=this.length-4;0<=C;--C)if(this.data[C]===k&&this.data[C+1]===L&&this.data[C+2]===d&&this.data[C+3]===u)return C-this.zero;return-1},S.prototype.readAndCheckSignature=function(p){var k=p.charCodeAt(0),L=p.charCodeAt(1),d=p.charCodeAt(2),u=p.charCodeAt(3),C=this.readData(4);return k===C[0]&&L===C[1]&&d===C[2]&&u===C[3]},S.prototype.readData=function(p){if(this.checkOffset(p),p===0)return[];var k=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,k},G.exports=S},{"../utils":32,"./DataReader":18}],18:[function(x,G,D){var y=x("../utils");function S(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}S.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var k,L=0;for(this.checkOffset(p),k=this.index+p-1;k>=this.index;k--)L=(L<<8)+this.byteAt(k);return this.index+=p,L},readString:function(p){return y.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},G.exports=S},{"../utils":32}],19:[function(x,G,D){var y=x("./Uint8ArrayReader");function S(p){y.call(this,p)}x("../utils").inherits(S,y),S.prototype.readData=function(p){this.checkOffset(p);var k=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,k},G.exports=S},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(x,G,D){var y=x("./DataReader");function S(p){y.call(this,p)}x("../utils").inherits(S,y),S.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},S.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},S.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},S.prototype.readData=function(p){this.checkOffset(p);var k=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,k},G.exports=S},{"../utils":32,"./DataReader":18}],21:[function(x,G,D){var y=x("./ArrayReader");function S(p){y.call(this,p)}x("../utils").inherits(S,y),S.prototype.readData=function(p){if(this.checkOffset(p),p===0)return new Uint8Array(0);var k=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,k},G.exports=S},{"../utils":32,"./ArrayReader":17}],22:[function(x,G,D){var y=x("../utils"),S=x("../support"),p=x("./ArrayReader"),k=x("./StringReader"),L=x("./NodeBufferReader"),d=x("./Uint8ArrayReader");G.exports=function(u){var C=y.getTypeOf(u);return y.checkSupport(C),C!=="string"||S.uint8array?C==="nodebuffer"?new L(u):S.uint8array?new d(y.transformTo("uint8array",u)):new p(y.transformTo("array",u)):new k(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(x,G,D){D.LOCAL_FILE_HEADER="PK",D.CENTRAL_FILE_HEADER="PK",D.CENTRAL_DIRECTORY_END="PK",D.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",D.ZIP64_CENTRAL_DIRECTORY_END="PK",D.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(x,G,D){var y=x("./GenericWorker"),S=x("../utils");function p(k){y.call(this,"ConvertWorker to "+k),this.destType=k}S.inherits(p,y),p.prototype.processChunk=function(k){this.push({data:S.transformTo(this.destType,k.data),meta:k.meta})},G.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(x,G,D){var y=x("./GenericWorker"),S=x("../crc32");function p(){y.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}x("../utils").inherits(p,y),p.prototype.processChunk=function(k){this.streamInfo.crc32=S(k.data,this.streamInfo.crc32||0),this.push(k)},G.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(x,G,D){var y=x("../utils"),S=x("./GenericWorker");function p(k){S.call(this,"DataLengthProbe for "+k),this.propName=k,this.withStreamInfo(k,0)}y.inherits(p,S),p.prototype.processChunk=function(k){if(k){var L=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=L+k.data.length}S.prototype.processChunk.call(this,k)},G.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(x,G,D){var y=x("../utils"),S=x("./GenericWorker");function p(k){S.call(this,"DataWorker");var L=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,k.then(function(d){L.dataIsReady=!0,L.data=d,L.max=d&&d.length||0,L.type=y.getTypeOf(d),L.isPaused||L._tickAndRepeat()},function(d){L.error(d)})}y.inherits(p,S),p.prototype.cleanUp=function(){S.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,y.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(y.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var k=null,L=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":k=this.data.substring(this.index,L);break;case"uint8array":k=this.data.subarray(this.index,L);break;case"array":case"nodebuffer":k=this.data.slice(this.index,L)}return this.index=L,this.push({data:k,meta:{percent:this.max?this.index/this.max*100:0}})},G.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(x,G,D){function y(S){this.name=S||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}y.prototype={push:function(S){this.emit("data",S)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(S){this.emit("error",S)}return!0},error:function(S){return!this.isFinished&&(this.isPaused?this.generatedError=S:(this.isFinished=!0,this.emit("error",S),this.previous&&this.previous.error(S),this.cleanUp()),!0)},on:function(S,p){return this._listeners[S].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(S,p){if(this._listeners[S])for(var k=0;k<this._listeners[S].length;k++)this._listeners[S][k].call(this,p)},pipe:function(S){return S.registerPrevious(this)},registerPrevious:function(S){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=S.streamInfo,this.mergeStreamInfo(),this.previous=S;var p=this;return S.on("data",function(k){p.processChunk(k)}),S.on("end",function(){p.end()}),S.on("error",function(k){p.error(k)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var S=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),S=!0),this.previous&&this.previous.resume(),!S},flush:function(){},processChunk:function(S){this.push(S)},withStreamInfo:function(S,p){return this.extraStreamInfo[S]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var S in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,S)&&(this.streamInfo[S]=this.extraStreamInfo[S])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var S="Worker "+this.name;return this.previous?this.previous+" -> "+S:S}},G.exports=y},{}],29:[function(x,G,D){var y=x("../utils"),S=x("./ConvertWorker"),p=x("./GenericWorker"),k=x("../base64"),L=x("../support"),d=x("../external"),u=null;if(L.nodestream)try{u=x("../nodejs/NodejsStreamOutputAdapter")}catch{}function C(B,w){return new d.Promise(function(b,r){var e=[],t=B._internalType,a=B._outputType,l=B._mimeType;B.on("data",function(o,A){e.push(o),w&&w(A)}).on("error",function(o){e=[],r(o)}).on("end",function(){try{var o=(function(A,M,P){switch(A){case"blob":return y.newBlob(y.transformTo("arraybuffer",M),P);case"base64":return k.encode(M);default:return y.transformTo(A,M)}})(a,(function(A,M){var P,V=0,U=null,_=0;for(P=0;P<M.length;P++)_+=M[P].length;switch(A){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(U=new Uint8Array(_),P=0;P<M.length;P++)U.set(M[P],V),V+=M[P].length;return U;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+A+"'")}})(t,e),l);b(o)}catch(A){r(A)}e=[]}).resume()})}function g(B,w,b){var r=w;switch(w){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=w,this._mimeType=b,y.checkSupport(r),this._worker=B.pipe(new S(r)),B.lock()}catch(e){this._worker=new p("error"),this._worker.error(e)}}g.prototype={accumulate:function(B){return C(this,B)},on:function(B,w){var b=this;return B==="data"?this._worker.on(B,function(r){w.call(b,r.data,r.meta)}):this._worker.on(B,function(){y.delay(w,arguments,b)}),this},resume:function(){return y.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(B){if(y.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},B)}},G.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(x,G,D){if(D.base64=!0,D.array=!0,D.string=!0,D.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",D.nodebuffer=typeof Buffer<"u",D.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")D.blob=!1;else{var y=new ArrayBuffer(0);try{D.blob=new Blob([y],{type:"application/zip"}).size===0}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);S.append(y),D.blob=S.getBlob("application/zip").size===0}catch{D.blob=!1}}}try{D.nodestream=!!x("readable-stream").Readable}catch{D.nodestream=!1}},{"readable-stream":16}],31:[function(x,G,D){for(var y=x("./utils"),S=x("./support"),p=x("./nodejsUtils"),k=x("./stream/GenericWorker"),L=new Array(256),d=0;d<256;d++)L[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;L[254]=L[254]=1;function u(){k.call(this,"utf-8 decode"),this.leftOver=null}function C(){k.call(this,"utf-8 encode")}D.utf8encode=function(g){return S.nodebuffer?p.newBufferFrom(g,"utf-8"):(function(B){var w,b,r,e,t,a=B.length,l=0;for(e=0;e<a;e++)(64512&(b=B.charCodeAt(e)))==55296&&e+1<a&&(64512&(r=B.charCodeAt(e+1)))==56320&&(b=65536+(b-55296<<10)+(r-56320),e++),l+=b<128?1:b<2048?2:b<65536?3:4;for(w=S.uint8array?new Uint8Array(l):new Array(l),e=t=0;t<l;e++)(64512&(b=B.charCodeAt(e)))==55296&&e+1<a&&(64512&(r=B.charCodeAt(e+1)))==56320&&(b=65536+(b-55296<<10)+(r-56320),e++),b<128?w[t++]=b:(b<2048?w[t++]=192|b>>>6:(b<65536?w[t++]=224|b>>>12:(w[t++]=240|b>>>18,w[t++]=128|b>>>12&63),w[t++]=128|b>>>6&63),w[t++]=128|63&b);return w})(g)},D.utf8decode=function(g){return S.nodebuffer?y.transformTo("nodebuffer",g).toString("utf-8"):(function(B){var w,b,r,e,t=B.length,a=new Array(2*t);for(w=b=0;w<t;)if((r=B[w++])<128)a[b++]=r;else if(4<(e=L[r]))a[b++]=65533,w+=e-1;else{for(r&=e===2?31:e===3?15:7;1<e&&w<t;)r=r<<6|63&B[w++],e--;1<e?a[b++]=65533:r<65536?a[b++]=r:(r-=65536,a[b++]=55296|r>>10&1023,a[b++]=56320|1023&r)}return a.length!==b&&(a.subarray?a=a.subarray(0,b):a.length=b),y.applyFromCharCode(a)})(g=y.transformTo(S.uint8array?"uint8array":"array",g))},y.inherits(u,k),u.prototype.processChunk=function(g){var B=y.transformTo(S.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(S.uint8array){var w=B;(B=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),B.set(w,this.leftOver.length)}else B=this.leftOver.concat(B);this.leftOver=null}var b=(function(e,t){var a;for((t=t||e.length)>e.length&&(t=e.length),a=t-1;0<=a&&(192&e[a])==128;)a--;return a<0||a===0?t:a+L[e[a]]>t?a:t})(B),r=B;b!==B.length&&(S.uint8array?(r=B.subarray(0,b),this.leftOver=B.subarray(b,B.length)):(r=B.slice(0,b),this.leftOver=B.slice(b,B.length))),this.push({data:D.utf8decode(r),meta:g.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:D.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},D.Utf8DecodeWorker=u,y.inherits(C,k),C.prototype.processChunk=function(g){this.push({data:D.utf8encode(g.data),meta:g.meta})},D.Utf8EncodeWorker=C},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(x,G,D){var y=x("./support"),S=x("./base64"),p=x("./nodejsUtils"),k=x("./external");function L(w){return w}function d(w,b){for(var r=0;r<w.length;++r)b[r]=255&w.charCodeAt(r);return b}x("setimmediate"),D.newBlob=function(w,b){D.checkSupport("blob");try{return new Blob([w],{type:b})}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(w),r.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(w,b,r){var e=[],t=0,a=w.length;if(a<=r)return String.fromCharCode.apply(null,w);for(;t<a;)b==="array"||b==="nodebuffer"?e.push(String.fromCharCode.apply(null,w.slice(t,Math.min(t+r,a)))):e.push(String.fromCharCode.apply(null,w.subarray(t,Math.min(t+r,a)))),t+=r;return e.join("")},stringifyByChar:function(w){for(var b="",r=0;r<w.length;r++)b+=String.fromCharCode(w[r]);return b},applyCanBeUsed:{uint8array:(function(){try{return y.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return y.nodebuffer&&String.fromCharCode.apply(null,p.allocBuffer(1)).length===1}catch{return!1}})()}};function C(w){var b=65536,r=D.getTypeOf(w),e=!0;if(r==="uint8array"?e=u.applyCanBeUsed.uint8array:r==="nodebuffer"&&(e=u.applyCanBeUsed.nodebuffer),e)for(;1<b;)try{return u.stringifyByChunk(w,r,b)}catch{b=Math.floor(b/2)}return u.stringifyByChar(w)}function g(w,b){for(var r=0;r<w.length;r++)b[r]=w[r];return b}D.applyFromCharCode=C;var B={};B.string={string:L,array:function(w){return d(w,new Array(w.length))},arraybuffer:function(w){return B.string.uint8array(w).buffer},uint8array:function(w){return d(w,new Uint8Array(w.length))},nodebuffer:function(w){return d(w,p.allocBuffer(w.length))}},B.array={string:C,array:L,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return p.newBufferFrom(w)}},B.arraybuffer={string:function(w){return C(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:L,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return p.newBufferFrom(new Uint8Array(w))}},B.uint8array={string:C,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:L,nodebuffer:function(w){return p.newBufferFrom(w)}},B.nodebuffer={string:C,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return B.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:L},D.transformTo=function(w,b){if(b=b||"",!w)return b;D.checkSupport(w);var r=D.getTypeOf(b);return B[r][w](b)},D.resolve=function(w){for(var b=w.split("/"),r=[],e=0;e<b.length;e++){var t=b[e];t==="."||t===""&&e!==0&&e!==b.length-1||(t===".."?r.pop():r.push(t))}return r.join("/")},D.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":y.nodebuffer&&p.isBuffer(w)?"nodebuffer":y.uint8array&&w instanceof Uint8Array?"uint8array":y.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},D.checkSupport=function(w){if(!y[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},D.MAX_VALUE_16BITS=65535,D.MAX_VALUE_32BITS=-1,D.pretty=function(w){var b,r,e="";for(r=0;r<(w||"").length;r++)e+="\\x"+((b=w.charCodeAt(r))<16?"0":"")+b.toString(16).toUpperCase();return e},D.delay=function(w,b,r){setImmediate(function(){w.apply(r||null,b||[])})},D.inherits=function(w,b){function r(){}r.prototype=b.prototype,w.prototype=new r},D.extend=function(){var w,b,r={};for(w=0;w<arguments.length;w++)for(b in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],b)&&r[b]===void 0&&(r[b]=arguments[w][b]);return r},D.prepareContent=function(w,b,r,e,t){return k.Promise.resolve(b).then(function(a){return y.blob&&(a instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a))!==-1)&&typeof FileReader<"u"?new k.Promise(function(l,o){var A=new FileReader;A.onload=function(M){l(M.target.result)},A.onerror=function(M){o(M.target.error)},A.readAsArrayBuffer(a)}):a}).then(function(a){var l=D.getTypeOf(a);return l?(l==="arraybuffer"?a=D.transformTo("uint8array",a):l==="string"&&(t?a=S.decode(a):r&&e!==!0&&(a=(function(o){return d(o,y.uint8array?new Uint8Array(o.length):new Array(o.length))})(a))),a):k.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(x,G,D){var y=x("./reader/readerFor"),S=x("./utils"),p=x("./signature"),k=x("./zipEntry"),L=x("./support");function d(u){this.files=[],this.loadOptions=u}d.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var C=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+S.pretty(C)+", expected "+S.pretty(u)+")")}},isSignature:function(u,C){var g=this.reader.index;this.reader.setIndex(u);var B=this.reader.readString(4)===C;return this.reader.setIndex(g),B},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),C=L.uint8array?"uint8array":"array",g=S.transformTo(C,u);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,C,g,B=this.zip64EndOfCentralSize-44;0<B;)u=this.reader.readInt(2),C=this.reader.readInt(4),g=this.reader.readData(C),this.zip64ExtensibleData[u]={id:u,length:C,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,C;for(u=0;u<this.files.length;u++)C=this.files[u],this.reader.setIndex(C.localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),C.readLocalPart(this.reader),C.handleUTF8(),C.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(u=new k({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var C=u;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===S.MAX_VALUE_16BITS||this.diskWithCentralDirStart===S.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===S.MAX_VALUE_16BITS||this.centralDirRecords===S.MAX_VALUE_16BITS||this.centralDirSize===S.MAX_VALUE_32BITS||this.centralDirOffset===S.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var B=C-g;if(0<B)this.isSignature(C,p.CENTRAL_FILE_HEADER)||(this.reader.zero=B);else if(B<0)throw new Error("Corrupted zip: missing "+Math.abs(B)+" bytes.")},prepareReader:function(u){this.reader=y(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},G.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(x,G,D){var y=x("./reader/readerFor"),S=x("./utils"),p=x("./compressedObject"),k=x("./crc32"),L=x("./utf8"),d=x("./compressions"),u=x("./support");function C(g,B){this.options=g,this.loadOptions=B}C.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var B,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((B=(function(b){for(var r in d)if(Object.prototype.hasOwnProperty.call(d,r)&&d[r].magic===b)return d[r];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+S.pretty(this.compressionMethod)+" unknown (inner file : "+S.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,B,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var B=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(B),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=y(this.extraFields[1].value);this.uncompressedSize===S.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===S.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===S.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===S.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var B,w,b,r=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<r;)B=g.readInt(2),w=g.readInt(2),b=g.readData(w),this.extraFields[B]={id:B,length:w,value:b};g.setIndex(r)},handleUTF8:function(){var g=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=L.utf8decode(this.fileName),this.fileCommentStr=L.utf8decode(this.fileComment);else{var B=this.findExtraFieldUnicodePath();if(B!==null)this.fileNameStr=B;else{var w=S.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var r=S.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var B=y(g.value);return B.readInt(1)!==1||k(this.fileName)!==B.readInt(4)?null:L.utf8decode(B.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var B=y(g.value);return B.readInt(1)!==1||k(this.fileComment)!==B.readInt(4)?null:L.utf8decode(B.readData(g.length-5))}return null}},G.exports=C},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(x,G,D){function y(B,w,b){this.name=B,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=w,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var S=x("./stream/StreamHelper"),p=x("./stream/DataWorker"),k=x("./utf8"),L=x("./compressedObject"),d=x("./stream/GenericWorker");y.prototype={internalStream:function(B){var w=null,b="string";try{if(!B)throw new Error("No output type specified.");var r=(b=B.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),w=this._decompressWorker();var e=!this._dataBinary;e&&!r&&(w=w.pipe(new k.Utf8EncodeWorker)),!e&&r&&(w=w.pipe(new k.Utf8DecodeWorker))}catch(t){(w=new d("error")).error(t)}return new S(w,b,"")},async:function(B,w){return this.internalStream(B).accumulate(w)},nodeStream:function(B,w){return this.internalStream(B||"nodebuffer").toNodejsStream(w)},_compressWorker:function(B,w){if(this._data instanceof L&&this._data.compression.magic===B.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new k.Utf8EncodeWorker)),L.createWorkerFrom(b,B,w)},_decompressWorker:function(){return this._data instanceof L?this._data.getContentWorker():this._data instanceof d?this._data:new p(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],C=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<u.length;g++)y.prototype[u[g]]=C;G.exports=y},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(x,G,D){(function(y){var S,p,k=y.MutationObserver||y.WebKitMutationObserver;if(k){var L=0,d=new k(B),u=y.document.createTextNode("");d.observe(u,{characterData:!0}),S=function(){u.data=L=++L%2}}else if(y.setImmediate||y.MessageChannel===void 0)S="document"in y&&"onreadystatechange"in y.document.createElement("script")?function(){var w=y.document.createElement("script");w.onreadystatechange=function(){B(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},y.document.documentElement.appendChild(w)}:function(){setTimeout(B,0)};else{var C=new y.MessageChannel;C.port1.onmessage=B,S=function(){C.port2.postMessage(0)}}var g=[];function B(){var w,b;p=!0;for(var r=g.length;r;){for(b=g,g=[],w=-1;++w<r;)b[w]();r=g.length}p=!1}G.exports=function(w){g.push(w)!==1||p||S()}}).call(this,typeof or<"u"?or:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(x,G,D){var y=x("immediate");function S(){}var p={},k=["REJECTED"],L=["FULFILLED"],d=["PENDING"];function u(r){if(typeof r!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,r!==S&&w(this,r)}function C(r,e,t){this.promise=r,typeof e=="function"&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),typeof t=="function"&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function g(r,e,t){y(function(){var a;try{a=e(t)}catch(l){return p.reject(r,l)}a===r?p.reject(r,new TypeError("Cannot resolve promise with itself")):p.resolve(r,a)})}function B(r){var e=r&&r.then;if(r&&(typeof r=="object"||typeof r=="function")&&typeof e=="function")return function(){e.apply(r,arguments)}}function w(r,e){var t=!1;function a(A){t||(t=!0,p.reject(r,A))}function l(A){t||(t=!0,p.resolve(r,A))}var o=b(function(){e(l,a)});o.status==="error"&&a(o.value)}function b(r,e){var t={};try{t.value=r(e),t.status="success"}catch(a){t.status="error",t.value=a}return t}(G.exports=u).prototype.finally=function(r){if(typeof r!="function")return this;var e=this.constructor;return this.then(function(t){return e.resolve(r()).then(function(){return t})},function(t){return e.resolve(r()).then(function(){throw t})})},u.prototype.catch=function(r){return this.then(null,r)},u.prototype.then=function(r,e){if(typeof r!="function"&&this.state===L||typeof e!="function"&&this.state===k)return this;var t=new this.constructor(S);return this.state!==d?g(t,this.state===L?r:e,this.outcome):this.queue.push(new C(t,r,e)),t},C.prototype.callFulfilled=function(r){p.resolve(this.promise,r)},C.prototype.otherCallFulfilled=function(r){g(this.promise,this.onFulfilled,r)},C.prototype.callRejected=function(r){p.reject(this.promise,r)},C.prototype.otherCallRejected=function(r){g(this.promise,this.onRejected,r)},p.resolve=function(r,e){var t=b(B,e);if(t.status==="error")return p.reject(r,t.value);var a=t.value;if(a)w(r,a);else{r.state=L,r.outcome=e;for(var l=-1,o=r.queue.length;++l<o;)r.queue[l].callFulfilled(e)}return r},p.reject=function(r,e){r.state=k,r.outcome=e;for(var t=-1,a=r.queue.length;++t<a;)r.queue[t].callRejected(e);return r},u.resolve=function(r){return r instanceof this?r:p.resolve(new this(S),r)},u.reject=function(r){var e=new this(S);return p.reject(e,r)},u.all=function(r){var e=this;if(Object.prototype.toString.call(r)!=="[object Array]")return this.reject(new TypeError("must be an array"));var t=r.length,a=!1;if(!t)return this.resolve([]);for(var l=new Array(t),o=0,A=-1,M=new this(S);++A<t;)P(r[A],A);return M;function P(V,U){e.resolve(V).then(function(_){l[U]=_,++o!==t||a||(a=!0,p.resolve(M,l))},function(_){a||(a=!0,p.reject(M,_))})}},u.race=function(r){var e=this;if(Object.prototype.toString.call(r)!=="[object Array]")return this.reject(new TypeError("must be an array"));var t=r.length,a=!1;if(!t)return this.resolve([]);for(var l=-1,o=new this(S);++l<t;)A=r[l],e.resolve(A).then(function(M){a||(a=!0,p.resolve(o,M))},function(M){a||(a=!0,p.reject(o,M))});var A;return o}},{immediate:36}],38:[function(x,G,D){var y={};(0,x("./lib/utils/common").assign)(y,x("./lib/deflate"),x("./lib/inflate"),x("./lib/zlib/constants")),G.exports=y},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(x,G,D){var y=x("./zlib/deflate"),S=x("./utils/common"),p=x("./utils/strings"),k=x("./zlib/messages"),L=x("./zlib/zstream"),d=Object.prototype.toString,u=0,C=-1,g=0,B=8;function w(r){if(!(this instanceof w))return new w(r);this.options=S.assign({level:C,method:B,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},r||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new L,this.strm.avail_out=0;var t=y.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==u)throw new Error(k[t]);if(e.header&&y.deflateSetHeader(this.strm,e.header),e.dictionary){var a;if(a=typeof e.dictionary=="string"?p.string2buf(e.dictionary):d.call(e.dictionary)==="[object ArrayBuffer]"?new Uint8Array(e.dictionary):e.dictionary,(t=y.deflateSetDictionary(this.strm,a))!==u)throw new Error(k[t]);this._dict_set=!0}}function b(r,e){var t=new w(e);if(t.push(r,!0),t.err)throw t.msg||k[t.err];return t.result}w.prototype.push=function(r,e){var t,a,l=this.strm,o=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:e===!0?4:0,typeof r=="string"?l.input=p.string2buf(r):d.call(r)==="[object ArrayBuffer]"?l.input=new Uint8Array(r):l.input=r,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new S.Buf8(o),l.next_out=0,l.avail_out=o),(t=y.deflate(l,a))!==1&&t!==u)return this.onEnd(t),!(this.ended=!0);l.avail_out!==0&&(l.avail_in!==0||a!==4&&a!==2)||(this.options.to==="string"?this.onData(p.buf2binstring(S.shrinkBuf(l.output,l.next_out))):this.onData(S.shrinkBuf(l.output,l.next_out)))}while((0<l.avail_in||l.avail_out===0)&&t!==1);return a===4?(t=y.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===u):a!==2||(this.onEnd(u),!(l.avail_out=0))},w.prototype.onData=function(r){this.chunks.push(r)},w.prototype.onEnd=function(r){r===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},D.Deflate=w,D.deflate=b,D.deflateRaw=function(r,e){return(e=e||{}).raw=!0,b(r,e)},D.gzip=function(r,e){return(e=e||{}).gzip=!0,b(r,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(x,G,D){var y=x("./zlib/inflate"),S=x("./utils/common"),p=x("./utils/strings"),k=x("./zlib/constants"),L=x("./zlib/messages"),d=x("./zlib/zstream"),u=x("./zlib/gzheader"),C=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=S.assign({chunkSize:16384,windowBits:0,to:""},w||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||w&&w.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var r=y.inflateInit2(this.strm,b.windowBits);if(r!==k.Z_OK)throw new Error(L[r]);this.header=new u,y.inflateGetHeader(this.strm,this.header)}function B(w,b){var r=new g(b);if(r.push(w,!0),r.err)throw r.msg||L[r.err];return r.result}g.prototype.push=function(w,b){var r,e,t,a,l,o,A=this.strm,M=this.options.chunkSize,P=this.options.dictionary,V=!1;if(this.ended)return!1;e=b===~~b?b:b===!0?k.Z_FINISH:k.Z_NO_FLUSH,typeof w=="string"?A.input=p.binstring2buf(w):C.call(w)==="[object ArrayBuffer]"?A.input=new Uint8Array(w):A.input=w,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new S.Buf8(M),A.next_out=0,A.avail_out=M),(r=y.inflate(A,k.Z_NO_FLUSH))===k.Z_NEED_DICT&&P&&(o=typeof P=="string"?p.string2buf(P):C.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,r=y.inflateSetDictionary(this.strm,o)),r===k.Z_BUF_ERROR&&V===!0&&(r=k.Z_OK,V=!1),r!==k.Z_STREAM_END&&r!==k.Z_OK)return this.onEnd(r),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&r!==k.Z_STREAM_END&&(A.avail_in!==0||e!==k.Z_FINISH&&e!==k.Z_SYNC_FLUSH)||(this.options.to==="string"?(t=p.utf8border(A.output,A.next_out),a=A.next_out-t,l=p.buf2string(A.output,t),A.next_out=a,A.avail_out=M-a,a&&S.arraySet(A.output,A.output,t,a,0),this.onData(l)):this.onData(S.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(V=!0)}while((0<A.avail_in||A.avail_out===0)&&r!==k.Z_STREAM_END);return r===k.Z_STREAM_END&&(e=k.Z_FINISH),e===k.Z_FINISH?(r=y.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===k.Z_OK):e!==k.Z_SYNC_FLUSH||(this.onEnd(k.Z_OK),!(A.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===k.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},D.Inflate=g,D.inflate=B,D.inflateRaw=function(w,b){return(b=b||{}).raw=!0,B(w,b)},D.ungzip=B},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(x,G,D){var y=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";D.assign=function(k){for(var L=Array.prototype.slice.call(arguments,1);L.length;){var d=L.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var u in d)d.hasOwnProperty(u)&&(k[u]=d[u])}}return k},D.shrinkBuf=function(k,L){return k.length===L?k:k.subarray?k.subarray(0,L):(k.length=L,k)};var S={arraySet:function(k,L,d,u,C){if(L.subarray&&k.subarray)k.set(L.subarray(d,d+u),C);else for(var g=0;g<u;g++)k[C+g]=L[d+g]},flattenChunks:function(k){var L,d,u,C,g,B;for(L=u=0,d=k.length;L<d;L++)u+=k[L].length;for(B=new Uint8Array(u),L=C=0,d=k.length;L<d;L++)g=k[L],B.set(g,C),C+=g.length;return B}},p={arraySet:function(k,L,d,u,C){for(var g=0;g<u;g++)k[C+g]=L[d+g]},flattenChunks:function(k){return[].concat.apply([],k)}};D.setTyped=function(k){k?(D.Buf8=Uint8Array,D.Buf16=Uint16Array,D.Buf32=Int32Array,D.assign(D,S)):(D.Buf8=Array,D.Buf16=Array,D.Buf32=Array,D.assign(D,p))},D.setTyped(y)},{}],42:[function(x,G,D){var y=x("./common"),S=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{S=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var k=new y.Buf8(256),L=0;L<256;L++)k[L]=252<=L?6:248<=L?5:240<=L?4:224<=L?3:192<=L?2:1;function d(u,C){if(C<65537&&(u.subarray&&p||!u.subarray&&S))return String.fromCharCode.apply(null,y.shrinkBuf(u,C));for(var g="",B=0;B<C;B++)g+=String.fromCharCode(u[B]);return g}k[254]=k[254]=1,D.string2buf=function(u){var C,g,B,w,b,r=u.length,e=0;for(w=0;w<r;w++)(64512&(g=u.charCodeAt(w)))==55296&&w+1<r&&(64512&(B=u.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(B-56320),w++),e+=g<128?1:g<2048?2:g<65536?3:4;for(C=new y.Buf8(e),w=b=0;b<e;w++)(64512&(g=u.charCodeAt(w)))==55296&&w+1<r&&(64512&(B=u.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(B-56320),w++),g<128?C[b++]=g:(g<2048?C[b++]=192|g>>>6:(g<65536?C[b++]=224|g>>>12:(C[b++]=240|g>>>18,C[b++]=128|g>>>12&63),C[b++]=128|g>>>6&63),C[b++]=128|63&g);return C},D.buf2binstring=function(u){return d(u,u.length)},D.binstring2buf=function(u){for(var C=new y.Buf8(u.length),g=0,B=C.length;g<B;g++)C[g]=u.charCodeAt(g);return C},D.buf2string=function(u,C){var g,B,w,b,r=C||u.length,e=new Array(2*r);for(g=B=0;g<r;)if((w=u[g++])<128)e[B++]=w;else if(4<(b=k[w]))e[B++]=65533,g+=b-1;else{for(w&=b===2?31:b===3?15:7;1<b&&g<r;)w=w<<6|63&u[g++],b--;1<b?e[B++]=65533:w<65536?e[B++]=w:(w-=65536,e[B++]=55296|w>>10&1023,e[B++]=56320|1023&w)}return d(e,B)},D.utf8border=function(u,C){var g;for((C=C||u.length)>u.length&&(C=u.length),g=C-1;0<=g&&(192&u[g])==128;)g--;return g<0||g===0?C:g+k[u[g]]>C?g:C}},{"./common":41}],43:[function(x,G,D){G.exports=function(y,S,p,k){for(var L=65535&y|0,d=y>>>16&65535|0,u=0;p!==0;){for(p-=u=2e3<p?2e3:p;d=d+(L=L+S[k++]|0)|0,--u;);L%=65521,d%=65521}return L|d<<16|0}},{}],44:[function(x,G,D){G.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(x,G,D){var y=(function(){for(var S,p=[],k=0;k<256;k++){S=k;for(var L=0;L<8;L++)S=1&S?3988292384^S>>>1:S>>>1;p[k]=S}return p})();G.exports=function(S,p,k,L){var d=y,u=L+k;S^=-1;for(var C=L;C<u;C++)S=S>>>8^d[255&(S^p[C])];return-1^S}},{}],46:[function(x,G,D){var y,S=x("../utils/common"),p=x("./trees"),k=x("./adler32"),L=x("./crc32"),d=x("./messages"),u=0,C=4,g=0,B=-2,w=-1,b=4,r=2,e=8,t=9,a=286,l=30,o=19,A=2*a+1,M=15,P=3,V=258,U=V+P+1,_=42,T=113,n=1,R=2,K=3,N=4;function Z(f,st){return f.msg=d[st],st}function W(f){return(f<<1)-(4<f?9:0)}function z(f){for(var st=f.length;0<=--st;)f[st]=0}function h(f){var st=f.state,rt=st.pending;rt>f.avail_out&&(rt=f.avail_out),rt!==0&&(S.arraySet(f.output,st.pending_buf,st.pending_out,rt,f.next_out),f.next_out+=rt,st.pending_out+=rt,f.total_out+=rt,f.avail_out-=rt,st.pending-=rt,st.pending===0&&(st.pending_out=0))}function i(f,st){p._tr_flush_block(f,0<=f.block_start?f.block_start:-1,f.strstart-f.block_start,st),f.block_start=f.strstart,h(f.strm)}function c(f,st){f.pending_buf[f.pending++]=st}function v(f,st){f.pending_buf[f.pending++]=st>>>8&255,f.pending_buf[f.pending++]=255&st}function E(f,st){var rt,H,j=f.max_chain_length,s=f.strstart,m=f.prev_length,ot=f.nice_match,J=f.strstart>f.w_size-U?f.strstart-(f.w_size-U):0,mt=f.window,gt=f.w_mask,ut=f.prev,vt=f.strstart+V,It=mt[s+m-1],Bt=mt[s+m];f.prev_length>=f.good_match&&(j>>=2),ot>f.lookahead&&(ot=f.lookahead);do if(mt[(rt=st)+m]===Bt&&mt[rt+m-1]===It&&mt[rt]===mt[s]&&mt[++rt]===mt[s+1]){s+=2,rt++;do;while(mt[++s]===mt[++rt]&&mt[++s]===mt[++rt]&&mt[++s]===mt[++rt]&&mt[++s]===mt[++rt]&&mt[++s]===mt[++rt]&&mt[++s]===mt[++rt]&&mt[++s]===mt[++rt]&&mt[++s]===mt[++rt]&&s<vt);if(H=V-(vt-s),s=vt-V,m<H){if(f.match_start=st,ot<=(m=H))break;It=mt[s+m-1],Bt=mt[s+m]}}while((st=ut[st&gt])>J&&--j!=0);return m<=f.lookahead?m:f.lookahead}function et(f){var st,rt,H,j,s,m,ot,J,mt,gt,ut=f.w_size;do{if(j=f.window_size-f.lookahead-f.strstart,f.strstart>=ut+(ut-U)){for(S.arraySet(f.window,f.window,ut,ut,0),f.match_start-=ut,f.strstart-=ut,f.block_start-=ut,st=rt=f.hash_size;H=f.head[--st],f.head[st]=ut<=H?H-ut:0,--rt;);for(st=rt=ut;H=f.prev[--st],f.prev[st]=ut<=H?H-ut:0,--rt;);j+=ut}if(f.strm.avail_in===0)break;if(m=f.strm,ot=f.window,J=f.strstart+f.lookahead,mt=j,gt=void 0,gt=m.avail_in,mt<gt&&(gt=mt),rt=gt===0?0:(m.avail_in-=gt,S.arraySet(ot,m.input,m.next_in,gt,J),m.state.wrap===1?m.adler=k(m.adler,ot,gt,J):m.state.wrap===2&&(m.adler=L(m.adler,ot,gt,J)),m.next_in+=gt,m.total_in+=gt,gt),f.lookahead+=rt,f.lookahead+f.insert>=P)for(s=f.strstart-f.insert,f.ins_h=f.window[s],f.ins_h=(f.ins_h<<f.hash_shift^f.window[s+1])&f.hash_mask;f.insert&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[s+P-1])&f.hash_mask,f.prev[s&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=s,s++,f.insert--,!(f.lookahead+f.insert<P)););}while(f.lookahead<U&&f.strm.avail_in!==0)}function ft(f,st){for(var rt,H;;){if(f.lookahead<U){if(et(f),f.lookahead<U&&st===u)return n;if(f.lookahead===0)break}if(rt=0,f.lookahead>=P&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+P-1])&f.hash_mask,rt=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),rt!==0&&f.strstart-rt<=f.w_size-U&&(f.match_length=E(f,rt)),f.match_length>=P)if(H=p._tr_tally(f,f.strstart-f.match_start,f.match_length-P),f.lookahead-=f.match_length,f.match_length<=f.max_lazy_match&&f.lookahead>=P){for(f.match_length--;f.strstart++,f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+P-1])&f.hash_mask,rt=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart,--f.match_length!=0;);f.strstart++}else f.strstart+=f.match_length,f.match_length=0,f.ins_h=f.window[f.strstart],f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+1])&f.hash_mask;else H=p._tr_tally(f,0,f.window[f.strstart]),f.lookahead--,f.strstart++;if(H&&(i(f,!1),f.strm.avail_out===0))return n}return f.insert=f.strstart<P-1?f.strstart:P-1,st===C?(i(f,!0),f.strm.avail_out===0?K:N):f.last_lit&&(i(f,!1),f.strm.avail_out===0)?n:R}function X(f,st){for(var rt,H,j;;){if(f.lookahead<U){if(et(f),f.lookahead<U&&st===u)return n;if(f.lookahead===0)break}if(rt=0,f.lookahead>=P&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+P-1])&f.hash_mask,rt=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),f.prev_length=f.match_length,f.prev_match=f.match_start,f.match_length=P-1,rt!==0&&f.prev_length<f.max_lazy_match&&f.strstart-rt<=f.w_size-U&&(f.match_length=E(f,rt),f.match_length<=5&&(f.strategy===1||f.match_length===P&&4096<f.strstart-f.match_start)&&(f.match_length=P-1)),f.prev_length>=P&&f.match_length<=f.prev_length){for(j=f.strstart+f.lookahead-P,H=p._tr_tally(f,f.strstart-1-f.prev_match,f.prev_length-P),f.lookahead-=f.prev_length-1,f.prev_length-=2;++f.strstart<=j&&(f.ins_h=(f.ins_h<<f.hash_shift^f.window[f.strstart+P-1])&f.hash_mask,rt=f.prev[f.strstart&f.w_mask]=f.head[f.ins_h],f.head[f.ins_h]=f.strstart),--f.prev_length!=0;);if(f.match_available=0,f.match_length=P-1,f.strstart++,H&&(i(f,!1),f.strm.avail_out===0))return n}else if(f.match_available){if((H=p._tr_tally(f,0,f.window[f.strstart-1]))&&i(f,!1),f.strstart++,f.lookahead--,f.strm.avail_out===0)return n}else f.match_available=1,f.strstart++,f.lookahead--}return f.match_available&&(H=p._tr_tally(f,0,f.window[f.strstart-1]),f.match_available=0),f.insert=f.strstart<P-1?f.strstart:P-1,st===C?(i(f,!0),f.strm.avail_out===0?K:N):f.last_lit&&(i(f,!1),f.strm.avail_out===0)?n:R}function $(f,st,rt,H,j){this.good_length=f,this.max_lazy=st,this.nice_length=rt,this.max_chain=H,this.func=j}function pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=e,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*A),this.dyn_dtree=new S.Buf16(2*(2*l+1)),this.bl_tree=new S.Buf16(2*(2*o+1)),z(this.dyn_ltree),z(this.dyn_dtree),z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(M+1),this.heap=new S.Buf16(2*a+1),z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*a+1),z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function wt(f){var st;return f&&f.state?(f.total_in=f.total_out=0,f.data_type=r,(st=f.state).pending=0,st.pending_out=0,st.wrap<0&&(st.wrap=-st.wrap),st.status=st.wrap?_:T,f.adler=st.wrap===2?0:1,st.last_flush=u,p._tr_init(st),g):Z(f,B)}function Et(f){var st=wt(f);return st===g&&(function(rt){rt.window_size=2*rt.w_size,z(rt.head),rt.max_lazy_match=y[rt.level].max_lazy,rt.good_match=y[rt.level].good_length,rt.nice_match=y[rt.level].nice_length,rt.max_chain_length=y[rt.level].max_chain,rt.strstart=0,rt.block_start=0,rt.lookahead=0,rt.insert=0,rt.match_length=rt.prev_length=P-1,rt.match_available=0,rt.ins_h=0})(f.state),st}function Mt(f,st,rt,H,j,s){if(!f)return B;var m=1;if(st===w&&(st=6),H<0?(m=0,H=-H):15<H&&(m=2,H-=16),j<1||t<j||rt!==e||H<8||15<H||st<0||9<st||s<0||b<s)return Z(f,B);H===8&&(H=9);var ot=new pt;return(f.state=ot).strm=f,ot.wrap=m,ot.gzhead=null,ot.w_bits=H,ot.w_size=1<<ot.w_bits,ot.w_mask=ot.w_size-1,ot.hash_bits=j+7,ot.hash_size=1<<ot.hash_bits,ot.hash_mask=ot.hash_size-1,ot.hash_shift=~~((ot.hash_bits+P-1)/P),ot.window=new S.Buf8(2*ot.w_size),ot.head=new S.Buf16(ot.hash_size),ot.prev=new S.Buf16(ot.w_size),ot.lit_bufsize=1<<j+6,ot.pending_buf_size=4*ot.lit_bufsize,ot.pending_buf=new S.Buf8(ot.pending_buf_size),ot.d_buf=1*ot.lit_bufsize,ot.l_buf=3*ot.lit_bufsize,ot.level=st,ot.strategy=s,ot.method=rt,Et(f)}y=[new $(0,0,0,0,function(f,st){var rt=65535;for(rt>f.pending_buf_size-5&&(rt=f.pending_buf_size-5);;){if(f.lookahead<=1){if(et(f),f.lookahead===0&&st===u)return n;if(f.lookahead===0)break}f.strstart+=f.lookahead,f.lookahead=0;var H=f.block_start+rt;if((f.strstart===0||f.strstart>=H)&&(f.lookahead=f.strstart-H,f.strstart=H,i(f,!1),f.strm.avail_out===0)||f.strstart-f.block_start>=f.w_size-U&&(i(f,!1),f.strm.avail_out===0))return n}return f.insert=0,st===C?(i(f,!0),f.strm.avail_out===0?K:N):(f.strstart>f.block_start&&(i(f,!1),f.strm.avail_out),n)}),new $(4,4,8,4,ft),new $(4,5,16,8,ft),new $(4,6,32,32,ft),new $(4,4,16,16,X),new $(8,16,32,32,X),new $(8,16,128,128,X),new $(8,32,128,256,X),new $(32,128,258,1024,X),new $(32,258,258,4096,X)],D.deflateInit=function(f,st){return Mt(f,st,e,15,8,0)},D.deflateInit2=Mt,D.deflateReset=Et,D.deflateResetKeep=wt,D.deflateSetHeader=function(f,st){return f&&f.state?f.state.wrap!==2?B:(f.state.gzhead=st,g):B},D.deflate=function(f,st){var rt,H,j,s;if(!f||!f.state||5<st||st<0)return f?Z(f,B):B;if(H=f.state,!f.output||!f.input&&f.avail_in!==0||H.status===666&&st!==C)return Z(f,f.avail_out===0?-5:B);if(H.strm=f,rt=H.last_flush,H.last_flush=st,H.status===_)if(H.wrap===2)f.adler=0,c(H,31),c(H,139),c(H,8),H.gzhead?(c(H,(H.gzhead.text?1:0)+(H.gzhead.hcrc?2:0)+(H.gzhead.extra?4:0)+(H.gzhead.name?8:0)+(H.gzhead.comment?16:0)),c(H,255&H.gzhead.time),c(H,H.gzhead.time>>8&255),c(H,H.gzhead.time>>16&255),c(H,H.gzhead.time>>24&255),c(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),c(H,255&H.gzhead.os),H.gzhead.extra&&H.gzhead.extra.length&&(c(H,255&H.gzhead.extra.length),c(H,H.gzhead.extra.length>>8&255)),H.gzhead.hcrc&&(f.adler=L(f.adler,H.pending_buf,H.pending,0)),H.gzindex=0,H.status=69):(c(H,0),c(H,0),c(H,0),c(H,0),c(H,0),c(H,H.level===9?2:2<=H.strategy||H.level<2?4:0),c(H,3),H.status=T);else{var m=e+(H.w_bits-8<<4)<<8;m|=(2<=H.strategy||H.level<2?0:H.level<6?1:H.level===6?2:3)<<6,H.strstart!==0&&(m|=32),m+=31-m%31,H.status=T,v(H,m),H.strstart!==0&&(v(H,f.adler>>>16),v(H,65535&f.adler)),f.adler=1}if(H.status===69)if(H.gzhead.extra){for(j=H.pending;H.gzindex<(65535&H.gzhead.extra.length)&&(H.pending!==H.pending_buf_size||(H.gzhead.hcrc&&H.pending>j&&(f.adler=L(f.adler,H.pending_buf,H.pending-j,j)),h(f),j=H.pending,H.pending!==H.pending_buf_size));)c(H,255&H.gzhead.extra[H.gzindex]),H.gzindex++;H.gzhead.hcrc&&H.pending>j&&(f.adler=L(f.adler,H.pending_buf,H.pending-j,j)),H.gzindex===H.gzhead.extra.length&&(H.gzindex=0,H.status=73)}else H.status=73;if(H.status===73)if(H.gzhead.name){j=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>j&&(f.adler=L(f.adler,H.pending_buf,H.pending-j,j)),h(f),j=H.pending,H.pending===H.pending_buf_size)){s=1;break}s=H.gzindex<H.gzhead.name.length?255&H.gzhead.name.charCodeAt(H.gzindex++):0,c(H,s)}while(s!==0);H.gzhead.hcrc&&H.pending>j&&(f.adler=L(f.adler,H.pending_buf,H.pending-j,j)),s===0&&(H.gzindex=0,H.status=91)}else H.status=91;if(H.status===91)if(H.gzhead.comment){j=H.pending;do{if(H.pending===H.pending_buf_size&&(H.gzhead.hcrc&&H.pending>j&&(f.adler=L(f.adler,H.pending_buf,H.pending-j,j)),h(f),j=H.pending,H.pending===H.pending_buf_size)){s=1;break}s=H.gzindex<H.gzhead.comment.length?255&H.gzhead.comment.charCodeAt(H.gzindex++):0,c(H,s)}while(s!==0);H.gzhead.hcrc&&H.pending>j&&(f.adler=L(f.adler,H.pending_buf,H.pending-j,j)),s===0&&(H.status=103)}else H.status=103;if(H.status===103&&(H.gzhead.hcrc?(H.pending+2>H.pending_buf_size&&h(f),H.pending+2<=H.pending_buf_size&&(c(H,255&f.adler),c(H,f.adler>>8&255),f.adler=0,H.status=T)):H.status=T),H.pending!==0){if(h(f),f.avail_out===0)return H.last_flush=-1,g}else if(f.avail_in===0&&W(st)<=W(rt)&&st!==C)return Z(f,-5);if(H.status===666&&f.avail_in!==0)return Z(f,-5);if(f.avail_in!==0||H.lookahead!==0||st!==u&&H.status!==666){var ot=H.strategy===2?(function(J,mt){for(var gt;;){if(J.lookahead===0&&(et(J),J.lookahead===0)){if(mt===u)return n;break}if(J.match_length=0,gt=p._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,gt&&(i(J,!1),J.strm.avail_out===0))return n}return J.insert=0,mt===C?(i(J,!0),J.strm.avail_out===0?K:N):J.last_lit&&(i(J,!1),J.strm.avail_out===0)?n:R})(H,st):H.strategy===3?(function(J,mt){for(var gt,ut,vt,It,Bt=J.window;;){if(J.lookahead<=V){if(et(J),J.lookahead<=V&&mt===u)return n;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=P&&0<J.strstart&&(ut=Bt[vt=J.strstart-1])===Bt[++vt]&&ut===Bt[++vt]&&ut===Bt[++vt]){It=J.strstart+V;do;while(ut===Bt[++vt]&&ut===Bt[++vt]&&ut===Bt[++vt]&&ut===Bt[++vt]&&ut===Bt[++vt]&&ut===Bt[++vt]&&ut===Bt[++vt]&&ut===Bt[++vt]&&vt<It);J.match_length=V-(It-vt),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=P?(gt=p._tr_tally(J,1,J.match_length-P),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(gt=p._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),gt&&(i(J,!1),J.strm.avail_out===0))return n}return J.insert=0,mt===C?(i(J,!0),J.strm.avail_out===0?K:N):J.last_lit&&(i(J,!1),J.strm.avail_out===0)?n:R})(H,st):y[H.level].func(H,st);if(ot!==K&&ot!==N||(H.status=666),ot===n||ot===K)return f.avail_out===0&&(H.last_flush=-1),g;if(ot===R&&(st===1?p._tr_align(H):st!==5&&(p._tr_stored_block(H,0,0,!1),st===3&&(z(H.head),H.lookahead===0&&(H.strstart=0,H.block_start=0,H.insert=0))),h(f),f.avail_out===0))return H.last_flush=-1,g}return st!==C?g:H.wrap<=0?1:(H.wrap===2?(c(H,255&f.adler),c(H,f.adler>>8&255),c(H,f.adler>>16&255),c(H,f.adler>>24&255),c(H,255&f.total_in),c(H,f.total_in>>8&255),c(H,f.total_in>>16&255),c(H,f.total_in>>24&255)):(v(H,f.adler>>>16),v(H,65535&f.adler)),h(f),0<H.wrap&&(H.wrap=-H.wrap),H.pending!==0?g:1)},D.deflateEnd=function(f){var st;return f&&f.state?(st=f.state.status)!==_&&st!==69&&st!==73&&st!==91&&st!==103&&st!==T&&st!==666?Z(f,B):(f.state=null,st===T?Z(f,-3):g):B},D.deflateSetDictionary=function(f,st){var rt,H,j,s,m,ot,J,mt,gt=st.length;if(!f||!f.state||(s=(rt=f.state).wrap)===2||s===1&&rt.status!==_||rt.lookahead)return B;for(s===1&&(f.adler=k(f.adler,st,gt,0)),rt.wrap=0,gt>=rt.w_size&&(s===0&&(z(rt.head),rt.strstart=0,rt.block_start=0,rt.insert=0),mt=new S.Buf8(rt.w_size),S.arraySet(mt,st,gt-rt.w_size,rt.w_size,0),st=mt,gt=rt.w_size),m=f.avail_in,ot=f.next_in,J=f.input,f.avail_in=gt,f.next_in=0,f.input=st,et(rt);rt.lookahead>=P;){for(H=rt.strstart,j=rt.lookahead-(P-1);rt.ins_h=(rt.ins_h<<rt.hash_shift^rt.window[H+P-1])&rt.hash_mask,rt.prev[H&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=H,H++,--j;);rt.strstart=H,rt.lookahead=P-1,et(rt)}return rt.strstart+=rt.lookahead,rt.block_start=rt.strstart,rt.insert=rt.lookahead,rt.lookahead=0,rt.match_length=rt.prev_length=P-1,rt.match_available=0,f.next_in=ot,f.input=J,f.avail_in=m,rt.wrap=s,g},D.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(x,G,D){G.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(x,G,D){G.exports=function(y,S){var p,k,L,d,u,C,g,B,w,b,r,e,t,a,l,o,A,M,P,V,U,_,T,n,R;p=y.state,k=y.next_in,n=y.input,L=k+(y.avail_in-5),d=y.next_out,R=y.output,u=d-(S-y.avail_out),C=d+(y.avail_out-257),g=p.dmax,B=p.wsize,w=p.whave,b=p.wnext,r=p.window,e=p.hold,t=p.bits,a=p.lencode,l=p.distcode,o=(1<<p.lenbits)-1,A=(1<<p.distbits)-1;t:do{t<15&&(e+=n[k++]<<t,t+=8,e+=n[k++]<<t,t+=8),M=a[e&o];e:for(;;){if(e>>>=P=M>>>24,t-=P,(P=M>>>16&255)===0)R[d++]=65535&M;else{if(!(16&P)){if((64&P)==0){M=a[(65535&M)+(e&(1<<P)-1)];continue e}if(32&P){p.mode=12;break t}y.msg="invalid literal/length code",p.mode=30;break t}V=65535&M,(P&=15)&&(t<P&&(e+=n[k++]<<t,t+=8),V+=e&(1<<P)-1,e>>>=P,t-=P),t<15&&(e+=n[k++]<<t,t+=8,e+=n[k++]<<t,t+=8),M=l[e&A];r:for(;;){if(e>>>=P=M>>>24,t-=P,!(16&(P=M>>>16&255))){if((64&P)==0){M=l[(65535&M)+(e&(1<<P)-1)];continue r}y.msg="invalid distance code",p.mode=30;break t}if(U=65535&M,t<(P&=15)&&(e+=n[k++]<<t,(t+=8)<P&&(e+=n[k++]<<t,t+=8)),g<(U+=e&(1<<P)-1)){y.msg="invalid distance too far back",p.mode=30;break t}if(e>>>=P,t-=P,(P=d-u)<U){if(w<(P=U-P)&&p.sane){y.msg="invalid distance too far back",p.mode=30;break t}if(T=r,(_=0)===b){if(_+=B-P,P<V){for(V-=P;R[d++]=r[_++],--P;);_=d-U,T=R}}else if(b<P){if(_+=B+b-P,(P-=b)<V){for(V-=P;R[d++]=r[_++],--P;);if(_=0,b<V){for(V-=P=b;R[d++]=r[_++],--P;);_=d-U,T=R}}}else if(_+=b-P,P<V){for(V-=P;R[d++]=r[_++],--P;);_=d-U,T=R}for(;2<V;)R[d++]=T[_++],R[d++]=T[_++],R[d++]=T[_++],V-=3;V&&(R[d++]=T[_++],1<V&&(R[d++]=T[_++]))}else{for(_=d-U;R[d++]=R[_++],R[d++]=R[_++],R[d++]=R[_++],2<(V-=3););V&&(R[d++]=R[_++],1<V&&(R[d++]=R[_++]))}break}}break}}while(k<L&&d<C);k-=V=t>>3,e&=(1<<(t-=V<<3))-1,y.next_in=k,y.next_out=d,y.avail_in=k<L?L-k+5:5-(k-L),y.avail_out=d<C?C-d+257:257-(d-C),p.hold=e,p.bits=t}},{}],49:[function(x,G,D){var y=x("../utils/common"),S=x("./adler32"),p=x("./crc32"),k=x("./inffast"),L=x("./inftrees"),d=1,u=2,C=0,g=-2,B=1,w=852,b=592;function r(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function t(_){var T;return _&&_.state?(T=_.state,_.total_in=_.total_out=T.total=0,_.msg="",T.wrap&&(_.adler=1&T.wrap),T.mode=B,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new y.Buf32(w),T.distcode=T.distdyn=new y.Buf32(b),T.sane=1,T.back=-1,C):g}function a(_){var T;return _&&_.state?((T=_.state).wsize=0,T.whave=0,T.wnext=0,t(_)):g}function l(_,T){var n,R;return _&&_.state?(R=_.state,T<0?(n=0,T=-T):(n=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?g:(R.window!==null&&R.wbits!==T&&(R.window=null),R.wrap=n,R.wbits=T,a(_))):g}function o(_,T){var n,R;return _?(R=new e,(_.state=R).window=null,(n=l(_,T))!==C&&(_.state=null),n):g}var A,M,P=!0;function V(_){if(P){var T;for(A=new y.Buf32(512),M=new y.Buf32(32),T=0;T<144;)_.lens[T++]=8;for(;T<256;)_.lens[T++]=9;for(;T<280;)_.lens[T++]=7;for(;T<288;)_.lens[T++]=8;for(L(d,_.lens,0,288,A,0,_.work,{bits:9}),T=0;T<32;)_.lens[T++]=5;L(u,_.lens,0,32,M,0,_.work,{bits:5}),P=!1}_.lencode=A,_.lenbits=9,_.distcode=M,_.distbits=5}function U(_,T,n,R){var K,N=_.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new y.Buf8(N.wsize)),R>=N.wsize?(y.arraySet(N.window,T,n-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(R<(K=N.wsize-N.wnext)&&(K=R),y.arraySet(N.window,T,n-R,K,N.wnext),(R-=K)?(y.arraySet(N.window,T,n-R,R,0),N.wnext=R,N.whave=N.wsize):(N.wnext+=K,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=K))),0}D.inflateReset=a,D.inflateReset2=l,D.inflateResetKeep=t,D.inflateInit=function(_){return o(_,15)},D.inflateInit2=o,D.inflate=function(_,T){var n,R,K,N,Z,W,z,h,i,c,v,E,et,ft,X,$,pt,wt,Et,Mt,f,st,rt,H,j=0,s=new y.Buf8(4),m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return g;(n=_.state).mode===12&&(n.mode=13),Z=_.next_out,K=_.output,z=_.avail_out,N=_.next_in,R=_.input,W=_.avail_in,h=n.hold,i=n.bits,c=W,v=z,st=C;t:for(;;)switch(n.mode){case B:if(n.wrap===0){n.mode=13;break}for(;i<16;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if(2&n.wrap&&h===35615){s[n.check=0]=255&h,s[1]=h>>>8&255,n.check=p(n.check,s,2,0),i=h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){_.msg="incorrect header check",n.mode=30;break}if((15&h)!=8){_.msg="unknown compression method",n.mode=30;break}if(i-=4,f=8+(15&(h>>>=4)),n.wbits===0)n.wbits=f;else if(f>n.wbits){_.msg="invalid window size",n.mode=30;break}n.dmax=1<<f,_.adler=n.check=1,n.mode=512&h?10:12,i=h=0;break;case 2:for(;i<16;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if(n.flags=h,(255&n.flags)!=8){_.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){_.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(s[0]=255&h,s[1]=h>>>8&255,n.check=p(n.check,s,2,0)),i=h=0,n.mode=3;case 3:for(;i<32;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}n.head&&(n.head.time=h),512&n.flags&&(s[0]=255&h,s[1]=h>>>8&255,s[2]=h>>>16&255,s[3]=h>>>24&255,n.check=p(n.check,s,4,0)),i=h=0,n.mode=4;case 4:for(;i<16;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(s[0]=255&h,s[1]=h>>>8&255,n.check=p(n.check,s,2,0)),i=h=0,n.mode=5;case 5:if(1024&n.flags){for(;i<16;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(s[0]=255&h,s[1]=h>>>8&255,n.check=p(n.check,s,2,0)),i=h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(W<(E=n.length)&&(E=W),E&&(n.head&&(f=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,R,N,E,f)),512&n.flags&&(n.check=p(n.check,R,E,N)),W-=E,N+=E,n.length-=E),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(W===0)break t;for(E=0;f=R[N+E++],n.head&&f&&n.length<65536&&(n.head.name+=String.fromCharCode(f)),f&&E<W;);if(512&n.flags&&(n.check=p(n.check,R,E,N)),W-=E,N+=E,f)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(W===0)break t;for(E=0;f=R[N+E++],n.head&&f&&n.length<65536&&(n.head.comment+=String.fromCharCode(f)),f&&E<W;);if(512&n.flags&&(n.check=p(n.check,R,E,N)),W-=E,N+=E,f)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;i<16;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if(h!==(65535&n.check)){_.msg="header crc mismatch",n.mode=30;break}i=h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),_.adler=n.check=0,n.mode=12;break;case 10:for(;i<32;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}_.adler=n.check=r(h),i=h=0,n.mode=11;case 11:if(n.havedict===0)return _.next_out=Z,_.avail_out=z,_.next_in=N,_.avail_in=W,n.hold=h,n.bits=i,2;_.adler=n.check=1,n.mode=12;case 12:if(T===5||T===6)break t;case 13:if(n.last){h>>>=7&i,i-=7&i,n.mode=27;break}for(;i<3;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}switch(n.last=1&h,i-=1,3&(h>>>=1)){case 0:n.mode=14;break;case 1:if(V(n),n.mode=20,T!==6)break;h>>>=2,i-=2;break t;case 2:n.mode=17;break;case 3:_.msg="invalid block type",n.mode=30}h>>>=2,i-=2;break;case 14:for(h>>>=7&i,i-=7&i;i<32;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if((65535&h)!=(h>>>16^65535)){_.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&h,i=h=0,n.mode=15,T===6)break t;case 15:n.mode=16;case 16:if(E=n.length){if(W<E&&(E=W),z<E&&(E=z),E===0)break t;y.arraySet(K,R,N,E,Z),W-=E,N+=E,z-=E,Z+=E,n.length-=E;break}n.mode=12;break;case 17:for(;i<14;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if(n.nlen=257+(31&h),h>>>=5,i-=5,n.ndist=1+(31&h),h>>>=5,i-=5,n.ncode=4+(15&h),h>>>=4,i-=4,286<n.nlen||30<n.ndist){_.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;i<3;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}n.lens[m[n.have++]]=7&h,h>>>=3,i-=3}for(;n.have<19;)n.lens[m[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,rt={bits:n.lenbits},st=L(0,n.lens,0,19,n.lencode,0,n.work,rt),n.lenbits=rt.bits,st){_.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;$=(j=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,pt=65535&j,!((X=j>>>24)<=i);){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if(pt<16)h>>>=X,i-=X,n.lens[n.have++]=pt;else{if(pt===16){for(H=X+2;i<H;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if(h>>>=X,i-=X,n.have===0){_.msg="invalid bit length repeat",n.mode=30;break}f=n.lens[n.have-1],E=3+(3&h),h>>>=2,i-=2}else if(pt===17){for(H=X+3;i<H;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}i-=X,f=0,E=3+(7&(h>>>=X)),h>>>=3,i-=3}else{for(H=X+7;i<H;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}i-=X,f=0,E=11+(127&(h>>>=X)),h>>>=7,i-=7}if(n.have+E>n.nlen+n.ndist){_.msg="invalid bit length repeat",n.mode=30;break}for(;E--;)n.lens[n.have++]=f}}if(n.mode===30)break;if(n.lens[256]===0){_.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,rt={bits:n.lenbits},st=L(d,n.lens,0,n.nlen,n.lencode,0,n.work,rt),n.lenbits=rt.bits,st){_.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,rt={bits:n.distbits},st=L(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,rt),n.distbits=rt.bits,st){_.msg="invalid distances set",n.mode=30;break}if(n.mode=20,T===6)break t;case 20:n.mode=21;case 21:if(6<=W&&258<=z){_.next_out=Z,_.avail_out=z,_.next_in=N,_.avail_in=W,n.hold=h,n.bits=i,k(_,v),Z=_.next_out,K=_.output,z=_.avail_out,N=_.next_in,R=_.input,W=_.avail_in,h=n.hold,i=n.bits,n.mode===12&&(n.back=-1);break}for(n.back=0;$=(j=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,pt=65535&j,!((X=j>>>24)<=i);){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if($&&(240&$)==0){for(wt=X,Et=$,Mt=pt;$=(j=n.lencode[Mt+((h&(1<<wt+Et)-1)>>wt)])>>>16&255,pt=65535&j,!(wt+(X=j>>>24)<=i);){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}h>>>=wt,i-=wt,n.back+=wt}if(h>>>=X,i-=X,n.back+=X,n.length=pt,$===0){n.mode=26;break}if(32&$){n.back=-1,n.mode=12;break}if(64&$){_.msg="invalid literal/length code",n.mode=30;break}n.extra=15&$,n.mode=22;case 22:if(n.extra){for(H=n.extra;i<H;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,i-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;$=(j=n.distcode[h&(1<<n.distbits)-1])>>>16&255,pt=65535&j,!((X=j>>>24)<=i);){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if((240&$)==0){for(wt=X,Et=$,Mt=pt;$=(j=n.distcode[Mt+((h&(1<<wt+Et)-1)>>wt)])>>>16&255,pt=65535&j,!(wt+(X=j>>>24)<=i);){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}h>>>=wt,i-=wt,n.back+=wt}if(h>>>=X,i-=X,n.back+=X,64&$){_.msg="invalid distance code",n.mode=30;break}n.offset=pt,n.extra=15&$,n.mode=24;case 24:if(n.extra){for(H=n.extra;i<H;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,i-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){_.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(z===0)break t;if(E=v-z,n.offset>E){if((E=n.offset-E)>n.whave&&n.sane){_.msg="invalid distance too far back",n.mode=30;break}et=E>n.wnext?(E-=n.wnext,n.wsize-E):n.wnext-E,E>n.length&&(E=n.length),ft=n.window}else ft=K,et=Z-n.offset,E=n.length;for(z<E&&(E=z),z-=E,n.length-=E;K[Z++]=ft[et++],--E;);n.length===0&&(n.mode=21);break;case 26:if(z===0)break t;K[Z++]=n.length,z--,n.mode=21;break;case 27:if(n.wrap){for(;i<32;){if(W===0)break t;W--,h|=R[N++]<<i,i+=8}if(v-=z,_.total_out+=v,n.total+=v,v&&(_.adler=n.check=n.flags?p(n.check,K,v,Z-v):S(n.check,K,v,Z-v)),v=z,(n.flags?h:r(h))!==n.check){_.msg="incorrect data check",n.mode=30;break}i=h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;i<32;){if(W===0)break t;W--,h+=R[N++]<<i,i+=8}if(h!==(4294967295&n.total)){_.msg="incorrect length check",n.mode=30;break}i=h=0}n.mode=29;case 29:st=1;break t;case 30:st=-3;break t;case 31:return-4;default:return g}return _.next_out=Z,_.avail_out=z,_.next_in=N,_.avail_in=W,n.hold=h,n.bits=i,(n.wsize||v!==_.avail_out&&n.mode<30&&(n.mode<27||T!==4))&&U(_,_.output,_.next_out,v-_.avail_out)?(n.mode=31,-4):(c-=_.avail_in,v-=_.avail_out,_.total_in+=c,_.total_out+=v,n.total+=v,n.wrap&&v&&(_.adler=n.check=n.flags?p(n.check,K,v,_.next_out-v):S(n.check,K,v,_.next_out-v)),_.data_type=n.bits+(n.last?64:0)+(n.mode===12?128:0)+(n.mode===20||n.mode===15?256:0),(c==0&&v===0||T===4)&&st===C&&(st=-5),st)},D.inflateEnd=function(_){if(!_||!_.state)return g;var T=_.state;return T.window&&(T.window=null),_.state=null,C},D.inflateGetHeader=function(_,T){var n;return _&&_.state?(2&(n=_.state).wrap)==0?g:((n.head=T).done=!1,C):g},D.inflateSetDictionary=function(_,T){var n,R=T.length;return _&&_.state?(n=_.state).wrap!==0&&n.mode!==11?g:n.mode===11&&S(1,T,R,0)!==n.check?-3:U(_,T,R,R)?(n.mode=31,-4):(n.havedict=1,C):g},D.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(x,G,D){var y=x("../utils/common"),S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],L=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];G.exports=function(d,u,C,g,B,w,b,r){var e,t,a,l,o,A,M,P,V,U=r.bits,_=0,T=0,n=0,R=0,K=0,N=0,Z=0,W=0,z=0,h=0,i=null,c=0,v=new y.Buf16(16),E=new y.Buf16(16),et=null,ft=0;for(_=0;_<=15;_++)v[_]=0;for(T=0;T<g;T++)v[u[C+T]]++;for(K=U,R=15;1<=R&&v[R]===0;R--);if(R<K&&(K=R),R===0)return B[w++]=20971520,B[w++]=20971520,r.bits=1,0;for(n=1;n<R&&v[n]===0;n++);for(K<n&&(K=n),_=W=1;_<=15;_++)if(W<<=1,(W-=v[_])<0)return-1;if(0<W&&(d===0||R!==1))return-1;for(E[1]=0,_=1;_<15;_++)E[_+1]=E[_]+v[_];for(T=0;T<g;T++)u[C+T]!==0&&(b[E[u[C+T]]++]=T);if(A=d===0?(i=et=b,19):d===1?(i=S,c-=257,et=p,ft-=257,256):(i=k,et=L,-1),_=n,o=w,Z=T=h=0,a=-1,l=(z=1<<(N=K))-1,d===1&&852<z||d===2&&592<z)return 1;for(;;){for(M=_-Z,V=b[T]<A?(P=0,b[T]):b[T]>A?(P=et[ft+b[T]],i[c+b[T]]):(P=96,0),e=1<<_-Z,n=t=1<<N;B[o+(h>>Z)+(t-=e)]=M<<24|P<<16|V|0,t!==0;);for(e=1<<_-1;h&e;)e>>=1;if(e!==0?(h&=e-1,h+=e):h=0,T++,--v[_]==0){if(_===R)break;_=u[C+b[T]]}if(K<_&&(h&l)!==a){for(Z===0&&(Z=K),o+=n,W=1<<(N=_-Z);N+Z<R&&!((W-=v[N+Z])<=0);)N++,W<<=1;if(z+=1<<N,d===1&&852<z||d===2&&592<z)return 1;B[a=h&l]=K<<24|N<<16|o-w|0}}return h!==0&&(B[o+h]=_-Z<<24|64<<16|0),r.bits=K,0}},{"../utils/common":41}],51:[function(x,G,D){G.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(x,G,D){var y=x("../utils/common"),S=0,p=1;function k(j){for(var s=j.length;0<=--s;)j[s]=0}var L=0,d=29,u=256,C=u+1+d,g=30,B=19,w=2*C+1,b=15,r=16,e=7,t=256,a=16,l=17,o=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(C+2));k(U);var _=new Array(2*g);k(_);var T=new Array(512);k(T);var n=new Array(256);k(n);var R=new Array(d);k(R);var K,N,Z,W=new Array(g);function z(j,s,m,ot,J){this.static_tree=j,this.extra_bits=s,this.extra_base=m,this.elems=ot,this.max_length=J,this.has_stree=j&&j.length}function h(j,s){this.dyn_tree=j,this.max_code=0,this.stat_desc=s}function i(j){return j<256?T[j]:T[256+(j>>>7)]}function c(j,s){j.pending_buf[j.pending++]=255&s,j.pending_buf[j.pending++]=s>>>8&255}function v(j,s,m){j.bi_valid>r-m?(j.bi_buf|=s<<j.bi_valid&65535,c(j,j.bi_buf),j.bi_buf=s>>r-j.bi_valid,j.bi_valid+=m-r):(j.bi_buf|=s<<j.bi_valid&65535,j.bi_valid+=m)}function E(j,s,m){v(j,m[2*s],m[2*s+1])}function et(j,s){for(var m=0;m|=1&j,j>>>=1,m<<=1,0<--s;);return m>>>1}function ft(j,s,m){var ot,J,mt=new Array(b+1),gt=0;for(ot=1;ot<=b;ot++)mt[ot]=gt=gt+m[ot-1]<<1;for(J=0;J<=s;J++){var ut=j[2*J+1];ut!==0&&(j[2*J]=et(mt[ut]++,ut))}}function X(j){var s;for(s=0;s<C;s++)j.dyn_ltree[2*s]=0;for(s=0;s<g;s++)j.dyn_dtree[2*s]=0;for(s=0;s<B;s++)j.bl_tree[2*s]=0;j.dyn_ltree[2*t]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function $(j){8<j.bi_valid?c(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function pt(j,s,m,ot){var J=2*s,mt=2*m;return j[J]<j[mt]||j[J]===j[mt]&&ot[s]<=ot[m]}function wt(j,s,m){for(var ot=j.heap[m],J=m<<1;J<=j.heap_len&&(J<j.heap_len&&pt(s,j.heap[J+1],j.heap[J],j.depth)&&J++,!pt(s,ot,j.heap[J],j.depth));)j.heap[m]=j.heap[J],m=J,J<<=1;j.heap[m]=ot}function Et(j,s,m){var ot,J,mt,gt,ut=0;if(j.last_lit!==0)for(;ot=j.pending_buf[j.d_buf+2*ut]<<8|j.pending_buf[j.d_buf+2*ut+1],J=j.pending_buf[j.l_buf+ut],ut++,ot===0?E(j,J,s):(E(j,(mt=n[J])+u+1,s),(gt=A[mt])!==0&&v(j,J-=R[mt],gt),E(j,mt=i(--ot),m),(gt=M[mt])!==0&&v(j,ot-=W[mt],gt)),ut<j.last_lit;);E(j,t,s)}function Mt(j,s){var m,ot,J,mt=s.dyn_tree,gt=s.stat_desc.static_tree,ut=s.stat_desc.has_stree,vt=s.stat_desc.elems,It=-1;for(j.heap_len=0,j.heap_max=w,m=0;m<vt;m++)mt[2*m]!==0?(j.heap[++j.heap_len]=It=m,j.depth[m]=0):mt[2*m+1]=0;for(;j.heap_len<2;)mt[2*(J=j.heap[++j.heap_len]=It<2?++It:0)]=1,j.depth[J]=0,j.opt_len--,ut&&(j.static_len-=gt[2*J+1]);for(s.max_code=It,m=j.heap_len>>1;1<=m;m--)wt(j,mt,m);for(J=vt;m=j.heap[1],j.heap[1]=j.heap[j.heap_len--],wt(j,mt,1),ot=j.heap[1],j.heap[--j.heap_max]=m,j.heap[--j.heap_max]=ot,mt[2*J]=mt[2*m]+mt[2*ot],j.depth[J]=(j.depth[m]>=j.depth[ot]?j.depth[m]:j.depth[ot])+1,mt[2*m+1]=mt[2*ot+1]=J,j.heap[1]=J++,wt(j,mt,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],(function(Bt,xt){var jt,Xt,I,O,Y,Q,tt=xt.dyn_tree,F=xt.max_code,nt=xt.stat_desc.static_tree,lt=xt.stat_desc.has_stree,at=xt.stat_desc.extra_bits,dt=xt.stat_desc.extra_base,_t=xt.stat_desc.max_length,ht=0;for(O=0;O<=b;O++)Bt.bl_count[O]=0;for(tt[2*Bt.heap[Bt.heap_max]+1]=0,jt=Bt.heap_max+1;jt<w;jt++)_t<(O=tt[2*tt[2*(Xt=Bt.heap[jt])+1]+1]+1)&&(O=_t,ht++),tt[2*Xt+1]=O,F<Xt||(Bt.bl_count[O]++,Y=0,dt<=Xt&&(Y=at[Xt-dt]),Q=tt[2*Xt],Bt.opt_len+=Q*(O+Y),lt&&(Bt.static_len+=Q*(nt[2*Xt+1]+Y)));if(ht!==0){do{for(O=_t-1;Bt.bl_count[O]===0;)O--;Bt.bl_count[O]--,Bt.bl_count[O+1]+=2,Bt.bl_count[_t]--,ht-=2}while(0<ht);for(O=_t;O!==0;O--)for(Xt=Bt.bl_count[O];Xt!==0;)F<(I=Bt.heap[--jt])||(tt[2*I+1]!==O&&(Bt.opt_len+=(O-tt[2*I+1])*tt[2*I],tt[2*I+1]=O),Xt--)}})(j,s),ft(mt,It,j.bl_count)}function f(j,s,m){var ot,J,mt=-1,gt=s[1],ut=0,vt=7,It=4;for(gt===0&&(vt=138,It=3),s[2*(m+1)+1]=65535,ot=0;ot<=m;ot++)J=gt,gt=s[2*(ot+1)+1],++ut<vt&&J===gt||(ut<It?j.bl_tree[2*J]+=ut:J!==0?(J!==mt&&j.bl_tree[2*J]++,j.bl_tree[2*a]++):ut<=10?j.bl_tree[2*l]++:j.bl_tree[2*o]++,mt=J,It=(ut=0)===gt?(vt=138,3):J===gt?(vt=6,3):(vt=7,4))}function st(j,s,m){var ot,J,mt=-1,gt=s[1],ut=0,vt=7,It=4;for(gt===0&&(vt=138,It=3),ot=0;ot<=m;ot++)if(J=gt,gt=s[2*(ot+1)+1],!(++ut<vt&&J===gt)){if(ut<It)for(;E(j,J,j.bl_tree),--ut!=0;);else J!==0?(J!==mt&&(E(j,J,j.bl_tree),ut--),E(j,a,j.bl_tree),v(j,ut-3,2)):ut<=10?(E(j,l,j.bl_tree),v(j,ut-3,3)):(E(j,o,j.bl_tree),v(j,ut-11,7));mt=J,It=(ut=0)===gt?(vt=138,3):J===gt?(vt=6,3):(vt=7,4)}}k(W);var rt=!1;function H(j,s,m,ot){v(j,(L<<1)+(ot?1:0),3),(function(J,mt,gt,ut){$(J),c(J,gt),c(J,~gt),y.arraySet(J.pending_buf,J.window,mt,gt,J.pending),J.pending+=gt})(j,s,m)}D._tr_init=function(j){rt||((function(){var s,m,ot,J,mt,gt=new Array(b+1);for(J=ot=0;J<d-1;J++)for(R[J]=ot,s=0;s<1<<A[J];s++)n[ot++]=J;for(n[ot-1]=J,J=mt=0;J<16;J++)for(W[J]=mt,s=0;s<1<<M[J];s++)T[mt++]=J;for(mt>>=7;J<g;J++)for(W[J]=mt<<7,s=0;s<1<<M[J]-7;s++)T[256+mt++]=J;for(m=0;m<=b;m++)gt[m]=0;for(s=0;s<=143;)U[2*s+1]=8,s++,gt[8]++;for(;s<=255;)U[2*s+1]=9,s++,gt[9]++;for(;s<=279;)U[2*s+1]=7,s++,gt[7]++;for(;s<=287;)U[2*s+1]=8,s++,gt[8]++;for(ft(U,C+1,gt),s=0;s<g;s++)_[2*s+1]=5,_[2*s]=et(s,5);K=new z(U,A,u+1,C,b),N=new z(_,M,0,g,b),Z=new z(new Array(0),P,0,B,e)})(),rt=!0),j.l_desc=new h(j.dyn_ltree,K),j.d_desc=new h(j.dyn_dtree,N),j.bl_desc=new h(j.bl_tree,Z),j.bi_buf=0,j.bi_valid=0,X(j)},D._tr_stored_block=H,D._tr_flush_block=function(j,s,m,ot){var J,mt,gt=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=(function(ut){var vt,It=4093624447;for(vt=0;vt<=31;vt++,It>>>=1)if(1&It&&ut.dyn_ltree[2*vt]!==0)return S;if(ut.dyn_ltree[18]!==0||ut.dyn_ltree[20]!==0||ut.dyn_ltree[26]!==0)return p;for(vt=32;vt<u;vt++)if(ut.dyn_ltree[2*vt]!==0)return p;return S})(j)),Mt(j,j.l_desc),Mt(j,j.d_desc),gt=(function(ut){var vt;for(f(ut,ut.dyn_ltree,ut.l_desc.max_code),f(ut,ut.dyn_dtree,ut.d_desc.max_code),Mt(ut,ut.bl_desc),vt=B-1;3<=vt&&ut.bl_tree[2*V[vt]+1]===0;vt--);return ut.opt_len+=3*(vt+1)+5+5+4,vt})(j),J=j.opt_len+3+7>>>3,(mt=j.static_len+3+7>>>3)<=J&&(J=mt)):J=mt=m+5,m+4<=J&&s!==-1?H(j,s,m,ot):j.strategy===4||mt===J?(v(j,2+(ot?1:0),3),Et(j,U,_)):(v(j,4+(ot?1:0),3),(function(ut,vt,It,Bt){var xt;for(v(ut,vt-257,5),v(ut,It-1,5),v(ut,Bt-4,4),xt=0;xt<Bt;xt++)v(ut,ut.bl_tree[2*V[xt]+1],3);st(ut,ut.dyn_ltree,vt-1),st(ut,ut.dyn_dtree,It-1)})(j,j.l_desc.max_code+1,j.d_desc.max_code+1,gt+1),Et(j,j.dyn_ltree,j.dyn_dtree)),X(j),ot&&$(j)},D._tr_tally=function(j,s,m){return j.pending_buf[j.d_buf+2*j.last_lit]=s>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&s,j.pending_buf[j.l_buf+j.last_lit]=255&m,j.last_lit++,s===0?j.dyn_ltree[2*m]++:(j.matches++,s--,j.dyn_ltree[2*(n[m]+u+1)]++,j.dyn_dtree[2*i(s)]++),j.last_lit===j.lit_bufsize-1},D._tr_align=function(j){v(j,2,3),E(j,t,U),(function(s){s.bi_valid===16?(c(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):8<=s.bi_valid&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)})(j)}},{"../utils/common":41}],53:[function(x,G,D){G.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(x,G,D){(function(y){(function(S,p){if(!S.setImmediate){var k,L,d,u,C=1,g={},B=!1,w=S.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(S);b=b&&b.setTimeout?b:S,k={}.toString.call(S.process)==="[object process]"?function(a){process.nextTick(function(){e(a)})}:(function(){if(S.postMessage&&!S.importScripts){var a=!0,l=S.onmessage;return S.onmessage=function(){a=!1},S.postMessage("","*"),S.onmessage=l,a}})()?(u="setImmediate$"+Math.random()+"$",S.addEventListener?S.addEventListener("message",t,!1):S.attachEvent("onmessage",t),function(a){S.postMessage(u+a,"*")}):S.MessageChannel?((d=new MessageChannel).port1.onmessage=function(a){e(a.data)},function(a){d.port2.postMessage(a)}):w&&"onreadystatechange"in w.createElement("script")?(L=w.documentElement,function(a){var l=w.createElement("script");l.onreadystatechange=function(){e(a),l.onreadystatechange=null,L.removeChild(l),l=null},L.appendChild(l)}):function(a){setTimeout(e,0,a)},b.setImmediate=function(a){typeof a!="function"&&(a=new Function(""+a));for(var l=new Array(arguments.length-1),o=0;o<l.length;o++)l[o]=arguments[o+1];var A={callback:a,args:l};return g[C]=A,k(C),C++},b.clearImmediate=r}function r(a){delete g[a]}function e(a){if(B)setTimeout(e,0,a);else{var l=g[a];if(l){B=!0;try{(function(o){var A=o.callback,M=o.args;switch(M.length){case 0:A();break;case 1:A(M[0]);break;case 2:A(M[0],M[1]);break;case 3:A(M[0],M[1],M[2]);break;default:A.apply(p,M)}})(l)}finally{r(a),B=!1}}}}function t(a){a.source===S&&typeof a.data=="string"&&a.data.indexOf(u)===0&&e(+a.data.slice(u.length))}})(typeof self>"u"?y===void 0?this:y:self)}).call(this,typeof or<"u"?or:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Pr)),Pr.exports}var Ls=Ds();const Ns=Ga(Ls);var Dr={exports:{}},Aa;function zs(){return Aa||(Aa=1,(function(q,it){(function(x){q.exports=x()})(function(x){var G=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function D(r,e){var t=r[0],a=r[1],l=r[2],o=r[3];t+=(a&l|~a&o)+e[0]-680876936|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&l)+e[1]-389564586|0,o=(o<<12|o>>>20)+t|0,l+=(o&t|~o&a)+e[2]+606105819|0,l=(l<<17|l>>>15)+o|0,a+=(l&o|~l&t)+e[3]-1044525330|0,a=(a<<22|a>>>10)+l|0,t+=(a&l|~a&o)+e[4]-176418897|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&l)+e[5]+1200080426|0,o=(o<<12|o>>>20)+t|0,l+=(o&t|~o&a)+e[6]-1473231341|0,l=(l<<17|l>>>15)+o|0,a+=(l&o|~l&t)+e[7]-45705983|0,a=(a<<22|a>>>10)+l|0,t+=(a&l|~a&o)+e[8]+1770035416|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&l)+e[9]-1958414417|0,o=(o<<12|o>>>20)+t|0,l+=(o&t|~o&a)+e[10]-42063|0,l=(l<<17|l>>>15)+o|0,a+=(l&o|~l&t)+e[11]-1990404162|0,a=(a<<22|a>>>10)+l|0,t+=(a&l|~a&o)+e[12]+1804603682|0,t=(t<<7|t>>>25)+a|0,o+=(t&a|~t&l)+e[13]-40341101|0,o=(o<<12|o>>>20)+t|0,l+=(o&t|~o&a)+e[14]-1502002290|0,l=(l<<17|l>>>15)+o|0,a+=(l&o|~l&t)+e[15]+1236535329|0,a=(a<<22|a>>>10)+l|0,t+=(a&o|l&~o)+e[1]-165796510|0,t=(t<<5|t>>>27)+a|0,o+=(t&l|a&~l)+e[6]-1069501632|0,o=(o<<9|o>>>23)+t|0,l+=(o&a|t&~a)+e[11]+643717713|0,l=(l<<14|l>>>18)+o|0,a+=(l&t|o&~t)+e[0]-373897302|0,a=(a<<20|a>>>12)+l|0,t+=(a&o|l&~o)+e[5]-701558691|0,t=(t<<5|t>>>27)+a|0,o+=(t&l|a&~l)+e[10]+38016083|0,o=(o<<9|o>>>23)+t|0,l+=(o&a|t&~a)+e[15]-660478335|0,l=(l<<14|l>>>18)+o|0,a+=(l&t|o&~t)+e[4]-405537848|0,a=(a<<20|a>>>12)+l|0,t+=(a&o|l&~o)+e[9]+568446438|0,t=(t<<5|t>>>27)+a|0,o+=(t&l|a&~l)+e[14]-1019803690|0,o=(o<<9|o>>>23)+t|0,l+=(o&a|t&~a)+e[3]-187363961|0,l=(l<<14|l>>>18)+o|0,a+=(l&t|o&~t)+e[8]+1163531501|0,a=(a<<20|a>>>12)+l|0,t+=(a&o|l&~o)+e[13]-1444681467|0,t=(t<<5|t>>>27)+a|0,o+=(t&l|a&~l)+e[2]-51403784|0,o=(o<<9|o>>>23)+t|0,l+=(o&a|t&~a)+e[7]+1735328473|0,l=(l<<14|l>>>18)+o|0,a+=(l&t|o&~t)+e[12]-1926607734|0,a=(a<<20|a>>>12)+l|0,t+=(a^l^o)+e[5]-378558|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^l)+e[8]-2022574463|0,o=(o<<11|o>>>21)+t|0,l+=(o^t^a)+e[11]+1839030562|0,l=(l<<16|l>>>16)+o|0,a+=(l^o^t)+e[14]-35309556|0,a=(a<<23|a>>>9)+l|0,t+=(a^l^o)+e[1]-1530992060|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^l)+e[4]+1272893353|0,o=(o<<11|o>>>21)+t|0,l+=(o^t^a)+e[7]-155497632|0,l=(l<<16|l>>>16)+o|0,a+=(l^o^t)+e[10]-1094730640|0,a=(a<<23|a>>>9)+l|0,t+=(a^l^o)+e[13]+681279174|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^l)+e[0]-358537222|0,o=(o<<11|o>>>21)+t|0,l+=(o^t^a)+e[3]-722521979|0,l=(l<<16|l>>>16)+o|0,a+=(l^o^t)+e[6]+76029189|0,a=(a<<23|a>>>9)+l|0,t+=(a^l^o)+e[9]-640364487|0,t=(t<<4|t>>>28)+a|0,o+=(t^a^l)+e[12]-421815835|0,o=(o<<11|o>>>21)+t|0,l+=(o^t^a)+e[15]+530742520|0,l=(l<<16|l>>>16)+o|0,a+=(l^o^t)+e[2]-995338651|0,a=(a<<23|a>>>9)+l|0,t+=(l^(a|~o))+e[0]-198630844|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~l))+e[7]+1126891415|0,o=(o<<10|o>>>22)+t|0,l+=(t^(o|~a))+e[14]-1416354905|0,l=(l<<15|l>>>17)+o|0,a+=(o^(l|~t))+e[5]-57434055|0,a=(a<<21|a>>>11)+l|0,t+=(l^(a|~o))+e[12]+1700485571|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~l))+e[3]-1894986606|0,o=(o<<10|o>>>22)+t|0,l+=(t^(o|~a))+e[10]-1051523|0,l=(l<<15|l>>>17)+o|0,a+=(o^(l|~t))+e[1]-2054922799|0,a=(a<<21|a>>>11)+l|0,t+=(l^(a|~o))+e[8]+1873313359|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~l))+e[15]-30611744|0,o=(o<<10|o>>>22)+t|0,l+=(t^(o|~a))+e[6]-1560198380|0,l=(l<<15|l>>>17)+o|0,a+=(o^(l|~t))+e[13]+1309151649|0,a=(a<<21|a>>>11)+l|0,t+=(l^(a|~o))+e[4]-145523070|0,t=(t<<6|t>>>26)+a|0,o+=(a^(t|~l))+e[11]-1120210379|0,o=(o<<10|o>>>22)+t|0,l+=(t^(o|~a))+e[2]+718787259|0,l=(l<<15|l>>>17)+o|0,a+=(o^(l|~t))+e[9]-343485551|0,a=(a<<21|a>>>11)+l|0,r[0]=t+r[0]|0,r[1]=a+r[1]|0,r[2]=l+r[2]|0,r[3]=o+r[3]|0}function y(r){var e=[],t;for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}function S(r){var e=[],t;for(t=0;t<64;t+=4)e[t>>2]=r[t]+(r[t+1]<<8)+(r[t+2]<<16)+(r[t+3]<<24);return e}function p(r){var e=r.length,t=[1732584193,-271733879,-1732584194,271733878],a,l,o,A,M,P;for(a=64;a<=e;a+=64)D(t,y(r.substring(a-64,a)));for(r=r.substring(a-64),l=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<l;a+=1)o[a>>2]|=r.charCodeAt(a)<<(a%4<<3);if(o[a>>2]|=128<<(a%4<<3),a>55)for(D(t,o),a=0;a<16;a+=1)o[a]=0;return A=e*8,A=A.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(A[2],16),P=parseInt(A[1],16)||0,o[14]=M,o[15]=P,D(t,o),t}function k(r){var e=r.length,t=[1732584193,-271733879,-1732584194,271733878],a,l,o,A,M,P;for(a=64;a<=e;a+=64)D(t,S(r.subarray(a-64,a)));for(r=a-64<e?r.subarray(a-64):new Uint8Array(0),l=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<l;a+=1)o[a>>2]|=r[a]<<(a%4<<3);if(o[a>>2]|=128<<(a%4<<3),a>55)for(D(t,o),a=0;a<16;a+=1)o[a]=0;return A=e*8,A=A.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(A[2],16),P=parseInt(A[1],16)||0,o[14]=M,o[15]=P,D(t,o),t}function L(r){var e="",t;for(t=0;t<4;t+=1)e+=G[r>>t*8+4&15]+G[r>>t*8&15];return e}function d(r){var e;for(e=0;e<r.length;e+=1)r[e]=L(r[e]);return r.join("")}d(p("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function r(e,t){return e=e|0||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var a=this.byteLength,l=r(e,a),o=a,A,M,P,V;return t!==x&&(o=r(t,a)),l>o?new ArrayBuffer(0):(A=o-l,M=new ArrayBuffer(A),P=new Uint8Array(M),V=new Uint8Array(this,l,A),P.set(V),M)}})();function u(r){return/[\u0080-\uFFFF]/.test(r)&&(r=unescape(encodeURIComponent(r))),r}function C(r,e){var t=r.length,a=new ArrayBuffer(t),l=new Uint8Array(a),o;for(o=0;o<t;o+=1)l[o]=r.charCodeAt(o);return e?l:a}function g(r){return String.fromCharCode.apply(null,new Uint8Array(r))}function B(r,e,t){var a=new Uint8Array(r.byteLength+e.byteLength);return a.set(new Uint8Array(r)),a.set(new Uint8Array(e),r.byteLength),a}function w(r){var e=[],t=r.length,a;for(a=0;a<t-1;a+=2)e.push(parseInt(r.substr(a,2),16));return String.fromCharCode.apply(String,e)}function b(){this.reset()}return b.prototype.append=function(r){return this.appendBinary(u(r)),this},b.prototype.appendBinary=function(r){this._buff+=r,this._length+=r.length;var e=this._buff.length,t;for(t=64;t<=e;t+=64)D(this._hash,y(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},b.prototype.end=function(r){var e=this._buff,t=e.length,a,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o;for(a=0;a<t;a+=1)l[a>>2]|=e.charCodeAt(a)<<(a%4<<3);return this._finish(l,t),o=d(this._hash),r&&(o=w(o)),this.reset(),o},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(r){return this._buff=r.buff,this._length=r.length,this._hash=r.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(r,e){var t=e,a,l,o;if(r[t>>2]|=128<<(t%4<<3),t>55)for(D(this._hash,r),t=0;t<16;t+=1)r[t]=0;a=this._length*8,a=a.toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(a[2],16),o=parseInt(a[1],16)||0,r[14]=l,r[15]=o,D(this._hash,r)},b.hash=function(r,e){return b.hashBinary(u(r),e)},b.hashBinary=function(r,e){var t=p(r),a=d(t);return e?w(a):a},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(r){var e=B(this._buff.buffer,r),t=e.length,a;for(this._length+=r.byteLength,a=64;a<=t;a+=64)D(this._hash,S(e.subarray(a-64,a)));return this._buff=a-64<t?new Uint8Array(e.buffer.slice(a-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(r){var e=this._buff,t=e.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l,o;for(l=0;l<t;l+=1)a[l>>2]|=e[l]<<(l%4<<3);return this._finish(a,t),o=d(this._hash),r&&(o=w(o)),this.reset(),o},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var r=b.prototype.getState.call(this);return r.buff=g(r.buff),r},b.ArrayBuffer.prototype.setState=function(r){return r.buff=C(r.buff,!0),b.prototype.setState.call(this,r)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(r,e){var t=k(new Uint8Array(r)),a=d(t);return e?w(a):a},b})})(Dr)),Dr.exports}var Fs=zs();const xa=Ga(Fs),Ba=document.getElementById("canvas").getContext("2d"),Se=document.getElementById("video"),Fe=document.getElementById("download"),Vs=document.getElementById("input");let Qa,Ka,Lr,Ge,Qe,Nr=!1;async function Ja(){if(Se.ended){Qe+='],"sounds":[',Fe.text="Converting to mp3...";const it=await new AudioContext().decodeAudioData(Qa),x=it.sampleRate,G=it.getChannelData(0),D=new zr.Mp3Encoder(1,x,64),y=[],S=1152;for(let L=0;L<G.length;L+=S){const d=G.subarray(L,L+S),u=D.encodeBuffer(new Int16Array(d.map(C=>Math.max(-1,Math.min(1,C))*32767)));u.length&&y.push(u)}y.push(D.flush());const p=new Blob(y,{type:"audio/mp3"}),k=xa.hash(await p.text());Qe+='{"name":"Audio","dataFormat":"mp3","assetId":"'+k+'","md5ext":"'+k+'.mp3"},',Ge.file(k+".mp3",p),Ge.file("project.json",Qe+'],"volume":100,"layerOrder":1,"visible":true,"x":0,"y":0,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"}],"monitors":[],"extensions":[],"meta":{"semver":"3.0.0","vm":"0.2.0","agent":""}}'),Ge.generateAsync({type:"blob"}).then(L=>{Fe.text="Your project is ready; click here to download it!",Fe.href=URL.createObjectURL(L)});return}else{Ba.drawImage(Se,Ka,0,Lr,360);const q=Math.round(Se.currentTime*10);Ba.canvas.toBlob(async it=>{if(it){const x=xa.hash(await it.text());Qe+='{"name":"'+q+'","bitmapResolution":1,"dataFormat":"jpg","assetId":"'+x+'","md5ext":"'+x+'.jpg","rotationCenterX":240,"rotationCenterY":180},',Ge.file(x+".jpg",it),Se.currentTime+=.1}},"image/jpeg",.7)}}Se.addEventListener("seeked",Ja);Se.addEventListener("canplay",()=>{Nr||(Nr=!0,Lr=Se.videoWidth/Se.videoHeight*360,Ka=240-Lr/2,Ja())});Vs.addEventListener("change",async q=>{const it=q.target.files[0];if(it){Nr=!1,Fe.text="Getting array buffer...",Qa=await it.arrayBuffer(),Fe.text="Converting video frames... (This takes a while; feel free to do something else while you wait)",Fe.download=it.name+".sb3",Qe='{"targets":[{"isStage":true,"name":"Stage","variables":{},"lists":{},"broadcasts":{},"blocks":{},"comments":{},"currentCostume":0,"costumes":[{"name":"backdrop1","dataFormat":"svg","assetId":"cd21514d0531fdffb22204e0ec5ed84a","md5ext":"cd21514d0531fdffb22204e0ec5ed84a.svg","rotationCenterX":240,"rotationCenterY":180}],"sounds":[],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"video2sb3","variables":{},"lists":{},"broadcasts":{},"blocks":{"h":{"opcode":"event_whenflagclicked","next":"c","parent":null,"inputs":{},"fields":{},"shadow":false,"topLevel":true,"x":48,"y":64},"c":{"opcode":"sensing_resettimer","next":"d","parent":"h","inputs":{},"fields":{},"shadow":false,"topLevel":false},"d":{"opcode":"control_forever","next":null,"parent":"c","inputs":{"SUBSTACK":[2,"a"]},"fields":{},"shadow":false,"topLevel":false},"a":{"opcode":"looks_switchcostumeto","next":null,"parent":"d","inputs":{"COSTUME":[3,"e","i"]},"fields":{},"shadow":false,"topLevel":false},"e":{"opcode":"operator_add","next":null,"parent":"a","inputs":{"NUM1":[3,"f",[4,""]],"NUM2":[1,[4,"1"]]},"fields":{},"shadow":false,"topLevel":false},"f":{"opcode":"operator_mathop","next":null,"parent":"e","inputs":{"NUM":[3,"g",[4,""]]},"fields":{"OPERATOR":["floor",null]},"shadow":false,"topLevel":false},"g":{"opcode":"operator_multiply","next":null,"parent":"f","inputs":{"NUM1":[3,"j",[4,""]],"NUM2":[1,[4,"10"]]},"fields":{},"shadow":false,"topLevel":false},"j":{"opcode":"sensing_timer","next":null,"parent":"g","inputs":{},"fields":{},"shadow":false,"topLevel":false},"i":{"opcode":"looks_costume","next":null,"parent":"a","inputs":{},"fields":{"COSTUME":["1",null]},"shadow":true,"topLevel":false},"k":{"opcode":"event_whenflagclicked","next":"b","parent":null,"inputs":{},"fields":{},"shadow":false,"topLevel":true,"x":48,"y":384},"b":{"opcode":"sound_playuntildone","next":"l","parent":"k","inputs":{"SOUND_MENU":[1,"m"]},"fields":{},"shadow":false,"topLevel":false},"m":{"opcode":"sound_sounds_menu","next":null,"parent":"b","inputs":{},"fields":{"SOUND_MENU":["Audio",null]},"shadow":true,"topLevel":false},"l":{"opcode":"control_stop","next":null,"parent":"b","inputs":{},"fields":{"STOP_OPTION":["other scripts in sprite",null]},"shadow":false,"topLevel":false,"mutation":{"tagName":"mutation","children":[],"hasnext":"true"}}},"comments":{},"currentCostume":0,"costumes":[',Ge=new Ns;const x=URL.createObjectURL(it);Se.src=x}});
